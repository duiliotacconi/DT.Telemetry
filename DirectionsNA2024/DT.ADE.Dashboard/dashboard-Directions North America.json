{
    "$schema": "https://dataexplorer.azure.com/static/d/schema/49/dashboard.json",
    "id": "5882769e-d7fd-4800-8e7d-7bd8fad3c9d9",
    "eTag": "a419153f-5767-435b-9078-d1807ca9811f",
    "title": "Directions North America",
    "tiles": [
        {
            "id": "a27ec310-3bcb-4145-bfa1-f4232ff89717",
            "title": "Long Running SQL Queries (ms)",
            "visualType": "table",
            "pageId": "d1a3fbcf-a4a6-4912-ab95-fd07bfe32849",
            "layout": {
                "x": 0,
                "y": 20,
                "width": 24,
                "height": 10
            },
            "visualOptions": {
                "hideLegend": false,
                "table__enableRenderLinks": true,
                "colorRulesDisabled": false,
                "colorStyle": "light",
                "crossFilterDisabled": true,
                "drillthroughDisabled": true,
                "colorRules": [
                    {
                        "id": "0d9c7c7d-3fb5-4fa6-9308-286adf620062",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "rows",
                        "conditions": [
                            {
                                "operator": "==",
                                "column": "with UPDLOCK",
                                "values": [
                                    "Yes"
                                ]
                            },
                            {
                                "operator": "!=",
                                "column": "Type",
                                "values": [
                                    "SELECT"
                                ]
                            }
                        ],
                        "chainingOperator": "or",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "blue",
                        "tag": "",
                        "icon": null,
                        "ruleName": ""
                    },
                    {
                        "id": "fd2e9d33-7552-45cb-ba1c-c4b8cebf7d05",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "cells",
                        "conditions": [
                            {
                                "operator": ">",
                                "column": "Duration",
                                "values": [
                                    "1000"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "red",
                        "tag": "",
                        "icon": null,
                        "ruleName": ""
                    },
                    {
                        "id": "815fca99-d789-4b4a-be34-f677a4d5fce6",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "cells",
                        "conditions": [
                            {
                                "operator": "!=",
                                "column": "Type",
                                "values": [
                                    "SELECT"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "yellow",
                        "tag": "",
                        "icon": null,
                        "ruleName": ""
                    }
                ],
                "crossFilter": [
                    {
                        "interaction": "column",
                        "property": "extensionPublisher",
                        "parameterId": "9cc55dcf-17d4-4829-9340-37c385862cdf",
                        "disabled": false
                    }
                ],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where timestamp between (_startTime .. _endTime)// adjust as needed\n| where customDimensions.eventId == 'RT0005' \n| where customDimensions.alObjectId > 0 \n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.clientType has_any (_ClientType)\n| extend alObjectName = trim(@'XYZ',tostring(customDimensions.alObjectName))\n| extend extensionName = trim(@'XYZ',tostring(customDimensions.extensionName))\n| extend eventId = customDimensions.eventId \n, sqlStatement = tostring(customDimensions.sqlStatement)\n, extensionId = customDimensions.extensionId\n, extensionInfo = strcat(extensionName, ' ', customDimensions.extensionVersion, \n    (iff(isnotempty(tostring(customDimensions.extensionPublisher)), strcat(' - ', tostring(customDimensions.extensionPublisher)), '')))\n, alObjectInfo = strcat(customDimensions.alObjectType, ' ', customDimensions.alObjectId, ' - ', alObjectName)\n, alStackTrace = tostring(customDimensions.alStackTrace)\n, clientType = tostring(customDimensions.clientType)\n, alObjectId = customDimensions.alObjectId\n, alObjectType = customDimensions.alObjectType\n, executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000  \n| extend operationType = case(\n    sqlStatement startswith \"UPDATE\", \"UPDATE\"\n    , sqlStatement startswith \"DELETE\", \"DELETE\"\n    , sqlStatement startswith \"BeginTransaction\", \"BEGIN_TRANS\"\n    , sqlStatement matches regex \"INSERT INTO\", \"INSERT\"\n    , sqlStatement startswith \"SELECT\", \"SELECT\"\n    , sqlStatement matches regex \"IF EXISTS \\\\(SELECT (.*)\\\\) SELECT\", \"SELECT'\"\n    , sqlStatement has \"SELECT NEXT VALUE FOR\", \"SELECT_SEQUENCE_VALUE\"\n    , sqlStatement has \"SELECT @@SPID\", \"SELECT_SPID\"\n    , sqlStatement matches regex \"(.*)WITH\", \"SELECT\"\n    , sqlStatement startswith \"CREATE TABLE\", \"CREATE_TABLE\"\n    , sqlStatement startswith \"ALTER TABLE\", \"ALTER_TABLE\"\n    , sqlStatement startswith \"exec sp_rename\", \"RENAME_TABLE\" \n    , sqlStatement matches regex \"(.*)DROP TABLE\", \"DROP_TABLE\"\n    , sqlStatement startswith \"SET LOCK_TIMEOUT\", \"SET_LOCK_TIMEOUT\"\n    , sqlStatement has \"sp_getapplock\", \"GET_APP_LOCK\"\n    , \"UNKNOWN\"\n)\n, withUPDLOCK = iff(customDimensions.sqlStatement has 'UPDLOCK','Yes', 'No')\n, numberOfJoins = countof(sqlStatement, \"JOIN\") \n, numberOfFlowFields = countof(sqlStatement, \"OUTER APPLY\") \n, extensionIdsFromJOIN = tostring( extract_all(\"JOIN \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY\\\\$.+?\\\\$(\\\\S+?)\\\"\", sqlStatement) )\n| parse kind=regex sqlStatement with selectPart:string \"FROM\" rest:string\n| extend numberOfColumnsSelected = case(\n    operationType == \"SELECT\", countof(selectPart,\",\") + 1\n    , operationType == \"SELECT'\", countof(selectPart,\",\") + 1\n    , 0\n)\n, isolationLevel = case(\n    sqlStatement has 'WITH(UPDLOCK)', 'UPDLOCK'\n  , sqlStatement has 'WITH(READUNCOMMITTED)', 'ReadUncommitted'\n  , sqlStatement has 'WITH(READCOMMITTED)', 'ReadCommitted' // available from 22.0\n  , sqlStatement has 'WITH(REPEATABLEREAD)', 'RepeatableRead' // not sure about this yet\n  , 'Default'\n)\n| sort by timestamp desc \n| project timestamp, \n    [\"Client Type\"] = clientType, \n    [\"AL Object ID\"] = alObjectId,\n    [\"AL Object Type\"] = alObjectType,\n    [\"AL Object Name\"] = alObjectName,\n    [\"Duration\"] = executionTimeInMS, \n    [\"Type\"] = operationType, \n    [\"FlowFields\"] = numberOfFlowFields, \n    [\"JOINs\"] = numberOfJoins, \n    [\"with UPDLOCK\"] = withUPDLOCK,\n    [\"AL Object Information\"] = alObjectInfo, \n    [\"AL Stack Trace\"] = alStackTrace,\n    [\"Extension Information\"] = extensionInfo,\n    [\"SQL Statement\"] = sqlStatement,\n    [\"Isolation Level\"] = isolationLevel,\n    [\"User Telemetry ID\"] = user_Id,\n    [\"Session Id\"] = session_Id\n    ",
                "usedVariables": [
                    "_ClientType",
                    "_CompanyName",
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_publisher",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "d059eab6-9c59-4551-9b41-9c4ebf002bf7",
            "title": "Lock Snapshot",
            "visualType": "table",
            "pageId": "5464aca4-0e79-4cc9-acaf-5bfcba11b235",
            "layout": {
                "x": 0,
                "y": 35,
                "width": 24,
                "height": 10
            },
            "visualOptions": {
                "hideLegend": false,
                "table__enableRenderLinks": true,
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "colorRules": [],
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let Timeouts = traces \n| where timestamp between (_startTime .. _endTime) // adjust to your needs\n| where customDimensions.eventId == 'RT0012'\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentName has_any (_environmentName)\n| extend sqlStatement = replace_string(tostring(customDimensions.sqlStatement),'XYZ','')\n    , stackTrace = replace_string(tostring(customDimensions.alStackTrace),'XYZ','')\n    , alObjectName = replace_string(tostring(customDimensions.alObjectName),'XYZ','')\n    , extensionName = replace_string(tostring(customDimensions.extensionName),'XYZ','')\n| extend snapshotId = tostring( customDimensions.snapshotId )\n| project snapshotId, timestamp\n, [\"AL Object Type\"] = customDimensions.alObjectType\n, [\"AL Object Id\"] = customDimensions.alObjectId\n, [\"AL Object Name\"] = alObjectName\n, [\"AL Stack Trace\"] = stackTrace\n, [\"AL Execution Method\"] = customDimensions.alExecutingMethodScope\n, [\"Extension Name\"] = customDimensions.extensionName\n, [\"Extension Version\"] = customDimensions.extensionVersion\n, [\"User Telemetry Id\"] = case(\n  toint( substring(customDimensions.componentVersion,0,2)) >= 20, user_Id\n, 'N/A'\n)\n;\nTimeouts\n| join (traces\n| where customDimensions.eventId == 'RT0013'\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| extend sqlStatement = replace_string(tostring(customDimensions.sqlStatement),'XYZ','')\n    , stackTrace = replace_string(tostring(customDimensions.alStackTrace),'XYZ','')\n    , alObjectName = replace_string(tostring(customDimensions.alObjectName),'XYZ','')\n    , extensionName = replace_string(tostring(customDimensions.extensionName),'XYZ','')\n| extend snapshotId = tostring( customDimensions.snapshotId )\n| project snapshotId\n, alObjectTypeHoldingLock = customDimensions.alObjectType\n, alObjectIdHoldingLock = customDimensions.alObjectId\n, alObjectNameHoldingLock = alObjectName\n, alStackTraceHoldingLock = stackTrace\n, alExecutionMethodHoldingLock = customDimensions.alExecutingMethodScope\n, sqlTableLocked = customDimensions.sqlTableName\n, sqlLockResourceType = customDimensions.sqlLockResourceType\n, sqlLockRequestMode = customDimensions.sqlLockRequestMode\n, sqlLockRequestStatus = customDimensions.sqlLockRequestStatus\n, sqlServerSessionId = customDimensions.sqlServerSessionId\n, alSessionIdHoldingLock = customDimensions.sessionId\n, extensionNameHoldingLock = extensionName\n, extensionVersionHoldingLock = customDimensions.extensionVersion\n, clientTypeHoldingLock = customDimensions.clientType\n)\non$left.snapshotId == $right.snapshotId\n| order by snapshotId\n| project-away snapshotId, snapshotId1",
                "usedVariables": [
                    "_CompanyName",
                    "_endTime",
                    "_environmentName",
                    "_publisher",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "2cfd710a-43f7-4cf7-8d94-193e2beb3b46",
            "title": "SQL Execution Chart",
            "visualType": "column",
            "pageId": "d1a3fbcf-a4a6-4912-ab95-fd07bfe32849",
            "layout": {
                "x": 0,
                "y": 37,
                "width": 24,
                "height": 7
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": false,
                "xColumnTitle": "",
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where timestamp between (_startTime .. _endTime) // adjust as needed\n| where operation_Name == 'Long Running Operation (SQL Query)' // do note that in a later version of the schema, this field will not be used \n     or customDimensions.eventId == 'RT0005' // starting from version 16.1, the eventId is used to identity signal types\n| where customDimensions.alObjectId > 0 // filter out internal server calls\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentName has_any (_environmentName)\n| project timestamp\n| summarize count() by bin(timestamp, 10min)\n| render timechart ",
                "usedVariables": [
                    "_CompanyName",
                    "_endTime",
                    "_environmentName",
                    "_publisher",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "3d67e785-f63c-44f6-bb04-a96f2472565b",
            "title": "Top 20 Objects Used during the Long SQL Queries",
            "visualType": "pie",
            "pageId": "d1a3fbcf-a4a6-4912-ab95-fd07bfe32849",
            "layout": {
                "x": 0,
                "y": 30,
                "width": 24,
                "height": 7
            },
            "visualOptions": {
                "hideLegend": false,
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "labelDisabled": false,
                "pie__label": [
                    "name",
                    "percentage"
                ],
                "tooltipDisabled": false,
                "pie__tooltip": [
                    "name",
                    "percentage",
                    "value"
                ],
                "pie__orderBy": "size",
                "pie__kind": "pie",
                "pie__topNSlices": null,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _maxCount = 20;\ntraces\n| where timestamp  between(_startTime .. _endTime)\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.eventId == 'RT0005' \n| where customDimensions.alObjectId > 0 // filter out internal server calls\n| extend alObjectName = trim('XYZ',tostring(customDimensions.alObjectName))\n| extend alObjectInfo = strcat(tostring(customDimensions.alObjectType), ' ', tostring(customDimensions.alObjectId), ' - ',alObjectName)\n| summarize count() by alObjectInfo\n| sort by count_\n| limit _maxCount ",
                "usedVariables": [
                    "_CompanyName",
                    "_endTime",
                    "_environmentName",
                    "_publisher",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "c618b79b-de37-42af-8657-f788c44c53ae",
            "title": "Top 20 Slowest AL Methods (in ms)",
            "visualType": "table",
            "pageId": "e6b3a051-ba9e-4db5-912d-c63987fd1fb8",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 24,
                "height": 11
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRulesDisabled": false,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "colorRules": [
                    {
                        "id": "11402fde-e050-4e5e-b767-e73f173801d6",
                        "ruleType": "colorByCondition",
                        "applyToColumn": "Avg Duration",
                        "hideText": false,
                        "applyTo": "cells",
                        "conditions": [
                            {
                                "operator": ">",
                                "column": "Avg Duration",
                                "values": [
                                    "5000"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "red",
                        "tag": "",
                        "icon": null,
                        "ruleName": "Avg Duration > 5000"
                    },
                    {
                        "id": "92160ff2-25ce-4514-bfe6-7b8229c827ac",
                        "ruleType": "colorByCondition",
                        "applyToColumn": "Avg Duration",
                        "hideText": false,
                        "applyTo": "cells",
                        "conditions": [
                            {
                                "operator": ">",
                                "column": "Avg Duration",
                                "values": [
                                    "750"
                                ]
                            },
                            {
                                "operator": "<=",
                                "column": "Avg Duration",
                                "values": [
                                    "5000"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "yellow",
                        "tag": "",
                        "icon": null,
                        "ruleName": "Avg Duration > 750"
                    }
                ],
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _maxCount = 20;\ntraces\n| where timestamp  between (_startTime .. _endTime)\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.eventId == 'RT0018'\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| extend extensionName = trim('XYZ', tostring(customDimensions.extensionName))\n  , alObjectName = trim('XYZ',tostring(customDimensions.alObjectName))\n  , alMethod = trim('XYZ',tostring( customDimensions.alMethod)) \n| extend environmentName = tostring(customDimensions.environmentName)\n, alObjectInfo = strcat(customDimensions.alObjectType, ' ', customDimensions.alObjectId, ' - ', alObjectName)\n, executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000 //the datatype for executionTime is timespan \n, suspendedTime = customDimensions.suspendedTime // will come on 22.x\n, extensionInfo = strcat( extensionName, ' ', customDimensions.extensionVersion)\n, clientType = tostring(customDimensions.clientType)\n, exclusiveTime = customDimensions.exclusiveTime // This dimension was introduced in Business Central 2023 release wave 1, version 22.1. Backported to version 21.6\n, exclusiveTimeInMS = toreal(totimespan(customDimensions.exclusiveTime))/10000 //the datatype for exclusiveTime is timespan \n, alStackTrace = tostring(customDimensions.alStackTrace)\n, longRunningThreshold = tostring(customDimensions.longRunningThreshold)\n, longRunningThresholdInMS = toreal(totimespan(customDimensions.longRunningThreshold))/10000 //the datatype for executionTime is timespan \n, sqlExecutes = toint(customDimensions.sqlExecutes) // This dimension was introduced in Business Central 2023 release wave 1, version 22.0\n, sqlRowsRead = toint(customDimensions.sqlRowsRead) // This dimension was introduced in Business Central 2023 release wave 1, version 22.0\n, usertelemetryId = case(\n  // user telemetry id was introduced in the platform in version 20.0\n  toint( substring(customDimensions.componentVersion,0,2)) >= 20, user_Id\n, 'N/A')\n| summarize count(), sum( executionTimeInMS ), avg( executionTimeInMS ), sum(exclusiveTimeInMS), avg(exclusiveTimeInMS) by environmentName, alObjectInfo, alMethod, extensionInfo, clientType, alStackTrace, longRunningThreshold, longRunningThresholdInMS, sqlExecutes, sqlRowsRead, usertelemetryId, session_Id\n| order by avg_executionTimeInMS desc \n| project \n    [\"Environment Name\"] = environmentName,\n    [\"AL Object Information\"] = alObjectInfo,\n    [\"AL Method\"] = alMethod,\n    [\"AL Stack Trace\"] = alStackTrace,\n    [\"User Telemetry ID\"] = usertelemetryId,\n    [\"Extension Information\"] = extensionInfo,\n    [\"Client Type\"] = clientType,\n    [\"Ocurrance\"] = count_,\n    [\"SQL Executes\"] = sqlExecutes,\n    [\"SQL Rows Read\"] = sqlRowsRead,\n    [\"Avg Duration\"] = round(avg_executionTimeInMS, 2),\n    [\"Total Duration\"] = round(sum_executionTimeInMS,2),\n    [\"Avg Exclusive Time\"] = round(avg_exclusiveTimeInMS,2),\n    [\"Total Exclusive Time\"] = round(sum_exclusiveTimeInMS,2),\n    [\"Session Id\"] = session_Id\n| limit _maxCount",
                "usedVariables": [
                    "_CompanyName",
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_publisher",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "872dc80f-a7e1-4361-9e23-8c7796a2821e",
            "title": "Long Running SQL Queries for the defined Time Range",
            "visualType": "markdown",
            "pageId": "f5885bb6-1db1-42c3-888b-fa857a7b39fd",
            "layout": {
                "x": 0,
                "y": 4,
                "width": 10,
                "height": 5
            },
            "visualOptions": {
                "xColumn": null
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _upperLimit = 5000;\nlet _appInsightsTraces = materialize  (\n    traces \n    | where timestamp  between (_startTime .. _endTime)\n    | where customDimensions.environmentType has_any (_EnvironmentType)\n    | where customDimensions.environmentName has_any (_environmentName)\n    | where customDimensions.companyName has_any (_CompanyName)\n    | where customDimensions.extensionPublisher has_any (_publisher)\n    | where customDimensions.eventId == \"RT0005\"\n    | where customDimensions.alObjectId > 0\n);\nlet _lowerThresholdinMs = toscalar (\n    _appInsightsTraces\n    | limit 1\n    | extend _executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000\n    | extend _longRunningThresholdInMS = iff(toreal(customDimensions.longRunningThresholdInMs) > 0, \n            toreal(customDimensions.longRunningThresholdInMs),\n            toreal(totimespan(customDimensions.longRunningThreshold))/10000)\n    | project tostring(toint(_longRunningThresholdInMS))\n);\nlet _totalQueries = toscalar (\n    _appInsightsTraces\n    | count \n);\nlet _tooManyJoins = toscalar (\n    _appInsightsTraces\n    | extend sqlStatement = tostring(customDimensions.sqlStatement)\n    | extend _numberOfJoins = countof(sqlStatement, \"JOIN\")\n    | where _numberOfJoins > 5\n    | count \n);\nlet _longQueries = toscalar (\n    _appInsightsTraces\n    | extend _executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000\n    | where _executionTimeInMS > toint(customDimensions.longRunningThresholdInMs) and _executionTimeInMS < _upperLimit\n    | count \n);\nlet _veryLongQueries = toscalar (\n    _appInsightsTraces\n    | extend _executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000\n    | where _executionTimeInMS >= _upperLimit\n    | count \n);\n_appInsightsTraces\n| limit 1\n| project strcat(\n                \"|\",\"Total Queries\", \n                \"|\", \"Long Running Queries\", \n                \"|\", \"Very Long Running Queries\", \n                \"|\", \"Queries with  many Joins\", \"|\\n\", \n                \"|------------------|:---------------|:---------------|:---------------|\\n\",\n                \"|\", _totalQueries, \"|\", _longQueries, \"|\", _veryLongQueries, \"|\", _tooManyJoins, \"\\n\",\n                \"\\n **Note:** \\n\",\n                \"- The **Lower Threshold** is defined as greater than \", _lowerThresholdinMs, \" ms and less than \", _upperLimit, \" ms\\n\",\n                \"- The **Upper Threshold** is defined greater than or equal to \", _upperLimit, \" ms\\n\")\n\n\n",
                "usedVariables": [
                    "_CompanyName",
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_publisher",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "dc592e1f-adfd-4166-8637-f36a861a215e",
            "title": "OData Usage (in ms) [Limited to past 24 hrs.]",
            "visualType": "table",
            "pageId": "fd2a227c-d2e0-49f4-a2ad-b21b9a1dd382",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 24,
                "height": 7
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRulesDisabled": false,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "colorRules": [
                    {
                        "id": "bf2e28be-8012-4489-852a-98bdbc7471c1",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "cells",
                        "conditions": [
                            {
                                "operator": ">",
                                "column": "Avg. Time",
                                "values": [
                                    "5000"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "red",
                        "tag": "",
                        "icon": null,
                        "ruleName": "Avg. Time > 5000"
                    },
                    {
                        "id": "2258645e-1fd1-4d9c-8243-e5817ddb3c26",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "cells",
                        "conditions": [
                            {
                                "operator": ">",
                                "column": "Avg. Time",
                                "values": [
                                    "750"
                                ]
                            },
                            {
                                "operator": "<=",
                                "column": "Avg. Time",
                                "values": [
                                    "5000"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "yellow",
                        "tag": "",
                        "icon": null,
                        "ruleName": "Avg. Time > 750"
                    }
                ],
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _maxDuration = 24h;\nlet _currentDuration = _endTime - _startTime;\nlet _duration = iff(_currentDuration > _maxDuration , _maxDuration, _currentDuration);\ntraces \n| where timestamp >= ago(_duration)\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.eventId == \"RT0008\"\n| where toupper(customDimensions.category) contains \"ODATA\"\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| extend _endpoint = strcat(\"WS/\", customDimensions.alObjectType,'/', customDimensions.alObjectId, '(',tostring(customDimensions.endpoint),')')\n| extend _processingTimeMS = toreal(totimespan(customDimensions.serverExecutionTime))/10000\n| project [\"Endpoint\"] = _endpoint, \n        [\"Object Type\"] = tostring(customDimensions.alObjectType), \n        [\"Object No.\"] = tostring(customDimensions.alObjectId), \n        _processingTimeMS, \n        [\"Publisher\"] = tostring(customDimensions.extensionPublisher),\n        [\"Environment Name\"] = tostring(customDimensions.environmentName),\n        [\"Environment Type\"] = tostring(customDimensions.environmentType)\n| summarize count(), [\"Avg. Time\"] = round(avg(_processingTimeMS),2), [\"Total Time\"] = round(sum(_processingTimeMS),2) by [\"Endpoint\"], [\"Object Type\"], [\"Object No.\"], [\"Publisher\"], [\"Environment Name\"], [\"Environment Type\"]\n| sort by count_",
                "usedVariables": [
                    "_CompanyName",
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "7c89e962-0e32-418f-b16c-01b8da9ab560",
            "title": "Long Running AL Methods by Object Type for the defined Time Range",
            "visualType": "markdown",
            "pageId": "f5885bb6-1db1-42c3-888b-fa857a7b39fd",
            "layout": {
                "x": 10,
                "y": 4,
                "width": 14,
                "height": 5
            },
            "visualOptions": {
                "xColumn": null
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _appInsightsTraces = materialize  (\n    traces\n    | where timestamp between (_startTime .. _endTime)\n    | where customDimensions.eventId == \"RT0018\"\n    | where customDimensions.environmentType has_any (_EnvironmentType)\n    | where customDimensions.environmentName has_any (_environmentName) \n    | extend _executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000\n    | extend _longRunningThresholdInMS = iff(toreal(customDimensions.longRunningThresholdInMs) > 0, \n            toreal(customDimensions.longRunningThresholdInMs),\n            toreal(totimespan(customDimensions.longRunningThreshold))/10000)\n    | where _executionTimeInMS > _longRunningThresholdInMS\n    | project timestamp, message, [\"alObjectType\"] = toupper(customDimensions.alObjectType), customDimensions          \n);\nlet _thresholdInMs = toscalar (\n    _appInsightsTraces\n    | limit 1\n    | extend _executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000\n    | extend _longRunningThresholdInMS = iff(toreal(customDimensions.longRunningThresholdInMs) > 0, \n            toreal(customDimensions.longRunningThresholdInMs),\n            toreal(totimespan(customDimensions.longRunningThreshold))/10000)\n    | project tostring(toint(_longRunningThresholdInMS))\n);\nlet _longPages = toscalar (\n    _appInsightsTraces\n    | where alObjectType == \"PAGE\" \n    | count \n);\nlet _longCodeunits = toscalar (\n    _appInsightsTraces\n    | where alObjectType == \"CODEUNIT\" \n    | count \n);\nlet _longReports = toscalar (\n    _appInsightsTraces\n    | where alObjectType == \"REPORT\" \n    | count \n);\nlet _longQueries = toscalar (\n    _appInsightsTraces\n    | where alObjectType == \"QUERY\" \n    | count \n);\nlet _longXMLPorts = toscalar (\n    _appInsightsTraces\n    | where alObjectType == \"XMLPORT\" \n    | count \n);\nlet _longTables = toscalar (\n    _appInsightsTraces\n    | where alObjectType == \"TABLE\" \n    | count \n);\nlet _longPageExtensions = toscalar (\n    _appInsightsTraces\n    | where alObjectType == \"PAGEEXTENSION\" \n    | count \n);\nlet _longTableExtensions = toscalar (\n    _appInsightsTraces\n    | where alObjectType == \"TABLEEXTENSION\" \n    | count \n);\nlet _longReportExtensions = toscalar (\n    _appInsightsTraces\n    | where alObjectType == \"REPORTEXTENSION\" \n    | count \n);\n_appInsightsTraces\n| limit 1\n| extend Md = strcat('|', _longTables, \n                     '|', _longPages, \n                     '|', _longCodeunits, \n                     '|', _longReports, \n                     '|', _longXMLPorts,\n                     '|', _longQueries,\n                     '|', _longTableExtensions,\n                     '|', _longPageExtensions,\n                     '|', _longReportExtensions)\n| summarize Md = make_list(Md)\n| extend Md = strcat_array(Md, ' \\n')\n| extend Md = strcat('| Table | Page | Codeunit | Report | XMLport | Query | Table Extension | Page Extension | Report Extension |\\n|'\n                      '-------|-------|-------|-------|-------|-------|-------|-------|-------|\\n ', Md)",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "d896aaa6-beca-4d1c-af8f-e8e6024d0391",
            "title": "Job Queue Overview",
            "visualType": "markdown",
            "pageId": "f5885bb6-1db1-42c3-888b-fa857a7b39fd",
            "layout": {
                "x": 0,
                "y": 9,
                "width": 10,
                "height": 4
            },
            "visualOptions": {
                "xColumn": null
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _appInsightsTraces = materialize  (\n    traces\n    | where timestamp between (_startTime .. _endTime)\n    | where customDimensions.environmentType has_any (_EnvironmentType)\n    | where customDimensions.environmentName has_any (_environmentName)\n    | where customDimensions.eventId in (\"AL0000E24\", \"AL0000E25\", \"AL0000E26\")\n);\nlet _startedEntries = toscalar (\n    _appInsightsTraces\n    | where customDimensions.eventId == \"AL0000E25\"\n    | count\n);\nlet _successEntries = toscalar (\n    _appInsightsTraces\n    | where customDimensions.eventId == \"AL0000E26\"\n    | where customDimensions.alJobQueueResult == 'Success'\n    | count\n);\nlet _failedEntries = toscalar (\n    _appInsightsTraces\n    | where customDimensions.eventId == \"AL0000E26\"\n    | where customDimensions.alJobQueueResult == 'Fail'\n    | count\n);\nlet _enqueuedEntries = toscalar (\n    _appInsightsTraces\n    | where customDimensions.eventId == \"AL0000E24\"\n    | count\n);\nlet _recurringEntries = toscalar (\n     _appInsightsTraces\n    | where customDimensions.eventId == \"AL0000E24\"\n    | where tostring(customDimensions.alJobQueueIsRecurring) == 'Yes'\n    | count \n);\n_appInsightsTraces\n| distinct tostring(customDimensions.alJobQueueId)\n| limit 1\n| extend Md = strcat('|', _startedEntries, \n                     '|', _successEntries, \n                     '|',  _failedEntries,\n                     '|', (_startedEntries - _successEntries - _failedEntries), \n                     '|', (_enqueuedEntries - _recurringEntries), \n                     '|', _recurringEntries)\n| summarize Md = make_list(Md)\n| extend Md = strcat_array(Md, ' \\n')\n| extend Md = strcat('| Started | Successful | Failed | In Progress | Enqueued | Recurring|\\n|'\n                      '-------|-------|-------|-------|-------|-------|\\n ', Md)",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "19c1b81f-7fc8-4925-b18d-7b3765b21102",
            "title": "Lock Timeouts (5 min buckets)",
            "visualType": "column",
            "pageId": "5464aca4-0e79-4cc9-acaf-5bfcba11b235",
            "layout": {
                "x": 0,
                "y": 17,
                "width": 24,
                "height": 9
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": false,
                "xColumnTitle": "",
                "xColumn": "timestamp",
                "yColumns": null,
                "seriesColumns": null,
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where timestamp between (_startTime .. _endTime)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.eventId == 'RT0012'\n| extend sqlStatement = replace_string(tostring(customDimensions.sqlStatement),'XYZ','')\n    , stackTrace = replace_string(tostring(customDimensions.alStackTrace),'XYZ','')\n    , alObjectName = replace_string(tostring(customDimensions.alObjectName),'XYZ','')\n    , extensionName = replace_string(tostring(customDimensions.extensionName),'XYZ','')\n| extend\n   alObjectId = customDimensions.alObjectId\n  , companyName = tostring(customDimensions.companyName)\n  , clientType = tostring(customDimensions.clientType)\n  , alObjectType = customDimensions.alObjectType\n  , extensionVersion = customDimensions.extensionVersion\n  , extensionInfo = strcat(extensionName, ' ', customDimensions.extensionVersion, \n    (iff(isnotempty(tostring(customDimensions.extensionPublisher)), strcat(' - ', tostring(customDimensions.extensionPublisher)), '')))\n  , extensionId = customDimensions.extensionId\n  , sqlServerSessionId = customDimensions.sqlServerSessionId\n  , snapshotId = tostring(customDimensions.snapshotId)\n  , timestamp\n| summarize count() by bin(timestamp,5min)\n",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "70559276-6c87-453d-a9f8-e7e181115fbe",
            "title": "Top 20 SQL Queries that holds Database Locks",
            "visualType": "table",
            "pageId": "5464aca4-0e79-4cc9-acaf-5bfcba11b235",
            "layout": {
                "x": 0,
                "y": 45,
                "width": 24,
                "height": 7
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "colorRules": [],
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _searchSting = 'AL CallStack: ';\ntraces\n| where timestamp  between (_startTime .. _endTime)\n| where customDimensions.eventId == 'RT0005'\n| where customDimensions.sqlStatement has 'UPDLOCK'\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| extend sqlStatement = replace_string(tostring(customDimensions.sqlStatement),'XYZ','')\n    , stackTrace = replace_string(tostring(customDimensions.alStackTrace),'XYZ','')\n    , alObjectName = replace_string(tostring(customDimensions.alObjectName),'XYZ','')\n    , extensionName = replace_string(tostring(customDimensions.extensionName),'XYZ','')\n| parse kind=regex sqlStatement with selectPart: string \"FROM \\\"SQLDATABASE\\\".dbo.\\\"CURRENTCOMPANY\\\\$\" tablenamewithjoins: string \"\\\\$\" space: string\n| parse kind=regex tablenamewithjoins with tablenaamenojoins: string \"\\\\$\" newspace : string \n| parse kind=regex tablenaamenojoins with space2: string \"\\\\$\" onlytablenamenojoins: string \n//| parse kind=regex tablenamewithjoins with stringtoeliminate: string \"\\\\$\" tablenamewithoutjoins: string\n| extend tablename = case(\n    tablenamewithjoins contains \"$\", onlytablenamenojoins\n    , tablenamewithjoins \n)\n| project timestamp\n, [\"Client Type\"] = tostring(customDimensions.clientType)\n, [\"Duration (sec)\"] = toreal(totimespan(customDimensions.executionTime))/10000000 \n, [\"Object Information\"] = strcat(customDimensions.alObjectType, ' ', customDimensions.alObjectId, ' ', \n    alObjectName)\n, [\"Stack Trace\"] = substring(stackTrace, \n                            indexof(customDimensions.alStackTrace, _searchSting) + strlen(_searchSting))\n, [\"Extension Information\"] = strcat(extensionName, ' ' , customDimensions.extensionVersion, ' - ',\n    customDimensions.extensionPublisher)\n, Table = tablename\n| summarize [\"Count\"] = count(), [\"Avg (sec)\"] = round(avg(['Duration (sec)']),0) by ['Stack Trace'], ['Client Type'], ['Extension Information'], ['Object Information'], Table\n| top 20 by ['Avg (sec)'] * Count desc",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "7b5f9890-013d-41af-a076-328230096649",
            "title": "Job Queue Status",
            "visualType": "column",
            "pageId": "60f8536a-1e14-47a9-80d8-f2a08e0e9fc7",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 24,
                "height": 9
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": false,
                "xColumnTitle": "",
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _appInsightsTraces = materialize (\n    traces\n    | where timestamp  between (_startTime .. _endTime)\n    | where customDimensions.environmentType has_any (_EnvironmentType)\n    | where customDimensions.environmentName has_any (_environmentName)\n);\nlet _enqueuedJQ = materialize (\n    _appInsightsTraces\n    | where customDimensions.eventId == \"AL0000E24\"\n    | summarize [\"Enqueued Count\"] = count() by bin(timestamp, 30min) \n);\nlet _startedJQ = materialize (\n    _appInsightsTraces\n    | where customDimensions.eventId == \"AL0000E25\"\n    | summarize [\"Started Count\"] = count() by bin(timestamp, 30min)\n);\nlet _finishedJQ = materialize (\n    _appInsightsTraces\n    | where customDimensions.eventId == \"AL0000E26\"\n    | summarize [\"Finished Count\"] = count() by bin(timestamp, 30min)\n);\nlet _failedToBeEnqueuedJQ = materialize (\n    _appInsightsTraces\n    | where customDimensions.eventId == \"AL0000FNY\"\n    | summarize [\"Failed to be enqueued Count\"] = count() by bin(timestamp, 30min)\n);\nlet _failedCanBeRetriedJQ = materialize (\n    _appInsightsTraces\n    | where customDimensions.eventId == \"AL0000HE7\"\n    | summarize [\"Failed Can Be Retried Count\"] = count() by bin(timestamp, 30min)\n);\nlet _RescheduledOnLoginJQ = materialize (\n    _appInsightsTraces\n    | where customDimensions.eventId == \"AL0000I49\"\n    | summarize [\"Rescheduled On Login Count\"] = count() by bin(timestamp, 30min)\n);\nlet _RunOnceByUserJQ = materialize (\n    _appInsightsTraces\n    | where customDimensions.eventId == \"AL0000FMG\"\n    | summarize [\"Run Once By User Count\"] = count() by bin(timestamp, 30min)\n);\nlet _FailedAndStoppedJQ = materialize (\n    _appInsightsTraces\n    | where customDimensions.eventId == \"AL0000JRG\"\n    | summarize [\"Failed And Stopped Count\"] = count() by bin(timestamp, 30min)\n);\n_startedJQ\n| join kind=leftouter ( _finishedJQ) on timestamp\n| join kind=leftouter (_enqueuedJQ) on timestamp\n| join kind=leftouter (_failedToBeEnqueuedJQ) on timestamp\n| join kind=leftouter (_failedCanBeRetriedJQ) on timestamp\n| join kind=leftouter (_RescheduledOnLoginJQ) on timestamp\n| join kind=leftouter (_RunOnceByUserJQ) on timestamp\n| join kind=leftouter (_FailedAndStoppedJQ) on timestamp\n| project-away timestamp1, timestamp2, timestamp3, timestamp4, timestamp5, timestamp6, timestamp7\n| sort by timestamp asc \n",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "1a76223b-a537-4b1e-9c73-5be23636e06c",
            "title": "Job Queue Entries",
            "visualType": "table",
            "pageId": "60f8536a-1e14-47a9-80d8-f2a08e0e9fc7",
            "layout": {
                "x": 0,
                "y": 9,
                "width": 24,
                "height": 9
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRulesDisabled": false,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "colorRules": [
                    {
                        "id": "3b9e6177-c18e-455f-8eb1-023748b11cbf",
                        "ruleType": "colorByCondition",
                        "applyToColumn": "State",
                        "hideText": false,
                        "applyTo": "cells",
                        "conditions": [
                            {
                                "operator": "==",
                                "column": "State",
                                "values": [
                                    "Started"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "yellow",
                        "tag": "",
                        "icon": null,
                        "ruleName": "State = Started"
                    },
                    {
                        "id": "23a81bd6-7fc9-4720-a830-95a74ede0f5b",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "cells",
                        "conditions": [
                            {
                                "operator": "==",
                                "column": "State",
                                "values": [
                                    "Finished"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "green",
                        "tag": "",
                        "icon": null,
                        "ruleName": "State = Finished"
                    },
                    {
                        "id": "4ceeab8c-870f-4c07-92d9-f86681efd0e6",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "cells",
                        "conditions": [
                            {
                                "operator": "==",
                                "column": "State",
                                "values": [
                                    "Failed"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "red",
                        "tag": "",
                        "icon": null,
                        "ruleName": "State = Failed"
                    },
                    {
                        "id": "b4059a58-dfcc-4b25-b3c6-4398ea4469c5",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "cells",
                        "conditions": [
                            {
                                "operator": "==",
                                "column": "State",
                                "values": [
                                    "Enqueued"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "blue",
                        "tag": "",
                        "icon": null,
                        "ruleName": "State = Enqueued"
                    }
                ],
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _searchString = 'Job queue entry';\ntraces\n| where timestamp  between (_startTime .. _endTime)\n| where customDimensions.eventId in (\"AL0000E24\", \"AL0000E25\", \"AL0000E26\",\"AL0000FNY\",\"AL0000HE7\",\"AL0000I49\",\"AL0000FMG\",\"AL0000FNY\")\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| extend _stateDescription = substring(message, strlen(_searchString), indexof(message, ':')-strlen(_searchString))\n| extend alObjectName = trim('XYZ',tostring(customDimensions.alJobQueueObjectName))\n| project  \n    [\"Entry Id\"] = tostring(customDimensions.alJobQueueId),\n    timestamp,\n    [\"Environment Type\"] = tostring(customDimensions.environmentType),\n    [\"State\"] = strcat(toupper(substring(_stateDescription, 1, 1)), substring(_stateDescription, 2)),\n    [\"Status\"] = customDimensions.alJobQueueStatus, \n    [\"Object Id\"]  = customDimensions.alJobQueueObjectId,\n    [\"Object Type\"] = customDimensions.alJobQueueObjectType,\n    [\"Object Name\"]  = alObjectName,\n    [\"Recurring\"] = customDimensions.alJobQueueIsRecurring\n| sort by timestamp asc\n\n\n\n\n\n",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "df42d57c-420e-4145-a824-27d34114c534",
            "title": "API Usage (in ms) [Limited to past 24 hrs.]",
            "visualType": "table",
            "pageId": "9bd8a199-ba41-40fa-87b8-f9833a040b03",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 24,
                "height": 8
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRulesDisabled": false,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "colorRules": [
                    {
                        "id": "8ef4ce1b-e009-4ad7-939e-7cd290cfbf1d",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "cells",
                        "conditions": [
                            {
                                "operator": ">",
                                "column": "Avg. Time",
                                "values": [
                                    "5000"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "red",
                        "tag": "",
                        "icon": null,
                        "ruleName": "Avg. Time > 5000"
                    },
                    {
                        "id": "0b1b883a-6153-437d-bc75-e7fbbceb0f6b",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "cells",
                        "conditions": [
                            {
                                "operator": ">",
                                "column": "Avg. Time",
                                "values": [
                                    "750"
                                ]
                            },
                            {
                                "operator": "<=",
                                "column": "Avg. Time",
                                "values": [
                                    "5000"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "yellow",
                        "tag": "",
                        "icon": null,
                        "ruleName": "Avg. Time > 750"
                    }
                ],
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _maxDuration = 24h;\nlet _currentDuration = _endTime - _startTime;\nlet _duration = iff(_currentDuration > _maxDuration , _maxDuration, _currentDuration);\ntraces \n| where timestamp >= ago(_duration)\n| where customDimensions.eventId == \"RT0008\"\n| where toupper(customDimensions.category) == \"API\"\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| extend _endpoint = strcat(\"WS/\", customDimensions.alObjectType,'/', customDimensions.alObjectId, '(',tostring(customDimensions.endpoint),')')\n| extend _processingTimeMS = toreal(totimespan(customDimensions.serverExecutionTime))/10000\n| project [\"Endpoint\"] = _endpoint, \n        [\"Object Type\"] = tostring(customDimensions.alObjectType), \n        [\"Object No.\"] = tostring(customDimensions.alObjectId), \n        _processingTimeMS, \n        [\"Environment Type\"] = tostring(customDimensions.environmentType)\n| summarize count(), [\"Avg. Time\"] = round(avg(_processingTimeMS),2), [\"Total Time\"] = round(sum(_processingTimeMS),2) by [\"Endpoint\"], [\"Object Type\"], [\"Object No.\"], [\"Environment Type\"]\n| sort by count_\n",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "99ea2a24-8370-4ef6-b036-d04eb3e955dd",
            "title": "Top 20 API Calls by Duration (in ms)",
            "visualType": "pie",
            "pageId": "9bd8a199-ba41-40fa-87b8-f9833a040b03",
            "layout": {
                "x": 0,
                "y": 8,
                "width": 11,
                "height": 9
            },
            "visualOptions": {
                "hideLegend": false,
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "labelDisabled": true,
                "pie__label": [
                    "name",
                    "percentage"
                ],
                "tooltipDisabled": false,
                "pie__tooltip": [
                    "name",
                    "percentage",
                    "value"
                ],
                "pie__orderBy": "size",
                "pie__kind": "pie",
                "pie__topNSlices": null,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _maxDuration = 24h;\nlet _maxCount = 20;\nlet _currentDuration = _endTime - _startTime;\nlet _duration = iff(_currentDuration > _maxDuration , _maxDuration, _currentDuration);\ntraces \n| where timestamp >= ago(_duration)\n| where customDimensions.eventId == \"RT0008\"\n| where toupper(customDimensions.category) == \"API\"\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| extend _endpoint = strcat(\"WS/\", customDimensions.alObjectType,'/', customDimensions.alObjectId, '(',tostring(customDimensions.endpoint),')')\n| extend _processingTimeMS = toreal(totimespan(customDimensions.serverExecutionTime))/10000\n| summarize [\"API Duration\"] = round(sum(_processingTimeMS),2) by [\"Endpoint\"] = _endpoint\n| sort by [\"API Duration\"] desc \n| limit _maxCount",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "0da4abc2-d47b-4c78-9d4c-b0bc195a8867",
            "title": "Top 20 API Calls by Volume",
            "visualType": "pie",
            "pageId": "9bd8a199-ba41-40fa-87b8-f9833a040b03",
            "layout": {
                "x": 11,
                "y": 8,
                "width": 13,
                "height": 9
            },
            "visualOptions": {
                "hideLegend": false,
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "labelDisabled": true,
                "pie__label": [
                    "name",
                    "percentage"
                ],
                "tooltipDisabled": false,
                "pie__tooltip": [
                    "name",
                    "percentage",
                    "value"
                ],
                "pie__orderBy": "size",
                "pie__kind": "pie",
                "pie__topNSlices": null,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _maxDuration = 24h;\nlet _maxCount = 20;\nlet _currentDuration = _endTime - _startTime;\nlet _duration = iff(_currentDuration > _maxDuration , _maxDuration, _currentDuration);\ntraces \n| where timestamp >= ago(_duration)\n| where customDimensions.eventId == \"RT0008\"\n| where toupper(customDimensions.category) == \"API\"\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| extend _endpoint = strcat(\"WS/\", customDimensions.alObjectType,'/', customDimensions.alObjectId, '(',tostring(customDimensions.endpoint),')')\n| extend _processingTimeMS = toreal(totimespan(customDimensions.serverExecutionTime))/10000\n| summarize [\"SOAP Calls\"] = count() by [\"Endpoint\"] = _endpoint\n| sort by [\"SOAP Calls\"] desc \n| limit _maxCount\n",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "bb30a128-d743-4e4f-b3f3-17f2b1cc321b",
            "title": "Top 20 OData Calls by Duration (in ms)",
            "visualType": "pie",
            "pageId": "fd2a227c-d2e0-49f4-a2ad-b21b9a1dd382",
            "layout": {
                "x": 0,
                "y": 7,
                "width": 11,
                "height": 10
            },
            "visualOptions": {
                "hideLegend": false,
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "labelDisabled": false,
                "pie__label": [
                    "name",
                    "percentage"
                ],
                "tooltipDisabled": false,
                "pie__tooltip": [
                    "name",
                    "percentage",
                    "value"
                ],
                "pie__orderBy": "size",
                "pie__kind": "pie",
                "pie__topNSlices": null,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _maxDuration = 24h;\nlet _maxCount = 20;\nlet _currentDuration = _endTime - _startTime;\nlet _duration = iff(_currentDuration > _maxDuration , _maxDuration, _currentDuration);\ntraces \n| where timestamp >= ago(_duration)\n| where customDimensions.eventId == \"RT0008\"\n| where toupper(customDimensions.category) contains \"ODATA\"\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| extend _endpoint = strcat(\"WS/\", customDimensions.alObjectType,'/', customDimensions.alObjectId, '(',tostring(customDimensions.endpoint),')')\n| extend _processingTimeMS = toreal(totimespan(customDimensions.serverExecutionTime))/10000\n| summarize [\"OData Duration\"] = round(sum(_processingTimeMS),2) by [\"Endpoint\"] = _endpoint\n| sort by [\"OData Duration\"] desc \n| limit _maxCount\n",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "61e45fe7-647d-46c5-9640-9f28844eca31",
            "title": "Top 20 OData Calls by Volume",
            "visualType": "pie",
            "pageId": "fd2a227c-d2e0-49f4-a2ad-b21b9a1dd382",
            "layout": {
                "x": 11,
                "y": 7,
                "width": 13,
                "height": 10
            },
            "visualOptions": {
                "hideLegend": false,
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "labelDisabled": false,
                "pie__label": [
                    "name",
                    "percentage"
                ],
                "tooltipDisabled": false,
                "pie__tooltip": [
                    "name",
                    "percentage",
                    "value"
                ],
                "pie__orderBy": "size",
                "pie__kind": "pie",
                "pie__topNSlices": null,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _maxDuration = 24h;\nlet _maxCount = 20;\nlet _currentDuration = _endTime - _startTime;\nlet _duration = iff(_currentDuration > _maxDuration , _maxDuration, _currentDuration);\ntraces \n| where timestamp >= ago(_duration)\n| where customDimensions.eventId == \"RT0008\"\n| where toupper(customDimensions.category) contains \"ODATA\"\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| extend _endpoint = strcat(\"WS/\", customDimensions.alObjectType,'/', customDimensions.alObjectId, '(',tostring(customDimensions.endpoint),')')\n| extend _processingTimeMS = toreal(totimespan(customDimensions.serverExecutionTime))/10000\n| summarize [\"SOAP Calls\"] = count() by [\"Endpoint\"] = _endpoint\n| sort by [\"SOAP Calls\"] desc \n| limit _maxCount",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "f4dfb31c-fe79-4bda-a3b8-bfbd1e9ab69e",
            "title": "Demo Dashboard",
            "visualType": "markdownCard",
            "pageId": "f5885bb6-1db1-42c3-888b-fa857a7b39fd",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 6,
                "height": 4
            },
            "visualOptions": {},
            "query": {
                "kind": "inline",
                "text": "![base64](data:image/png;base64,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)\r\n",
                "usedVariables": []
            }
        },
        {
            "id": "e28cece8-7858-427e-a00d-001cb911edf5",
            "title": "Top 20 Page Usage",
            "visualType": "pie",
            "pageId": "e6b3a051-ba9e-4db5-912d-c63987fd1fb8",
            "layout": {
                "x": 0,
                "y": 21,
                "width": 12,
                "height": 12
            },
            "visualOptions": {
                "hideLegend": false,
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "labelDisabled": false,
                "pie__label": [
                    "name",
                    "percentage"
                ],
                "tooltipDisabled": false,
                "pie__tooltip": [
                    "name",
                    "percentage",
                    "value"
                ],
                "pie__orderBy": "size",
                "pie__kind": "pie",
                "pie__topNSlices": null,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _maxCount = 20;\nlet _searchType = toupper('PAGE');\ntraces\n| where timestamp  between (_startTime .. _endTime)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.eventId == 'RT0018'\n| where toupper(customDimensions.alObjectType) == _searchType\n| extend extensionName = trim('XYZ', tostring(customDimensions.extensionName))\n  , alObjectName = trim('XYZ',tostring(customDimensions.alObjectName))\n  , alMethod = trim('XYZ',tostring( customDimensions.alMethod)) \n| extend alObjectInfo = strcat(customDimensions.alObjectType, ' ', customDimensions.alObjectId, ' - ', alObjectName)\n, executionTime = customDimensions.executionTime\n, executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000 //the datatype for executionTime is timespan \n| extend executionTimeInSec = executionTimeInMS / 1000\n| summarize count(), sum( executionTimeInSec ), avg( executionTimeInSec ) by alObjectInfo\n| order by avg_executionTimeInSec desc \n| project [\"AL Object Information\"] = alObjectInfo,\n    [\"Ocurrance\"] = count_,\n    [\"Avg Duration\"] = round(avg_executionTimeInSec, 2),\n    [\"Total Duration\"] = round(sum_executionTimeInSec,2)\n| sort by Ocurrance desc\n| limit _maxCount",
                "usedVariables": [
                    "_endTime",
                    "_environmentName",
                    "_publisher",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "47c5e32b-b2eb-4dd0-b268-4ce48ecbc6a7",
            "title": "Top 20 Report Usage",
            "visualType": "pie",
            "pageId": "e6b3a051-ba9e-4db5-912d-c63987fd1fb8",
            "layout": {
                "x": 12,
                "y": 21,
                "width": 12,
                "height": 12
            },
            "visualOptions": {
                "hideLegend": false,
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "labelDisabled": false,
                "pie__label": [
                    "name",
                    "percentage"
                ],
                "tooltipDisabled": false,
                "pie__tooltip": [
                    "name",
                    "percentage",
                    "value"
                ],
                "pie__orderBy": "size",
                "pie__kind": "pie",
                "pie__topNSlices": null,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _maxCount = 20;\nlet _searchType = toupper('REPORT');\ntraces\n| where timestamp  between (_startTime .. _endTime)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.eventId == 'RT0018'\n| where toupper(customDimensions.alObjectType) == _searchType\n| extend extensionName = trim('XYZ', tostring(customDimensions.extensionName))\n  , alObjectName = trim('XYZ',tostring(customDimensions.alObjectName))\n  , alMethod = trim('XYZ',tostring( customDimensions.alMethod)) \n| extend alObjectInfo = strcat(customDimensions.alObjectType, ' ', customDimensions.alObjectId, ' - ', alObjectName)\n, executionTime = customDimensions.executionTime\n, executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000 //the datatype for executionTime is timespan \n| extend executionTimeInSec = executionTimeInMS / 1000\n| summarize count(), sum( executionTimeInSec ), avg( executionTimeInSec ) by alObjectInfo\n| order by avg_executionTimeInSec desc \n| project [\"AL Object Information\"] = alObjectInfo,\n    [\"Ocurrance\"] = count_,\n    [\"Avg Duration\"] = round(avg_executionTimeInSec, 2),\n    [\"Total Duration\"] = round(sum_executionTimeInSec,2)\n| sort by Ocurrance desc\n| limit _maxCount\n",
                "usedVariables": [
                    "_endTime",
                    "_environmentName",
                    "_publisher",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "29f6415b-3a6f-4452-a3b5-827a8cff65d3",
            "title": "",
            "visualType": "markdownCard",
            "pageId": "f5885bb6-1db1-42c3-888b-fa857a7b39fd",
            "layout": {
                "x": 6,
                "y": 0,
                "width": 4,
                "height": 4
            },
            "visualOptions": {},
            "query": {
                "kind": "inline",
                "text": "![Image alternate text](https://nipunhospital.com/assets/img/icon/loader.gif)",
                "usedVariables": []
            }
        },
        {
            "id": "e70239e5-f63c-4ebe-a4c7-e47c79d57293",
            "title": "Job Queue Execution Statistics",
            "visualType": "table",
            "pageId": "60f8536a-1e14-47a9-80d8-f2a08e0e9fc7",
            "layout": {
                "x": 0,
                "y": 18,
                "width": 24,
                "height": 9
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRulesDisabled": false,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "colorRules": [
                    {
                        "id": "b3a85703-bc48-434f-9056-e7620d61a2d0",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "cells",
                        "conditions": [
                            {
                                "operator": ">",
                                "column": "Avg. Time",
                                "values": [
                                    "5000"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "red",
                        "tag": "",
                        "icon": null,
                        "ruleName": "Avg. Time > 5000"
                    },
                    {
                        "id": "a6c2202f-6c70-4e78-ad27-98ca48ebb95a",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "cells",
                        "conditions": [
                            {
                                "operator": ">",
                                "column": "Avg. Time",
                                "values": [
                                    "750"
                                ]
                            },
                            {
                                "values": [
                                    "5000"
                                ],
                                "operator": "<=",
                                "column": "Avg. Time"
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "yellow",
                        "tag": "",
                        "icon": null,
                        "ruleName": "Avg. Time > 750"
                    }
                ],
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where timestamp between (_startTime .. _endTime)// adjust as needed\n| where customDimensions.eventId in ('AL0000E24', 'AL0000E25', 'AL0000E26')\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| extend alJobQueueObjectName = trim('XYZ',tostring(customDimensions.alJobQueueObjectName))\n| extend alJobQueueObjectId = toint(customDimensions.alJobQueueObjectId)\n    , alJobQueueObjectType = tostring(customDimensions.alJobQueueObjectType)\n    , alJobQueueExecutionTimeInSec = toreal(customDimensions.alJobQueueExecutionTimeInMs) /10000\n| summarize \n    mintime = toreal(totimespan(min(alJobQueueExecutionTimeInSec))),\n    avgTime = toreal(totimespan(avg(alJobQueueExecutionTimeInSec))),\n    maxTime = toreal(totimespan(max(alJobQueueExecutionTimeInSec))),\n    ExecutionCount = toint(count())\n    by\n    alJobQueueObjectId,\n    alJobQueueObjectType,\n    alJobQueueObjectName\n| order by maxTime\n| project\n    [\"Job Queue Object ID\"] = alJobQueueObjectId,\n    [\"Job Queue Object Type\"] = alJobQueueObjectType,\n    [\"Job Queue Object Name\"] = alJobQueueObjectName,\n    [\"Execution Count\"] = toint(ExecutionCount),\n    [\"Min. Time (sec)\"] = mintime,\n    [\"Avg. Time (sec)\"] = avgTime,\n    [\"Max. Time (sec)\"] = maxTime\n| sort by ['Execution Count'] desc",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "1a631a53-08dc-4f8b-8d7d-a86c383b19df",
            "title": "Web Service Calls Overview for past 24 hrs.",
            "visualType": "markdown",
            "pageId": "f5885bb6-1db1-42c3-888b-fa857a7b39fd",
            "layout": {
                "x": 10,
                "y": 9,
                "width": 14,
                "height": 4
            },
            "visualOptions": {
                "xColumn": null
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _limit = 4;\nlet _appInsightsTraces = materialize  (\n    traces\n    | where timestamp  between (_startTime .. _endTime)\n    | where customDimensions.environmentType has_any (_EnvironmentType)\n    | where customDimensions.environmentName has_any (_environmentName)\n    | where customDimensions.eventId == \"RT0008\"\n    | project timestamp, message, customDimensions\n);\nlet _soapThreshold = toscalar(\n    _appInsightsTraces\n    | where toupper(customDimensions.category) == \"SOAP\"\n    | extend _processingTimeMS = toreal(totimespan(customDimensions.serverExecutionTime))/10000\n    | summarize round(avg(_processingTimeMS),2)\n);\nlet _soapCalls = toscalar( \n    _appInsightsTraces\n    | where toupper(customDimensions.category) == \"SOAP\"\n    | count\n);\nlet _longRunningSoapCalls = toscalar(\n    _appInsightsTraces\n    | where toupper(customDimensions.category) == \"SOAP\"\n    | extend _processingTimeMS = toreal(totimespan(customDimensions.serverExecutionTime))/10000\n    | where _processingTimeMS > (_soapThreshold * _limit)\n    | count\n);\nlet _odataThreshold = toscalar(\n    _appInsightsTraces\n    | where toupper(customDimensions.category) contains \"ODATA\"\n    | extend _processingTimeMS = toreal(totimespan(customDimensions.serverExecutionTime))/10000\n    | summarize round(avg(_processingTimeMS),2)\n);\nlet _odataCalls = toscalar(\n    _appInsightsTraces\n    | where toupper(customDimensions.category) contains \"ODATA\"\n    | count\n);\nlet _longRunningOdataCalls = toscalar(\n    _appInsightsTraces\n    | where toupper(customDimensions.category) == \"ODATA\"\n    | extend _processingTimeMS = toreal(totimespan(customDimensions.serverExecutionTime))/10000\n    | where _processingTimeMS > (_odataThreshold * _limit)\n    | count\n);\nlet _apiThreshold = toscalar(\n    _appInsightsTraces\n    | where toupper(customDimensions.category) == \"API\"\n    | extend _processingTimeMS = toreal(totimespan(customDimensions.serverExecutionTime))/10000\n    | summarize round(avg(_processingTimeMS),2)\n);\nlet _apiCalls = toscalar(\n    _appInsightsTraces\n    | where toupper(customDimensions.category) == \"API\"\n    | count\n);\nlet _longRunningApiCalls = toscalar(\n    _appInsightsTraces\n    | where toupper(customDimensions.category) == \"API\"\n    | extend _processingTimeMS = toreal(totimespan(customDimensions.serverExecutionTime))/10000\n    | where _processingTimeMS > (_apiThreshold * _limit)\n    | count\n);\n_appInsightsTraces\n| limit 1\n| project strcat(\"|\",\"SOAP Calls\", \n                 \"|\", \"Average\", \n                 \"|\", \"Long Running\", \n                 \"|\", \" \", \n                 \"|\", \"OData Calls\", \n                 \"|\", \"Average\", \n                 \"|\", \"Long Running\", \n                 \"|\", \" \", \n                 \"|\", \"API Calls\", \n                 \"|\", \"Average\", \n                 \"|\", \"Long Running|\\n\",\n                \"|------------------|:---------------|:---------------|:---------------|:---------------|:---------------|:---------------|:---------------|:---------------|:---------------|:---------------|\\n\",\n                \"|\", _soapCalls, \n                \"|\", _soapThreshold, \n                \"|\", _longRunningSoapCalls, \n                \"|\", \"\", \n                \"|\", _odataCalls, \n                \"|\", _odataThreshold, \n                \"|\", _longRunningOdataCalls, \n                \"|\", \"\",\n                \"|\", _apiCalls, \n                \"|\", _apiThreshold, \n                \"|\", _longRunningApiCalls, \"\\n\",\n                \"- **Long Running calls are those that are greater than 4x the Average**\")",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "e2225a85-d095-4232-994d-2692a8c20af4",
            "title": "Index Lifecycle",
            "visualType": "table",
            "pageId": "2951304b-62f3-4b7b-98c0-8c31c6d7ecd4",
            "layout": {
                "x": 0,
                "y": 33,
                "width": 24,
                "height": 8
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "colorRules": [],
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where customDimensions.eventId in ('LC0024', 'LC0025') \n| where timestamp  between(_startTime .. _endTime)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| project \n  timestamp\n, eventId = tostring(customDimensions.eventId)\n, environmentType = tostring(customDimensions.environmentType)\n, environmentName = tostring(customDimensions.environmentName)\n, alObjectId = toint(customDimensions.alObjectId)\n, alObjectName = replace_string(tostring(customDimensions.alObjectName),'XYZ','')\n, extensionId = tostring(customDimensions.extensionId)\n, extensionName = replace_string(tostring(customDimensions.extensionName),'XYZ','')\n, keyMaintainSIFTIndex = tostring(customDimensions.keyMaintainSIFTIndex)\n, keyMaintainSQLIndex = tostring(customDimensions.keyMaintainSQLIndex)\n, keyFields = tostring(customDimensions.keyFields)\n, keyName = replace_string(tostring(customDimensions.keyName),'XYZ','')\n, message",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "1a895ef5-49ca-4092-98b1-3b2224aff884",
            "title": "Custom Object Duration (ms) > 50000",
            "visualType": "timechart",
            "pageId": "a766ad41-9070-40d7-8dd7-70676512faaa",
            "layout": {
                "x": 0,
                "y": 11,
                "width": 24,
                "height": 11
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "Avg. Time",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": [
                            {
                                "id": "d72872ea-0a69-4937-a708-c19244bf91d6",
                                "value": null
                            }
                        ]
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": false,
                "xColumnTitle": "AL Object Name",
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": [
                    "AL Oject Name"
                ],
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where timestamp between (_startTime .. _endTime)\n| where customDimensions.eventId == 'RT0018' \n| where customDimensions.companyName <> ''\n| where customDimensions.alObjectId has_any (_objectID)  \n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| project timestamp, customDimensions\n| extend executionTimeInMS = toreal(totimespan(customDimensions.executionTime)) / 10000\n| extend [\"AL Object ID\"] = tostring(customDimensions.alObjectId)\n| extend [\"AL Oject Name\"] = replace_string(tostring(customDimensions.alObjectName),'XYZ','')\n| summarize [\"Avg. Exec. Time\"] = toint(avg(executionTimeInMS)) by bin(timestamp, 30min), [\"AL Object ID\"], ['AL Oject Name']",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_objectID",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "dd772426-c109-465a-9231-826b82fbc4f1",
            "title": "Page View Count",
            "visualType": "table",
            "pageId": "41c2b22e-69f3-4513-9227-26c3c42e9a08",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 24,
                "height": 11
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "colorRules": [],
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "pageViews\n| where customDimensions.alObjectId > 0\n| where timestamp between (_startTime .. _endTime)\n| where customDimensions.environmentName has_any (_environmentName)\n| extend alObjectName = replace_string(tostring(customDimensions.alObjectName),'XYZ','')\n| extend alObjectId = tostring(customDimensions.alObjectId)\n    , clientType = tostring(customDimensions.clientType)\n    , eventId = tostring(customDimensions.eventID) // note that this is different from other signal\n    , pageMode = tostring(customDimensions.pageMode)\n    , pageType = tostring(customDimensions.pageType)\n    , environmentName = tostring(customDimensions.environmentName)\n| summarize \n    ExecutionCount = count(),\n    minTime = toint(min(duration)),\n    avgTime = toint(avg(duration)),\n    maxTime = toint(max(duration))\n    by\n    alObjectId,\n    alObjectName,\n    eventId,\n//    pageMode,\n    pageType,\n    environmentName\n| project\n    [\"Environment Name\"] = environmentName,\n    [\"AL Object ID\"] = alObjectId,\n    [\"AL Object Name\"] = alObjectName,\n    [\"Page Type\"] = pageType,\n//    [\"Page Mode\"] = pageMode,\n    [\"Execution Count\"] = ExecutionCount,\n    [\"Min. Time\"] = minTime,\n    [\"Avg. Time\"] = avgTime,\n    [\"Max. Time\"] = maxTime\n| order by ['Execution Count'] desc ",
                "usedVariables": [
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "d1dd2755-b9b9-4d80-bc6f-560a20a489fb",
            "title": "Top 20 Codeunit Usage",
            "visualType": "pie",
            "pageId": "e6b3a051-ba9e-4db5-912d-c63987fd1fb8",
            "layout": {
                "x": 0,
                "y": 33,
                "width": 12,
                "height": 13
            },
            "visualOptions": {
                "hideLegend": false,
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "labelDisabled": false,
                "pie__label": [
                    "name",
                    "percentage"
                ],
                "tooltipDisabled": false,
                "pie__tooltip": [
                    "name",
                    "percentage",
                    "value"
                ],
                "pie__orderBy": "size",
                "pie__kind": "pie",
                "pie__topNSlices": null,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _maxCount = 20;\nlet _searchType = toupper('CODEUNIT');\ntraces\n| where timestamp  between (_startTime .. _endTime)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.eventId == 'RT0018'\n| where toupper(customDimensions.alObjectType) == _searchType\n| extend extensionName = trim('XYZ', tostring(customDimensions.extensionName))\n  , alObjectName = trim('XYZ',tostring(customDimensions.alObjectName))\n  , alMethod = trim('XYZ',tostring( customDimensions.alMethod)) \n| extend alObjectInfo = strcat(customDimensions.alObjectType, ' ', customDimensions.alObjectId, ' - ', alObjectName)\n, executionTime = customDimensions.executionTime\n, executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000 //the datatype for executionTime is timespan \n| extend executionTimeInSec = executionTimeInMS / 1000\n| summarize count(), sum( executionTimeInSec ), avg( executionTimeInSec ) by alObjectInfo\n| order by avg_executionTimeInSec desc \n| project [\"AL Object Information\"] = alObjectInfo,\n    [\"Ocurrance\"] = count_,\n    [\"Avg Duration\"] = round(avg_executionTimeInSec, 2),\n    [\"Total Duration\"] = round(sum_executionTimeInSec,2)\n| sort by Ocurrance desc\n| limit _maxCount\n",
                "usedVariables": [
                    "_endTime",
                    "_environmentName",
                    "_publisher",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "bcdbed35-53ac-4227-9d48-707a43ff7a03",
            "title": "Top 20 Query Usage",
            "visualType": "pie",
            "pageId": "e6b3a051-ba9e-4db5-912d-c63987fd1fb8",
            "layout": {
                "x": 12,
                "y": 33,
                "width": 12,
                "height": 13
            },
            "visualOptions": {
                "hideLegend": false,
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "labelDisabled": false,
                "pie__label": [
                    "name",
                    "percentage"
                ],
                "tooltipDisabled": false,
                "pie__tooltip": [
                    "name",
                    "percentage",
                    "value"
                ],
                "pie__orderBy": "size",
                "pie__kind": "pie",
                "pie__topNSlices": null,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _maxCount = 20;\nlet _searchType = 'QUERY';\ntraces\n| where timestamp between (_startTime .. _endTime)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.eventId == 'RT0018'\n| where toupper(customDimensions.alObjectType) == _searchType\n| extend extensionName = trim('XYZ', tostring(customDimensions.extensionName))\n  , alObjectName = trim('XYZ',tostring(customDimensions.alObjectName))\n  , alMethod = trim('XYZ',tostring( customDimensions.alMethod)) \n| extend alObjectInfo = strcat(customDimensions.alObjectType, ' ', customDimensions.alObjectId, ' - ', alObjectName)\n, executionTime = customDimensions.executionTime\n, executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000 //the datatype for executionTime is timespan \n| extend executionTimeInSec = executionTimeInMS / 1000\n| summarize count(), sum( executionTimeInSec ), avg( executionTimeInSec ) by alObjectInfo\n| order by avg_executionTimeInSec desc \n| project [\"AL Object Information\"] = alObjectInfo,\n    [\"Ocurrance\"] = count_,\n    [\"Avg Duration\"] = round(avg_executionTimeInSec, 2),\n    [\"Total Duration\"] = round(sum_executionTimeInSec,2)\n| sort by Ocurrance desc\n| limit _maxCount",
                "usedVariables": [
                    "_endTime",
                    "_environmentName",
                    "_publisher",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "93435685-c962-420c-8e59-e73714c43185",
            "title": "Errors Dialog",
            "visualType": "table",
            "pageId": "a766ad41-9070-40d7-8dd7-70676512faaa",
            "layout": {
                "x": 0,
                "y": 5,
                "width": 24,
                "height": 6
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "colorRules": [],
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where timestamp between (_startTime .. _endTime)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions has 'CL0002'\n| where customDimensions.eventId == 'CL0002'\n| where customDimensions.userFeedback in ('Yes', 'No')\n| extend EnvironmentName = tostring( customDimensions.environmentName )\n| project timestamp\n, ClientType = tostring( customDimensions.clientType )\n, ErrorMessage = tostring( customDimensions.errorMessage )\n, StackTrace = replace_string(tostring(customDimensions.alStackTrace),'XYZ','')\n, HostType = customDimensions.hostType\n, UserFeedback = customDimensions.userFeedback\n, UserLocale = customDimensions.userLocale\n",
                "usedVariables": [
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "8876e2d5-b6ae-40db-bcd1-d99bac1f47b7",
            "title": "Delete Environment Lifecycle",
            "visualType": "table",
            "pageId": "2951304b-62f3-4b7b-98c0-8c31c6d7ecd4",
            "layout": {
                "x": 0,
                "y": 41,
                "width": 24,
                "height": 7
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "colorRules": [],
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "// Environment soft deleted successfully\ntraces\n| where timestamp between (_startTime .. _endTime) // adjust as needed\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.eventId == 'LC0181'\n| project timestamp\n, message\n, applicationFamily = customDimensions.applicationFamily\n, countryCode = customDimensions.countryCode\n, deletionReason = customDimensions.deletionReason\n, environmentName = customDimensions.environmentName\n, environmentType = customDimensions.environmentType\n, totalTime = customDimensions.totalTime\n",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "d092bd8f-bed0-4e5f-ae2e-d3a539c6b7c2",
            "title": "All Lifecycle Events",
            "visualType": "table",
            "pageId": "2951304b-62f3-4b7b-98c0-8c31c6d7ecd4",
            "layout": {
                "x": 0,
                "y": 24,
                "width": 24,
                "height": 9
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "colorRules": [],
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let environment_lifecycle_events = \ntraces\n| where timestamp between (_startTime .. _endTime)\n| where customDimensions has 'Dynamics 365 Business Central Control Plane'\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.eventId in ( 'LC0106', 'LC0114', 'LC0117', 'LC0120', 'LC0126', 'LC0134', 'LC0141', 'LC0142', 'LC0146', 'LC0150', 'LC0153', 'LC0159', 'LC0181' )\n| project timestamp\n, environmentName = customDimensions.environmentName\n, environmentType = customDimensions.environmentType\n, whatChanged = 'Environment'\n, operation = case(\n    customDimensions.eventId == 'LC0106', 'Updated'\n  , customDimensions.eventId == 'LC0114', 'Started'\n  , customDimensions.eventId == 'LC0117', 'Stopped'\n  , customDimensions.eventId == 'LC0120', 'Copied'\n  , customDimensions.eventId == 'LC0126', 'Point-in-time restored' \n  , customDimensions.eventId == 'LC0134', 'Moved to different AAD tenant' \n  , customDimensions.eventId == 'LC0141', 'Database exported' \n  , customDimensions.eventId == 'LC0142', 'Configuration key updated' \n  , customDimensions.eventId == 'LC0146', 'Update window modified'         \n  , customDimensions.eventId == 'LC0150', 'Deleted (permanently)'\n  , customDimensions.eventId == 'LC0153', 'Renamed'\n  , customDimensions.eventId == 'LC0159', 'App hotfix applied'\n  , customDimensions.eventId == 'LC0181', 'Deleted (marked for deletion)'\n  , customDimensions.eventId == 'LC0184', 'Recovered (un-deleted)'            \n  , 'Unknown event'\n)\n, onWhat = tostring( customDimensions.environmentName ) // which environment\n, sourceVersion = tostring(customDimensions.extensionSourceVersion)\n, destinationVersion = tostring(customDimensions.extensionDestinationVersion)\n;\nlet extension_lifecycle_events = \ntraces\n| where timestamp between (_startTime .. _endTime)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions has 'RT0010'\n     or customDimensions has 'LC0010'\n     or customDimensions has 'LC0011'\n     or customDimensions has 'LC0012'\n     or customDimensions has 'LC0013'\n     or customDimensions has 'LC0014'\n     or customDimensions has 'LC0015'\n     or customDimensions has 'LC0016'\n     or customDimensions has 'LC0017'\n     or customDimensions has 'LC0018'\n     or customDimensions has 'LC0019'\n     or customDimensions has 'LC0020'\n     or customDimensions has 'LC0021'\n     or customDimensions has 'LC0022'\n     or customDimensions has 'LC0023'\n| where customDimensions.eventId in ('RT0010', 'LC0010', 'LC0011', 'LC0012', 'LC0013', 'LC0014', 'LC0015', 'LC0016', 'LC0017', 'LC0018', 'LC0019', 'LC0020', 'LC0021', 'LC0022', 'LC0023')    \n| project timestamp\n, environmentName = customDimensions.environmentName\n, environmentType = customDimensions.environmentType\n, whatChanged = 'Extension'\n, operation = case(\n    customDimensions.eventId=='RT0010', 'Update failed (upgrade code)'\n  , customDimensions.eventId=='LC0010', 'Install succeeded'\n  , customDimensions.eventId=='LC0011', 'Install failed'\n  , customDimensions.eventId=='LC0010', 'Install succeeded'\n  , customDimensions.eventId=='LC0012', 'Synch succeeded'\n  , customDimensions.eventId=='LC0013', 'Synch failed'           \n  , customDimensions.eventId=='LC0014', 'Publish succeeded'\n  , customDimensions.eventId=='LC0015', 'Publish failed'\n  , customDimensions.eventId=='LC0016', 'Un-install succeeded'\n  , customDimensions.eventId=='LC0017', 'Un-install failed'\n  , customDimensions.eventId=='LC0018', 'Un-publish succeeded'\n  , customDimensions.eventId=='LC0019', 'Un-publish failed'\n  , customDimensions.eventId=='LC0020', 'Compilation succeeded'\n  , customDimensions.eventId=='LC0021', 'Compilation failed'\n  , customDimensions.eventId=='LC0022', 'Update succeeded'\n  , customDimensions.eventId=='LC0023', 'Update failed (other)'\n  , 'Unknown message'\n)\n, onWhat = replace_string(tostring( customDimensions.extensionName ),'XYZ','') // which extension\n, sourceVersion = tostring(customDimensions.extensionSourceVersion)\n, destinationVersion = tostring(customDimensions.extensionDestinationVersion)\n;\nlet index_lifecycle_events = \ntraces\n| where timestamp between (_startTime .. _endTime)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions has 'LC0024' \n     or customDimensions has 'LC0025'\n| where customDimensions.eventId in ('LC0024', 'LC0025')\n| project timestamp\n, environmentName = customDimensions.environmentName\n, environmentType = customDimensions.environmentType\n, whatChanged = 'Index'\n, operation = case(\n    customDimensions.eventId == 'LC0024', 'Added'\n  , customDimensions.eventId == 'LC0025', 'Removed'\n  , 'Unknown message'\n)\n, onWhat = replace_string(tostring( customDimensions.alObjectName ),'XYZ','') // which table\n, sourceVersion = tostring(customDimensions.extensionSourceVersion)\n, destinationVersion = tostring(customDimensions.extensionDestinationVersion)\n;\nlet company_lifecycle_events = \ntraces\n| where timestamp between (_startTime .. _endTime)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions has 'LC0001' \n     or customDimensions has 'LC0004' \n     or customDimensions has 'LC0007'\n| where customDimensions.eventId in ('LC0001', 'LC0004', 'LC0007')\n| project timestamp\n, environmentName = customDimensions.environmentName\n, environmentType = customDimensions.environmentType\n, whatChanged = 'Company'\n, operation = case(\n    customDimensions.eventId == 'LC0001', 'Company created'\n  , customDimensions.eventId == 'LC0004', 'Company copied'\n  , customDimensions.eventId == 'LC0007', 'Company deleted'    \n  ,                    'Unknown message'\n)\n, onWhat = case(\n    customDimensions.eventId == 'LC0001', tostring( 'Redacted CompanyName' )\n  , customDimensions.eventId == 'LC0004', tostring( 'Redacted CompanyNameSource' )\n  , customDimensions.eventId == 'LC0007', tostring( 'Redacted CompanyName' )\n  ,                    'Unknown message'\n) // which company\n, sourceVersion = tostring(customDimensions.extensionSourceVersion)\n, destinationVersion = tostring(customDimensions.extensionDestinationVersion)\n, usertelemetryId = case(\n  // user telemetry id was introduced in the platform in version 20.0\n  toint( substring(customDimensions.componentVersion,0,2)) >= 20, user_Id\n, 'N/A'\n) // who did it\n;\nlet feature_management_state_changes = \n// Feature management state changes\n// Available from 22.0\ntraces\n| where timestamp between (_startTime .. _endTime)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions has 'AL0000JT3'\n| where customDimensions.eventId == 'AL0000JT3'\n| project timestamp\n, environmentName = customDimensions.environmentName\n, environmentType = customDimensions.environmentType\n, whatChanged = 'Feature'\n, operation = tostring( customDimensions.alStatus) // enabled/disabled\n, onWhat = tostring( customDimensions.alFeatureDescription ) // which feature\n, sourceVersion = tostring(customDimensions.extensionSourceVersion)\n, destinationVersion = tostring(customDimensions.extensionDestinationVersion)\n, usertelemetryId = user_Id // who did it\n;\nlet retention_policy_deletes = \ntraces\n| where timestamp between (_startTime .. _endTime)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions has 'AL0000D6H'\n| where customDimensions.eventId == 'AL0000D6H'\n| extend RecordsDeleted = toint(customDimensions.alRecordsDeleted)\n, TableNumber = customDimensions.alTableNo\n, TableName = replace_string(tostring( customDimensions.alTableName ),'XYZ','')\n| where RecordsDeleted > 0\n| project timestamp\n, environmentName = customDimensions.environmentName\n, environmentType = customDimensions.environmentType\n, whatChanged = 'Data'\n, operation = 'Data deleted'\n, onWhat = TableName // which table\n, sourceVersion = tostring(customDimensions.extensionSourceVersion)\n, destinationVersion = tostring(customDimensions.extensionDestinationVersion)\n, usertelemetryId = case(\n  // user telemetry id was introduced in the platform in version 20.0\n  toint( substring(customDimensions.componentVersion,0,2)) >= 20, user_Id\n, 'N/A'\n) // who did it\n;\nlet field_changes = \ntraces\n| where timestamp between (_startTime .. _endTime)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions has 'AL0000CTE'\n| where customDimensions.eventId == 'AL0000CTE'\n| extend TableName = replace_string(tostring(customDimensions.altableCaption),'XYZ','')\n  , FieldName = replace_string(tostring(customDimensions.alfieldCaption),'XYZ','')\n| project timestamp\n, environmentName = customDimensions.environmentName\n, environmentType = customDimensions.environmentType\n, whatChanged = 'Data'\n, operation = 'Data changed'\n, onWhat = strcat( TableName, '.', FieldName ) // which table.field\n, sourceVersion = tostring(customDimensions.extensionSourceVersion)\n, destinationVersion = tostring(customDimensions.extensionDestinationVersion)\n, usertelemetryId = case(\n  // user telemetry id was introduced in the platform in version 20.0\n  toint( substring(customDimensions.componentVersion,0,2)) >= 20, user_Id\n, 'N/A'\n) // who did it\n;\nenvironment_lifecycle_events\n| union extension_lifecycle_events\n| union index_lifecycle_events\n| union company_lifecycle_events\n| union feature_management_state_changes\n| union retention_policy_deletes\n| union field_changes",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "610ad1a1-6a17-4fb5-a8c2-17de446cb342",
            "title": "Active Users",
            "visualType": "table",
            "pageId": "a766ad41-9070-40d7-8dd7-70676512faaa",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 12,
                "height": 5
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let dau_mau = \ntraces\n| extend aadTenantId = tostring( customDimensions.aadTenantId )\n, environmentName = tostring( customDimensions.environmentName )\n| where timestamp between (_startTime .. _endTime)\n| where environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| evaluate activity_engagement(user_Id, timestamp, ago(40d), now(), 1d, 28d, aadTenantId, environmentName)\n| project-rename Daily=dcount_activities_inner, Monthly=dcount_activities_outer\n| project-away activity_ratio\n| extend timestamp_truncated = startofday(timestamp)\n;\nlet dau_wau = \ntraces\n| extend aadTenantId = tostring( customDimensions.aadTenantId )\n, environmentName = tostring( customDimensions.environmentName )\n| where timestamp > ago(10d)\n| evaluate activity_engagement(user_Id, timestamp, ago(40d), now(), 1d, 7d, aadTenantId, environmentName)\n| project-rename Daily=dcount_activities_inner, Weekly=dcount_activities_outer\n| project-away activity_ratio\n| extend timestamp_truncated = startofday(timestamp)\n;\ndau_mau\n| join kind=inner dau_wau \non $left.aadTenantId == $right.aadTenantId \nand $left.environmentName == $right.environmentName\nand $left.timestamp_truncated == $right.timestamp_truncated\n| project-away aadTenantId1,timestamp_truncated1, timestamp, environmentName1,   timestamp1, Daily1\n| project-rename timestamp=timestamp_truncated\n| project format_datetime(timestamp, 'dd-MM-yyyy'), environmentName, Daily, Monthly, Weekly",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "f3d10b30-5268-4c56-8514-b73d8494bb48",
            "title": "Active Users Graph (60d)",
            "visualType": "timechart",
            "pageId": "a766ad41-9070-40d7-8dd7-70676512faaa",
            "layout": {
                "x": 12,
                "y": 0,
                "width": 12,
                "height": 5
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": false,
                "xColumnTitle": "",
                "xColumn": null,
                "yColumns": [
                    "Daily"
                ],
                "seriesColumns": [
                    "environmentName"
                ],
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": true,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let dau_mau = \ntraces\n| extend aadTenantId = tostring( customDimensions.aadTenantId )\n, environmentName = tostring( customDimensions.environmentName )\n| where timestamp > ago(60d)\n| where environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| evaluate activity_engagement(user_Id, timestamp, ago(40d), now(), 1d, 28d, aadTenantId, environmentName)\n| project-rename Daily=dcount_activities_inner, Monthly=dcount_activities_outer\n| project-away activity_ratio\n| extend timestamp_truncated = startofday(timestamp)\n;\nlet dau_wau = \ntraces\n| extend aadTenantId = tostring( customDimensions.aadTenantId )\n, environmentName = tostring( customDimensions.environmentName )\n| where timestamp > ago(10d)\n| evaluate activity_engagement(user_Id, timestamp, ago(40d), now(), 1d, 7d, aadTenantId, environmentName)\n| project-rename Daily=dcount_activities_inner, Weekly=dcount_activities_outer\n| project-away activity_ratio\n| extend timestamp_truncated = startofday(timestamp)\n;\ndau_mau\n| join kind=inner dau_wau \non $left.aadTenantId == $right.aadTenantId \nand $left.environmentName == $right.environmentName\nand $left.timestamp_truncated == $right.timestamp_truncated\n| project-away aadTenantId1,timestamp_truncated1, timestamp, environmentName1,   timestamp1, Daily1\n| project-rename timestamp=timestamp_truncated\n| project timestamp, aadTenantId, environmentName, Daily, Monthly, Weekly",
                "usedVariables": [
                    "_EnvironmentType",
                    "_environmentName"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "be049551-b68d-47c7-968d-4d8430dbfe13",
            "title": "Update Environment Lifecycle",
            "visualType": "table",
            "pageId": "2951304b-62f3-4b7b-98c0-8c31c6d7ecd4",
            "layout": {
                "x": 0,
                "y": 8,
                "width": 24,
                "height": 8
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "// change lookback, limit, ... as needed \n// EnvironmentUpdatePerformance\ntraces\n| where timestamp between (_startTime .. _endTime) // adjust as needed\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions has 'LC0106'\n| where customDimensions.eventId == 'LC0106'\n| extend EnvironmentName = tostring( customDimensions.environmentName )\n| extend ObjectId = toint(customDimensions.codeunitObjectId)\n| project timestamp\n, EnvironmentName\n, EnvironmentType = tostring( customDimensions.environmentType )\n, ApplicationFamily = customDimensions.applicationFamily\n, CountryCode = customDimensions.countryCode\n, SourceVersion = customDimensions.sourceVersion\n, DestinationVersion = customDimensions.destinationVersion\n, Duration = customDimensions.totalTime\n, RegisteredForUpdateOnOrAfterDateUtc = customDimensions.registeredForUpdateOnOrAfterDateUtc\n, UpdateWindowStartTimeUtc = customDimensions.updateWindowStartTimeUtc\n, UpdateWindowEndTimeUtc = customDimensions.updateWindowEndTimeUtc\n, IgnoreUpdateWindow = customDimensions.ignoreUpdateWindow\n, InitiatedFrom = customDimensions.initiatedFrom\n| parse tostring(Duration) with hours ':' minutes ':' rest\n| extend totalTimeInMin = toint(hours) * 60 + toint(minutes)\n| project-away hours, minutes, rest\n| project \n[\"Environment Name\"] = EnvironmentName,\n[\"Environment Type\"] = EnvironmentType,\n[\"Source Version\"] = SourceVersion,\n[\"Destination Version\"] = DestinationVersion,\n[\"Date / Time\"] = timestamp,\n[\"Duration / min\"] = totalTimeInMin,\n[\"Duration\"] = Duration\n",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "b22c19cb-1d19-405b-b739-b5e2b1acd4c7",
            "title": "Period Data Ingestion",
            "visualType": "stackedcolumn",
            "pageId": "1a9f99e5-2026-4f32-a914-3ee9e64ce31e",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 24,
                "height": 12
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": true,
                "xColumnTitle": "",
                "xColumn": "Day",
                "yColumns": null,
                "seriesColumns": [
                    "EventId"
                ],
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "// change lookback, limit, ... as needed \n// EventStatistics\nlet traceEvents = traces\n| where timestamp between (_startTime_Ingestion .. _endTime_ingestion)\n| where isnotempty(customDimensions.aadTenantId) // filter away signal from Docker sandboxes\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| extend \n  AadTenantId = tostring( customDimensions.aadTenantId )\n, EnvironmentName = tostring( customDimensions.environmentName )\n| extend TenantId = strcat( toupper(AadTenantId), toupper(EnvironmentName) )\n| project timestamp\n, AadTenantId, EnvironmentName\n, EnvironmentType = tostring( customDimensions.environmentType )\n, TenantId\n, EventId = tostring( customDimensions.eventId )\n| summarize EventCount=count() by AadTenantId, EnvironmentName, EnvironmentType, TenantId, EventId, Day=bin(timestamp, 1d)\n;\nlet pageViewEvents = \npageViews\n| where timestamp between (_startTime_Ingestion .. _endTime_ingestion)\n| where isnotempty(customDimensions.aadTenantId) // filter away signal from Docker sandboxes\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| extend AadTenantId = tostring( customDimensions.aadTenantId )\n, EnvironmentName = tostring( customDimensions.environmentName )\n| extend TenantId = strcat( toupper(AadTenantId), toupper(EnvironmentName) )\n| project timestamp\n, AadTenantId, EnvironmentName\n, EnvironmentType = tostring( customDimensions.environmentType )\n, TenantId\n, EventId = tostring( iff(isempty(customDimensions.eventId), customDimensions.eventID, customDimensions.eventId) )\n| summarize EventCount=count() by AadTenantId, EnvironmentName, EnvironmentType, TenantId, EventId, Day=bin(timestamp, 1d)\n;\ntraceEvents\n| union pageViewEvents",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime_ingestion",
                    "_environmentName",
                    "_startTime_Ingestion"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "a151f9f7-1afa-4ba9-920c-9199cc329a36",
            "title": "Data Ingestion",
            "visualType": "table",
            "pageId": "1a9f99e5-2026-4f32-a914-3ee9e64ce31e",
            "layout": {
                "x": 0,
                "y": 12,
                "width": 24,
                "height": 10
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "// EventStatistics\nlet signalDefinitionTable = externaldata(EventID :string, Area:string, Message:string)[h@'https://raw.githubusercontent.com/duiliotacconi/DT.Telemetry/main/JSON/SignalDefinitions.json']with(format='multijson');\nlet traceEvents = traces\n| where timestamp between (_startTime_Ingestion .. _endTime_ingestion)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| extend EnvironmentName = tostring( customDimensions.environmentName )\n| project timestamp\n, EnvironmentName\n, EnvironmentType = tostring( customDimensions.environmentType )\n, EventId = tostring( customDimensions.eventId )\n| summarize EventCount=count() by EnvironmentName, EnvironmentType, EventId\n;\nlet pageViewEvents = \npageViews\n| where timestamp between (_startTime_Ingestion .. _endTime_ingestion)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| extend EnvironmentName = tostring( customDimensions.environmentName )\n| project timestamp\n,  EnvironmentName\n, EnvironmentType = tostring( customDimensions.environmentType )\n, EventId = tostring( iff(isempty(customDimensions.eventId), customDimensions.eventID, customDimensions.eventId) )\n| summarize EventCount=count() by EnvironmentName, EnvironmentType, EventId\n;\ntraceEvents\n| union pageViewEvents\n| join kind=leftouter  signalDefinitionTable\non\n$left.EventId == $right.EventID\n| project \n  [\"Environment Name\"] = EnvironmentName,\n  [\"Event Id\"] = EventId,\n  [\"Area\"] = Area,\n  [\"Message\"] = Message,\n  [\"Event Count\"] = EventCount\n| sort by ['Event Count'] desc  \n\n\n\n",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime_ingestion",
                    "_environmentName",
                    "_startTime_Ingestion"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "aa814387-a986-4a8e-8812-8ec77579319e",
            "title": "No. of Long Running SQL Queries",
            "visualType": "column",
            "pageId": "94d9d8ce-b39a-4f2d-bf77-11c032f0fd9e",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 12,
                "height": 14
            },
            "visualOptions": {
                "xColumn": null,
                "multipleYAxes": {
                    "additional": [],
                    "showMultiplePanels": false,
                    "base": {
                        "horizontalLines": [],
                        "yAxisScale": "linear",
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "columns": [],
                        "label": "",
                        "id": "-1"
                    }
                },
                "yColumns": null,
                "seriesColumns": null,
                "hideLegend": true,
                "xColumnTitle": "",
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where 1==1 \n    and timestamp >= todatetime(_startTime_Ingestion)\n    and timestamp <= todatetime(_endTime_ingestion) + totimespan(24h) - totimespan(1ms) \n    and customDimensions.eventId == 'RT0005'\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| extend  hour = iif(_OnlyWorkingHours == true, hourofday(timestamp), 12)\n| where hour between (6 .. 17)\n| summarize count() by bin(timestamp, 1d)\n",
                "usedVariables": [
                    "_CompanyName",
                    "_EnvironmentType",
                    "_OnlyWorkingHours",
                    "_endTime_ingestion",
                    "_environmentName",
                    "_publisher",
                    "_startTime_Ingestion"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "886fe569-ef19-4521-bc4e-47ebec9e54db",
            "title": "No. of Long Running AL Methods",
            "visualType": "column",
            "pageId": "94d9d8ce-b39a-4f2d-bf77-11c032f0fd9e",
            "layout": {
                "x": 12,
                "y": 0,
                "width": 12,
                "height": 14
            },
            "visualOptions": {
                "xColumn": null,
                "multipleYAxes": {
                    "additional": [],
                    "showMultiplePanels": false,
                    "base": {
                        "horizontalLines": [],
                        "yAxisScale": "linear",
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "columns": [],
                        "label": "",
                        "id": "-1"
                    }
                },
                "yColumns": null,
                "seriesColumns": null,
                "hideLegend": true,
                "xColumnTitle": "",
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": true,
                "drillthroughDisabled": false,
                "crossFilter": [
                    {
                        "interaction": "column",
                        "property": "count_",
                        "disabled": false
                    }
                ],
                "drillthrough": [
                    {
                        "pairs": [
                            {
                                "parameterId": "faae011a-19c6-437e-a04c-d7de238ed7ad",
                                "property": "timestamp"
                            }
                        ],
                        "destinationPages": [
                            "a1b9eab8-5e92-446b-bdd0-6df8160c9c54"
                        ],
                        "disabled": false
                    }
                ]
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where 1==1 \n    and timestamp >= todatetime(_startTime_Ingestion)\n    and timestamp <= todatetime(_endTime_ingestion) + totimespan(24h) - totimespan(1ms)\n    and customDimensions.eventId == 'RT0018'\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| extend  hour = iif(_OnlyWorkingHours == true, hourofday(timestamp), 12)\n| where hour between (6 .. 17)\n| summarize count() by bin(timestamp, 1d)\n| render columnchart  title= 'Number of long running AL Methods'",
                "usedVariables": [
                    "_CompanyName",
                    "_EnvironmentType",
                    "_OnlyWorkingHours",
                    "_endTime_ingestion",
                    "_environmentName",
                    "_publisher",
                    "_startTime_Ingestion"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "bf5393aa-e26a-4396-94b3-62e65c1dab98",
            "title": "No. of Sessions by Client",
            "visualType": "timechart",
            "pageId": "94d9d8ce-b39a-4f2d-bf77-11c032f0fd9e",
            "layout": {
                "x": 0,
                "y": 38,
                "width": 24,
                "height": 8
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": false,
                "xColumnTitle": "",
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where 1==1 \n    and timestamp >= todatetime(_startTime_Ingestion)\n    and timestamp <= todatetime(_endTime_ingestion) + totimespan(24h) - totimespan(1ms)   \n    and customDimensions.eventId == 'RT0004'\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| extend clientType = tostring( customDimensions.clientType )\n| extend  hour = iif(_OnlyWorkingHours == true, hourofday(timestamp), 12)\n| where hour between (6 .. 17)\n| summarize request_count=count() by clientType, bin(timestamp, 1d)",
                "usedVariables": [
                    "_CompanyName",
                    "_EnvironmentType",
                    "_OnlyWorkingHours",
                    "_endTime_ingestion",
                    "_environmentName",
                    "_publisher",
                    "_startTime_Ingestion"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "8b72f5f9-23af-455a-807f-a2b465577cc1",
            "title": "No. of SQL Lock Timeout",
            "visualType": "column",
            "pageId": "94d9d8ce-b39a-4f2d-bf77-11c032f0fd9e",
            "layout": {
                "x": 12,
                "y": 14,
                "width": 12,
                "height": 14
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": true,
                "xColumnTitle": "",
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where timestamp >= todatetime(_startTime_Ingestion)\n    and timestamp <= todatetime(_endTime_ingestion) + totimespan(24h) - totimespan(1ms) \n| where customDimensions.eventId == 'RT0012'\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| project timestamp\n, componentVersion = customDimensions.componentVersion\n, environmentType = customDimensions.environmentType\n, environmentName = customDimensions.environmentName\n, aadTenantId = customDimensions.aadTenantId\n, alObjectId = customDimensions.alObjectId\n, companyName = customDimensions.companyName\n, clientType = customDimensions.clientType\n, alObjectType = customDimensions.alObjectType\n, alObjectName = customDimensions.alObjectName\n, extensionVersion = customDimensions.extensionVersion\n, extensionName = customDimensions.extensionName\n, extensionId = customDimensions.extensionId\n, alStackTrace = customDimensions.alStackTrace\n// use the KQL snippet parseStackTrace to get bottom of the stack trace details\n, sqlStatement = customDimensions.sqlStatement\n, sqlServerSessionId = customDimensions.sqlServerSessionId\n, snapshotId = customDimensions.snapshotId\n, sessionId = customDimensions.sessionId\n, usertelemetryId = case(\n  // user telemetry id was introduced in the platform in version 20.0\n  toint( substring(customDimensions.componentVersion,0,2)) >= 20, user_Id\n, 'N/A'\n)\n| extend  hour = iif(_OnlyWorkingHours == true, hourofday(timestamp), 12)\n| where hour between (6 .. 17)\n| summarize count() by bin(timestamp,1d)\n",
                "usedVariables": [
                    "_CompanyName",
                    "_EnvironmentType",
                    "_OnlyWorkingHours",
                    "_endTime_ingestion",
                    "_environmentName",
                    "_publisher",
                    "_startTime_Ingestion"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "4a396f63-ed5f-47c6-9265-2a1589623d59",
            "title": "SQL Deadlocks by Process",
            "visualType": "table",
            "pageId": "5464aca4-0e79-4cc9-acaf-5bfcba11b235",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 16,
                "height": 8
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where timestamp between (_startTime .. _endTime)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.eventId == 'RT0028'\n| where isnotempty(customDimensions.aadTenantId) // filter away signal from Docker sandboxes\n| where customDimensions.alObjectId != '0' \n| where isnotempty(customDimensions.alObjectId)\n| extend ObjectName = replace_string(tostring(customDimensions.alObjectName),'XYZ','')\n    , ExtensionName = replace_string(tostring(customDimensions.extensionName),'XYZ','')\n    , StackTrace = replace_string(tostring(customDimensions.alStackTrace),'XYZ','')\n    , sqlStatement = replace_string(tostring(customDimensions.sqlStatement),'XYZ','')\n| extend TenantId = strcat(customDimensions.aadTenantId)\n    , ExtensionId = tostring(customDimensions.extensionId)\n    , ExtensionVersion = tostring(customDimensions.extensionVersion)\n    , ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , numberOfJoins = countof(tostring(customDimensions.sqlStatement), \"JOIN\")\n    , EventId = tostring(customDimensions.eventId)\n    , userId = user_Id\n| extend operationType = case(\n    sqlStatement startswith \"UPDATE\", \"UPDATE\"\n    , sqlStatement startswith \"DELETE\", \"DELETE\"\n    , sqlStatement startswith \"BeginTransaction\", \"BEGIN_TRANS\"\n    , sqlStatement matches regex \"INSERT INTO\", \"INSERT\"\n    , sqlStatement startswith \"SELECT\", \"SELECT\"\n    , sqlStatement matches regex \"IF EXISTS \\\\(SELECT (.*)\\\\) SELECT\", \"SELECT'\"\n    , sqlStatement has \"SELECT NEXT VALUE FOR\", \"SELECT_SEQUENCE_VALUE\"\n    , sqlStatement has \"SELECT @@SPID\", \"SELECT_SPID\"\n    , sqlStatement matches regex \"(.*)WITH\", \"SELECT\"\n    , sqlStatement startswith \"CREATE TABLE\", \"CREATE_TABLE\"\n    , sqlStatement startswith \"ALTER TABLE\", \"ALTER_TABLE\"\n    , sqlStatement startswith \"exec sp_rename\", \"RENAME_TABLE\" \n    , sqlStatement matches regex \"(.*)DROP TABLE\", \"DROP_TABLE\"\n    , sqlStatement startswith \"SET LOCK_TIMEOUT\", \"SET_LOCK_TIMEOUT\"\n    , sqlStatement has \"sp_getapplock\", \"GET_APP_LOCK\"\n    , \"UNKNOWN\"\n    ) \n| parse kind=regex sqlStatement with selectPart: string \"FROM \\\"SQLDATABASE\\\".dbo.\\\"CURRENTCOMPANY\\\\$\" tablename: string \"\\\\$\" space: string\n| extend splitStacktrace = split(StackTrace, \"\\n\")\n| extend lengthStacktrace = array_length(splitStacktrace)\n| extend\n    topOfStackline = tostring(splitStacktrace[0]),\n    bottomOfStackline = tostring(splitStacktrace[lengthStacktrace - 1])\n| extend topOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, topOfStackline)\n| extend topOfStackLineNumber = extract(' line (\\\\d+)', 1, topOfStackline)\n| extend topOfStackExtensionName = case (\n    isnotempty(topOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, topOfStackline),\n    extract(' - (.+) by', 1, topOfStackline)\n    )\n| extend topOfStackPublisher = extract('.+ by (.+)', 1, topOfStackline)\n| extend topOfStackWhatWasCalled = case(\n    isnotempty(topOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, topOfStackline),\n    isnotempty(topOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, topOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, topOfStackline)\n    )\n| extend bottomOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackLineNumber = extract(' line (\\\\d+)', 1, bottomOfStackline)\n| extend bottomOfStackExtensionName = case (\n    isnotempty(bottomOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, bottomOfStackline),\n    extract(' - (.+) by', 1, bottomOfStackline)\n    )\n| extend bottomOfStackPublisher = extract('.+ by (.+)', 1, bottomOfStackline)\n| extend bottomOfStackWhatWasCalled = case(\n    isnotempty(bottomOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, bottomOfStackline),\n    isnotempty(bottomOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, bottomOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, bottomOfStackline)\n    )\n| extend SourceProcess = strcat(bottomOfStackWhatWasCalled , \" - \", bottomOfStackObjectType, \" \", bottomOfStackObjectId, \" \", bottomOfStackObjectName, \" (\", bottomOfStackExtensionName, \")\")\n    , LockingObject = strcat(topOfStackObjectType, \" '\", topOfStackObjectName,\"'\")\n    , LockingObjectId = tostring(topOfStackObjectId)\n    , LockingObjectMethod = tostring(topOfStackWhatWasCalled)\n    , LockingObjectExtension = tostring(topOfStackExtensionName)\n| project\n    timestamp,\n    TenantId,\n    ExtensionId,\n    ExtensionName,\n    ExtensionVersion,\n    ObjectType,\n    ObjectId,\n    ObjectName,\n    operationType,\n    numberOfJoins,\n    LockingObject,\n    LockingObjectId,\n    LockingObjectMethod,\n    LockingObjectExtension,    \n    SourceProcess,\n    StackTrace,\n    customDimensions\n| summarize count = count() by tostring(SourceProcess), ExtensionId, tostring(LockingObjectExtension), ExtensionVersion, tostring(LockingObject), tostring(LockingObjectId), tostring(LockingObjectMethod),tostring(operationType),tostring(StackTrace)\n| order by ['count'],SourceProcess desc",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "1861e1dc-ee3b-45f4-b42f-3370a429cefc",
            "title": "No. of  SQL Deadlocks",
            "visualType": "column",
            "pageId": "94d9d8ce-b39a-4f2d-bf77-11c032f0fd9e",
            "layout": {
                "x": 0,
                "y": 14,
                "width": 12,
                "height": 14
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": true,
                "xColumnTitle": "",
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where timestamp >= todatetime(_startTime_Ingestion)\n    and timestamp <= todatetime(_endTime_ingestion) + totimespan(24h) - totimespan(1ms) \n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.eventId == 'RT0028'\n| where isnotempty(customDimensions.aadTenantId) // filter away signal from Docker sandboxes\n| where customDimensions.alObjectId != '0' \n| where isnotempty(customDimensions.alObjectId)\n| extend  hour = iif(_OnlyWorkingHours == true, hourofday(timestamp), 12)\n| where hour between (6 .. 17)\n| summarize count() by bin(timestamp, 1d)\n| order by timestamp asc",
                "usedVariables": [
                    "_CompanyName",
                    "_EnvironmentType",
                    "_OnlyWorkingHours",
                    "_endTime_ingestion",
                    "_environmentName",
                    "_publisher",
                    "_startTime_Ingestion"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "b662014e-fcd8-4800-b315-e4e638cdfd2d",
            "title": "API Calls Timeline",
            "visualType": "timechart",
            "pageId": "9bd8a199-ba41-40fa-87b8-f9833a040b03",
            "layout": {
                "x": 0,
                "y": 17,
                "width": 24,
                "height": 10
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": false,
                "xColumnTitle": "",
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _maxDuration = 30d;\nlet _currentDuration = _endTime - _startTime;\nlet _duration = iff(_currentDuration > _maxDuration , _maxDuration, _currentDuration);\ntraces\n| where timestamp >= ago(_duration)\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.clientType has_any (_ClientType)\n| where customDimensions.eventId == \"RT0008\" // starting from version 16.1, the eventId is used to identity signal types\n| project timestamp\n, alPublisher = tostring(customDimensions.alPublisher)\n, alObjectId = tostring(customDimensions.alObjectId)\n, alObjectName = tostring(customDimensions.alObjectName)\n, alObjectType = tostring(customDimensions.alObjectType)\n, category = tostring(customDimensions.category)\n, endpoint = tostring(customDimensions.endpoint)\n, httpStatusCode = tostring(customDimensions.httpStatusCode) // httpStatusCode available from 16.3\n, httpHeaders = tostring(customDimensions.httpHeaders)       // httpHeaders available from 16.3\n, httpMethod = tostring(customDimensions.httpMethod) // httpMethod available from 16.3\n, diagnosticsMessage = tostring(customDimensions.diagnosticsMessage) // Only logged in case of an error in a OData/API call. diagnosticsMessage available from 22.0\n, failureReason = tostring(customDimensions.failureReason) // Only logged in case of an error in a OData/API call. failureReason available from 22.0\n, executionTime = customDimensions.serverExecutionTime\n, requestQueueTime = customDimensions.requestQueueTime // This dimension was introduced in Business Central 2023 release wave 1, version 22.0.\n// the datatype for executionTime and requestQueueTime is timespan so need to convert to milliseconds\n, requestQueueTimeMS = toreal(totimespan(customDimensions.requestQueueTime))/10000\n, executionTimeInMS = toreal(totimespan(customDimensions.serverExecutionTime))/10000 \n, requestTotalTimeMS = ( toreal(totimespan(customDimensions.totalTime))+toreal(totimespan(customDimensions.requestQueueTime)) )/10000\n, sqlExecutes = toint(customDimensions.sqlExecutes)\n, sqlRowsRead = toint(customDimensions.sqlRowsRead)\n// these lines illustrate how to extract data from the httpHeaders dimension\n| extend httpHeadersTmp =  tostring( httpHeaders)\n| extend httpHeadersJSON = parse_json(httpHeadersTmp)\n| extend msUserAgent = tostring( httpHeadersJSON.['ms-dyn-useragent'] )\n| extend httpAuthorization = tostring( httpHeadersJSON.['Authorization'] ) // Authorization header (truncated) available from 17.3\n| extend isAdminxxxx = iif(endpoint startswith \"MS/api/eos/acGroup/v2.0/companies()/ac\",true,false)\n//| where isAdminxxxx == \"false\"\n//| summarize count(), avg(executionTimeInMS), avg(requestQueueTimeMS), avg(requestTotalTimeMS) by alObjectType, alObjectId, alObjectName, category, endpoint,httpMethod, isAdminxxxx\n//| sort by count_ desc \n| summarize count() by bin(timestamp, 1min)\n| render timechart\n",
                "usedVariables": [
                    "_ClientType",
                    "_CompanyName",
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_publisher",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "2cd7db76-28c3-4914-a54e-907883f7ee66",
            "title": "Joins impact",
            "visualType": "table",
            "pageId": "d1a3fbcf-a4a6-4912-ab95-fd07bfe32849",
            "layout": {
                "x": 0,
                "y": 44,
                "width": 24,
                "height": 10
            },
            "visualOptions": {
                "hideLegend": false,
                "table__enableRenderLinks": false,
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": true,
                "drillthroughDisabled": true,
                "colorRules": [],
                "crossFilter": [
                    {
                        "interaction": "column",
                        "property": "extensionPublisher",
                        "parameterId": "9cc55dcf-17d4-4829-9340-37c385862cdf",
                        "disabled": false
                    }
                ],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where timestamp between (_startTime .. _endTime)// adjust as needed\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.clientType has_any (_ClientType)\n| where isnotempty(customDimensions.sqlStatement)\n| where isnotempty(customDimensions.alStackTrace)\n| extend numberOfJoins = countof(tostring(customDimensions.sqlStatement), \"JOIN\") \n| where numberOfJoins > _joins // adjust as needed\n| where not(customDimensions.alObjectType in (\"Page\", \"PageExtension\"))\n| where customDimensions.sqlStatement startswith \"SELECT\"\n| parse kind=regex tostring(customDimensions.sqlStatement) with selectPart: string \"FROM\" rest: string\n| extend objectName = trim('XYZ',tostring(customDimensions.alObjectName))\n| extend extensionName = trim('XYZ',tostring(customDimensions.extensionName))\n| extend numberOfColumnsSelected = countof(selectPart, \",\") + 1\n    , eventId = tostring(customDimensions.eventId)\n    , userId = user_Id\n    , ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , companyName = tostring(customDimensions.companyName)\n    , clientType = tostring(customDimensions.clientType)\n    , StackTrace = tostring(customDimensions.alStackTrace)\n    , executionTime = customDimensions.executionTime\n    , executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000\n    , extensionId = tostring(customDimensions.extensionId)\n    , extensionPublisher = tostring(customDimensions.extensionPublisher)\n| extend extensionIdsFromJOIN = tostring( extract_all(\"JOIN \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY\\\\$.+?\\\\$(\\\\S+?)\\\"\", sqlStatement))\n| extend tablename = tostring( extract_all(\"FROM \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY(\\\\$.+?)\\\\$\\\\S+?\\\"\", sqlStatement)[0])\n| project extensionPublisher, extensionName, numberOfColumnsSelected, numberOfJoins, executionTimeInMS, ObjectType, ObjectId, objectName, StackTrace, eventId, message, clientType, tablename, sqlStatement, extensionIdsFromJOIN\n| summarize [\"Count\"] = count() by extensionName, ObjectType, ObjectId, objectName, numberOfColumnsSelected, numberOfJoins, tablename, extensionIdsFromJOIN, sqlStatement, StackTrace, clientType\n| sort by numberOfJoins, Count , numberOfColumnsSelected, tablename\n| project extensionName, ObjectType, ObjectId, objectName, numberOfColumnsSelected, numberOfJoins, Count, tablename, extensionIdsFromJOIN, sqlStatement, StackTrace, clientType",
                "usedVariables": [
                    "_ClientType",
                    "_CompanyName",
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_joins",
                    "_publisher",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "f01083eb-eee1-43d9-972b-1700db7658e6",
            "title": "LRAM by Day",
            "visualType": "table",
            "pageId": "a1b9eab8-5e92-446b-bdd0-6df8160c9c54",
            "layout": {
                "x": 0,
                "y": 13,
                "width": 24,
                "height": 13
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "// Last Long running AL methods\n// Calculate Time in UTC Time\nlet utcOffsetHours = 2;\nlet _StartOfDay = datetime_add('hour',-utcOffsetHours,startofday(_SelectedDateTime));\nlet _EndOfDay = datetime_add('hour',-utcOffsetHours,endofday(_SelectedDateTime));\ntraces\n| where timestamp between (_StartOfDay .. _EndOfDay)\n| where customDimensions has 'RT0018' // performance optimization\n| where customDimensions.eventId == 'RT0018' \n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.alObjectId > 0 // filter out internal server calls\n| project timestamp = timestamp\n, alMethod = replace_string(replace_string(replace_string(tostring(customDimensions.alMethod),'XYZ',''),'xxxx','xxx'),'xxxxx','yyyyy')\n, alObjectId = customDimensions.alObjectId\n, objectName = replace_string(replace_string(replace_string(tostring(customDimensions.alObjectName),'XYZ',''),'xxxx','xxx'),'xxxxx','yyyyy')\n, alObjectType = customDimensions.alObjectType\n, alStackTrace = replace_string(replace_string(replace_string(tostring(customDimensions.alStackTrace),'XYZ',''),'xxxx','xxx'),'xxxxx','yyyyy')\n, clientType = customDimensions.clientType\n, exclusiveTime = customDimensions.exclusiveTime \n, exclusiveTimeInMS = toreal(totimespan(customDimensions.exclusiveTime))/10000 \n, totalTime = customDimensions.executionTime\n, totalTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000 //the datatype for executionTime is timespan \n, extensionId = customDimensions.extensionId\n, extensionInfo = replace_string(replace_string(replace_string(tostring(customDimensions.extensionInfo),'XYZ',''),'xxxx','xxx'),'xxxxx','yyyyy')\n, extensionName = replace_string(replace_string(replace_string(tostring(customDimensions.extensionName),'XYZ',''),'xxxx','xxx'),'xxxxx','yyyyy')\n, extensionPublisher = customDimensions.extensionPublisher\n, extensionVersion = customDimensions.extensionVersion\n, longRunningThreshold = customDimensions.longRunningThreshold\n, longRunningThresholdInMS = toreal(totimespan(customDimensions.longRunningThreshold))/10000 //the datatype for executionTime is timespan \n, sqlExecutes = customDimensions.sqlExecutes // This dimension was introduced in Business Central 2023 release wave 1, version 22.0\n, sqlRowsRead = customDimensions.sqlRowsRead // This dimension was introduced in Business Central 2023 release wave 1, version 22.0\n, usertelemetryId = case(\n  // user telemetry id was introduced in the platform in version 20.0\n  toint( substring(customDimensions.componentVersion,0,2)) >= 20, user_Id\n, 'N/A'\n)\n| order by timestamp desc ",
                "usedVariables": [
                    "_CompanyName",
                    "_EnvironmentType",
                    "_SelectedDateTime",
                    "_environmentName",
                    "_publisher"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "4ce42f55-3f25-4b5a-aa54-671cd07b285f",
            "title": "LRAM by Process",
            "visualType": "table",
            "pageId": "a1b9eab8-5e92-446b-bdd0-6df8160c9c54",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 24,
                "height": 13
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "// Long running queries by Source Process - still needs some work\n// Last Long running AL methods\n// Calculate Time in UTC Time\nlet utcOffsetHours = 2;\nlet _StartOfDay = datetime_add('hour',-utcOffsetHours,startofday(_SelectedDateTime));\nlet _EndOfDay = datetime_add('hour',-utcOffsetHours,endofday(_SelectedDateTime));\ntraces\n| where timestamp between (_StartOfDay .. _EndOfDay)\n| where customDimensions has 'RT0018'\n| where customDimensions.eventId == 'RT0018'\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.companyName has_any (_CompanyName)\n| extend hour = hourofday(timestamp)\n| where hour between (7..17)\n| extend ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = replace_string(replace_string(replace_string(tostring(customDimensions.alObjectName),'XYZ',''),'xxxx','xxx'),'xxxxx','yyyyy')\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , numberOfJoins = countof(tostring(customDimensions.sqlStatement), \"JOIN\")\n    , EventId = tostring(customDimensions.eventId)\n    , StackTrace = replace_string(replace_string(replace_string(tostring(customDimensions.alStackTrace),'XYZ',''),'xxxx','xxx'),'xxxxx','yyyyy')\n    , exclusiveTime = customDimensions.exclusiveTime // This dimension was introduced in Business Central 2023 release wave 1, version 22.1. Backported to version 21.6\n    , exclusiveTimeInMS = toreal(totimespan(customDimensions.exclusiveTime))/10000 //the datatype for exclusiveTime is timespan \n    // exclusiveTime is the total time of the operation, including wait time due to client callback\n    , totalTime = customDimensions.executionTime\n    , totalTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000 //the datatype for executionTime is timespan \n| where ObjectId <> \"18122317\"\n| extend operationType = case(\n    sqlStatement startswith \"UPDATE\", \"UPDATE\"\n    , sqlStatement startswith \"DELETE\", \"DELETE\"\n    , sqlStatement startswith \"BeginTransaction\", \"BEGIN_TRANS\"\n    , sqlStatement matches regex \"INSERT INTO\", \"INSERT\"\n    , sqlStatement startswith \"SELECT\", \"SELECT\"\n    , sqlStatement matches regex \"IF EXISTS \\\\(SELECT (.*)\\\\) SELECT\", \"SELECT'\"\n    , sqlStatement has \"SELECT NEXT VALUE FOR\", \"SELECT_SEQUENCE_VALUE\"\n    , sqlStatement has \"SELECT @@SPID\", \"SELECT_SPID\"\n    , sqlStatement matches regex \"(.*)WITH\", \"SELECT\"\n    , sqlStatement startswith \"CREATE TABLE\", \"CREATE_TABLE\"\n    , sqlStatement startswith \"ALTER TABLE\", \"ALTER_TABLE\"\n    , sqlStatement startswith \"exec sp_rename\", \"RENAME_TABLE\" \n    , sqlStatement matches regex \"(.*)DROP TABLE\", \"DROP_TABLE\"\n    , sqlStatement startswith \"SET LOCK_TIMEOUT\", \"SET_LOCK_TIMEOUT\"\n    , sqlStatement has \"sp_getapplock\", \"GET_APP_LOCK\"\n    , \"UNKNOWN\"\n    ) \n| parse kind=regex sqlStatement with selectPart: string \"FROM \\\"SQLDATABASE\\\".dbo.\\\"CURRENTCOMPANY\\\\$\" tablename: string \"\\\\$\" space: string\n| extend splitStacktrace = split(customDimensions.alStackTrace, \"\\n\")\n| extend lengthStacktrace = array_length(splitStacktrace)\n| extend\n    topOfStackline = tostring(splitStacktrace[0]),\n    bottomOfStackline = tostring(splitStacktrace[lengthStacktrace - 1])\n| extend topOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, topOfStackline)\n| extend topOfStackLineNumber = extract(' line (\\\\d+)', 1, topOfStackline)\n| extend topOfStackExtensionName = case (\n    isnotempty(topOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, topOfStackline),\n    extract(' - (.+) by', 1, topOfStackline)\n    )\n| extend topOfStackPublisher = extract('.+ by (.+)', 1, topOfStackline)\n| extend topOfStackWhatWasCalled = case(\n    isnotempty(topOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, topOfStackline),\n    isnotempty(topOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, topOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, topOfStackline)\n    )\n| extend bottomOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackLineNumber = extract(' line (\\\\d+)', 1, bottomOfStackline)\n| extend bottomOfStackExtensionName = case (\n    isnotempty(bottomOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, bottomOfStackline),\n    extract(' - (.+) by', 1, bottomOfStackline)\n    )\n| extend bottomOfStackPublisher = extract('.+ by (.+)', 1, bottomOfStackline)\n| extend bottomOfStackWhatWasCalled = case(\n    isnotempty(bottomOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, bottomOfStackline),\n    isnotempty(bottomOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, bottomOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, bottomOfStackline)\n    )\n| extend SourceProcess = strcat(bottomOfStackWhatWasCalled , \" - \", bottomOfStackObjectType, \" \", bottomOfStackObjectId, \" \", bottomOfStackObjectName, \" (\", bottomOfStackExtensionName, \")\")\n    , LockingObject = strcat(topOfStackWhatWasCalled , \" - \", topOfStackObjectType, \" \", topOfStackObjectId, \" \", topOfStackObjectName, \" (\", topOfStackExtensionName, \")\")\n| project\n    timestamp,\n    ObjectType,\n    ObjectId,\n    ObjectName,\n    operationType,\n    numberOfJoins,\n    LockingObject,\n    SourceProcess,\n    StackTrace,\n    customDimensions,\n    totalTimeInMS\n| summarize count = count(), avgTotalTimeInMS = toint(avg(totalTimeInMS)) by replace_string(replace_string(replace_string(SourceProcess,'XYZ',''),'xxxx','xxx'),'xxxxx','yyyyy'), StackTrace\n| order by ['count'] desc ",
                "usedVariables": [
                    "_CompanyName",
                    "_EnvironmentType",
                    "_SelectedDateTime",
                    "_environmentName"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "81fc8700-6e7f-43c1-bd6d-036b61e48ba3",
            "title": "Lock by Calcsum",
            "visualType": "table",
            "pageId": "5464aca4-0e79-4cc9-acaf-5bfcba11b235",
            "layout": {
                "x": 0,
                "y": 52,
                "width": 24,
                "height": 6
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "// Any CalcSum that we can find in Telemetry that is locking\ntraces\n| where timestamp between (_startTime .. _endTime) // adjust as needed. The value 30 comes from the app configuration\n| where isnotempty(customDimensions.sqlStatement) \n| where isnotempty(customDimensions.alStackTrace) // only interested in parts in the code we can change\n| where customDimensions.extensionPublisher <> \"Microsoft\"\n| where customDimensions.sqlStatement contains \"SELECT SUM\" //It's an intentional SUM\n    and customDimensions.sqlStatement contains \"UPDLOCK\"\n    and customDimensions.sqlStatement startswith \"SELECT\"\n| where not(customDimensions.alObjectType in (\"Page\"))\n| extend sqlStatement = replace_string(tostring(customDimensions.sqlStatement),'XYZ','')\n    , stackTrace = replace_string(tostring(customDimensions.alStackTrace),'XYZ','')\n    , alObjectName = replace_string(tostring(customDimensions.alObjectName),'XYZ','')\n    , extensionName = replace_string(tostring(customDimensions.extensionName),'XYZ','')\n| parse kind=regex sqlStatement with selectPart: string \"FROM\" rest: string\n| extend numberOfColumnsSelected = countof(selectPart, \",\") + 1\n    , eventId = tostring(customDimensions.eventId)\n    , TenantId = strcat(customDimensions.aadTenantId)\n    , userId = user_Id\n    , ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , clientType = tostring(customDimensions.clientType)\n    , executionTime = customDimensions.executionTime\n    , executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000\n    , extensionId = customDimensions.extensionId\n    , extensionPublisher = customDimensions.extensionPublisher\n| extend extensionIdsFromJOIN = tostring( extract_all(\"JOIN \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY\\\\$.+?\\\\$(\\\\S+?)\\\"\", sqlStatement))\n| extend tablename = tostring( extract_all(\"FROM \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY(\\\\$.+?)\\\\$\\\\S+?\\\"\", sqlStatement)[0])\n| project extensionPublisher, extensionName, numberOfColumnsSelected, tablename, executionTimeInMS, ObjectType, ObjectId, alObjectName, stackTrace, eventId, clientType, sqlStatement, extensionIdsFromJOIN",
                "usedVariables": [
                    "_endTime",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "0ca7b891-2d18-4df8-b1fa-436c82c90017",
            "title": "Incoming WebServices Calls",
            "visualType": "timechart",
            "pageId": "94d9d8ce-b39a-4f2d-bf77-11c032f0fd9e",
            "layout": {
                "x": 0,
                "y": 28,
                "width": 24,
                "height": 10
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": true,
                "xColumnTitle": "",
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where timestamp >= todatetime(_startTime_Ingestion)\n    and timestamp <= todatetime(_endTime_ingestion) + totimespan(24h) - totimespan(1ms) \n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where operation_Name == \"Web Services Call\" // do note that in a later version of the schema, this field will not be used \n     or customDimensions.eventId == \"RT0008\" // starting from version 16.1, the eventId is used to identity signal types\n| extend  hour = iif(_OnlyWorkingHours == true, hourofday(timestamp), 12)\n| where hour between (6 .. 17)     \n| summarize count() by bin(timestamp,1m)\n//| extend OperationLimit = 600",
                "usedVariables": [
                    "_CompanyName",
                    "_EnvironmentType",
                    "_OnlyWorkingHours",
                    "_endTime_ingestion",
                    "_environmentName",
                    "_publisher",
                    "_startTime_Ingestion"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "430043db-0924-4275-96bd-7c2620dbf3d1",
            "title": "Lock by IsEmpty",
            "visualType": "table",
            "pageId": "5464aca4-0e79-4cc9-acaf-5bfcba11b235",
            "layout": {
                "x": 0,
                "y": 58,
                "width": 24,
                "height": 6
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "// Any CalcSum that we can find in Telemetry that is locking\ntraces\n| where customDimensions.environmentName == \"ProductionIT\"\n| where timestamp between (_startTime .. _endTime) // adjust as needed. The value 30 comes from the app configuration\n| where isnotempty(customDimensions.sqlStatement) \n| where isnotempty(customDimensions.alStackTrace) // only interested in parts in the code we can change\n| where customDimensions.extensionPublisher <> \"Microsoft\"\n| where customDimensions.sqlStatement contains \"SELECT TOP 1 NULL\" //It's an intentional isEmpty\n    and customDimensions.sqlStatement contains \"UPDLOCK\"\n    and customDimensions.sqlStatement startswith \"SELECT\"\n| where not(customDimensions.alObjectType in (\"Page\",\"Page Extension\"))\n| extend sqlStatement = replace_string(tostring(customDimensions.sqlStatement),'XYZ','')\n    , stackTrace = replace_string(tostring(customDimensions.alStackTrace),'XYZ','')\n    , alObjectName = replace_string(tostring(customDimensions.alObjectName),'XYZ','')\n    , extensionName = replace_string(tostring(customDimensions.extensionName),'XYZ','')\n| parse kind=regex sqlStatement with selectPart: string \"FROM\" rest: string\n| extend numberOfColumnsSelected = countof(selectPart, \",\") + 1\n    , eventId = tostring(customDimensions.eventId)\n    , userId = user_Id\n    , ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , clientType = tostring(customDimensions.clientType)\n    , StackTrace = tostring(customDimensions.alStackTrace)\n    , executionTime = customDimensions.executionTime\n    , executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000\n    , extensionId = customDimensions.extensionId\n    , extensionPublisher = customDimensions.extensionPublisher\n| extend extensionIdsFromJOIN = tostring( extract_all(\"JOIN \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY\\\\$.+?\\\\$(\\\\S+?)\\\"\", sqlStatement))\n| extend tablename = tostring( extract_all(\"FROM \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY(\\\\$.+?)\\\\$\\\\S+?\\\"\", sqlStatement)[0])\n| project extensionPublisher, extensionName, numberOfColumnsSelected, tablename, executionTimeInMS, ObjectType, ObjectId, alObjectName, StackTrace, eventId, clientType, sqlStatement, extensionIdsFromJOIN",
                "usedVariables": [
                    "_endTime",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "b6ed5df9-e8cf-49db-b6db-404be057947a",
            "title": "LRQ Count and Average per Day buckets",
            "visualType": "table",
            "pageId": "d1a3fbcf-a4a6-4912-ab95-fd07bfe32849",
            "layout": {
                "x": 0,
                "y": 54,
                "width": 24,
                "height": 10
            },
            "visualOptions": {
                "hideLegend": false,
                "table__enableRenderLinks": false,
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": true,
                "drillthroughDisabled": true,
                "colorRules": [],
                "crossFilter": [
                    {
                        "interaction": "column",
                        "property": "extensionPublisher",
                        "parameterId": "9cc55dcf-17d4-4829-9340-37c385862cdf",
                        "disabled": false
                    }
                ],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let TableCount = (\ntraces\n| where timestamp between (_startTime .. _endTime)// adjust as needed\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.clientType has_any (_ClientType)\n| where operation_Name == 'Long Running Operation (SQL Query)' // do note that in a later version of the schema, this field will not be used \n     or customDimensions.eventId == 'RT0005' // starting from version 16.1, the eventId is used to identity signal types\n| where customDimensions.alObjectId > 0 // filter out internal server calls\n| project \ntimestamp\n, sqlStatement = tostring(customDimensions.sqlStatement)\n, extensionId = tostring(customDimensions.extensionId)\n, extensionPublisher = tostring(customDimensions.extensionPublisher)\n, extensionName = trim('XYZ',tostring(customDimensions.extensionName))\n, alObjectId = tostring(customDimensions.alObjectId)\n, alObjectName = trim('XYZ',tostring(customDimensions.alObjectName))\n, alObjectType = tostring(customDimensions.alObjectType)\n, executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000 //the datatype for executionTime is timespan \n| extend operationType = case(\n  sqlStatement startswith \"UPDATE\", \"UPDATE\"\n, sqlStatement startswith \"DELETE\", \"DELETE\"\n, sqlStatement startswith \"BeginTransaction\", \"BEGIN_TRANS\"\n, sqlStatement matches regex \"INSERT INTO\", \"INSERT\"\n, sqlStatement startswith \"SELECT\", \"SELECT\"\n, sqlStatement matches regex \"IF EXISTS \\\\(SELECT (.*)\\\\) SELECT\", \"SELECT'\"\n, sqlStatement has \"SELECT NEXT VALUE FOR\", \"SELECT_SEQUENCE_VALUE\"\n, sqlStatement has \"SELECT @@SPID\", \"SELECT_SPID\"\n, sqlStatement matches regex \"(.*)WITH\", \"SELECT\"\n, sqlStatement startswith \"CREATE TABLE\", \"CREATE_TABLE\"\n, sqlStatement startswith \"ALTER TABLE\", \"ALTER_TABLE\"\n, sqlStatement startswith \"exec sp_rename\", \"RENAME_TABLE\" \n, sqlStatement matches regex \"(.*)DROP TABLE\", \"DROP_TABLE\"\n, sqlStatement startswith \"SET LOCK_TIMEOUT\", \"SET_LOCK_TIMEOUT\"\n, sqlStatement has \"sp_getapplock\", \"GET_APP_LOCK\"\n, \"UNKNOWN\"\n)\n, dayBin = bin(timestamp,1d)\n| extend day = strcat(strcat(format_datetime(dayBin, \"yyyy-MM-dd\")),\" (Count)\") \n| project-away timestamp, sqlStatement, dayBin, executionTimeInMS\n| sort by day asc \n| evaluate pivot(day, count())\n);\nTableCount\n| join\n(traces\n| where timestamp between (_startTime .. _endTime)// adjust as needed\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.clientType has_any (_ClientType)\n| where operation_Name == 'Long Running Operation (SQL Query)' // do note that in a later version of the schema, this field will not be used \n     or customDimensions.eventId == 'RT0005' // starting from version 16.1, the eventId is used to identity signal types\n| where customDimensions.alObjectId > 0 // filter out internal server calls\n| project \ntimestamp\n, sqlStatement = tostring(customDimensions.sqlStatement)\n, extensionId = tostring(customDimensions.extensionId)\n, extensionPublisher = tostring(customDimensions.extensionPublisher)\n, extensionName = trim('XYZ',tostring(customDimensions.extensionName))\n, alObjectId = tostring(customDimensions.alObjectId)\n, alObjectName = trim('XYZ',tostring(customDimensions.alObjectName))\n, alObjectType = tostring(customDimensions.alObjectType)\n, executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000 //the datatype for executionTime is timespan \n// this part of the query derives various insights from the SQL statement\n| extend operationType = case(\n  sqlStatement startswith \"UPDATE\", \"UPDATE\"\n, sqlStatement startswith \"DELETE\", \"DELETE\"\n, sqlStatement startswith \"BeginTransaction\", \"BEGIN_TRANS\"\n, sqlStatement matches regex \"INSERT INTO\", \"INSERT\"\n, sqlStatement startswith \"SELECT\", \"SELECT\"\n, sqlStatement matches regex \"IF EXISTS \\\\(SELECT (.*)\\\\) SELECT\", \"SELECT'\"\n, sqlStatement has \"SELECT NEXT VALUE FOR\", \"SELECT_SEQUENCE_VALUE\"\n, sqlStatement has \"SELECT @@SPID\", \"SELECT_SPID\"\n, sqlStatement matches regex \"(.*)WITH\", \"SELECT\"\n, sqlStatement startswith \"CREATE TABLE\", \"CREATE_TABLE\"\n, sqlStatement startswith \"ALTER TABLE\", \"ALTER_TABLE\"\n, sqlStatement startswith \"exec sp_rename\", \"RENAME_TABLE\" \n, sqlStatement matches regex \"(.*)DROP TABLE\", \"DROP_TABLE\"\n, sqlStatement startswith \"SET LOCK_TIMEOUT\", \"SET_LOCK_TIMEOUT\"\n, sqlStatement has \"sp_getapplock\", \"GET_APP_LOCK\"\n, \"UNKNOWN\"\n)\n, dayBin = bin(timestamp,1d)\n| extend day = strcat(strcat(format_datetime(dayBin, \"yyyy-MM-dd\")), \" (avg)\")\n| project-away timestamp, sqlStatement, dayBin\n| summarize Average = round(avg(executionTimeInMS),0) by extensionId, extensionPublisher, extensionName, alObjectType, alObjectId, alObjectName, operationType, day\n| sort by day asc \n| evaluate pivot(day,sum(Average))\n)\non\n$left.extensionId == $right.extensionId,\n$left.extensionPublisher == $right.extensionPublisher,\n$left.extensionName == $right.extensionName,\n$left.alObjectType == $right.alObjectType,\n$left.alObjectId == $right.alObjectId,\n$left.alObjectName == $right.alObjectName,\n$left.operationType == $right.operationType\n| project-away extensionId, extensionId1, extensionPublisher1, extensionName1, alObjectType1, alObjectId1, alObjectName1, operationType1 ",
                "usedVariables": [
                    "_ClientType",
                    "_CompanyName",
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_publisher",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "230bf4d2-9d35-46ec-a7b7-c3ee22a9e32d",
            "title": "LRQ Summarized by Object",
            "visualType": "table",
            "pageId": "d1a3fbcf-a4a6-4912-ab95-fd07bfe32849",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 24,
                "height": 10
            },
            "visualOptions": {
                "hideLegend": false,
                "table__enableRenderLinks": true,
                "colorRulesDisabled": false,
                "colorStyle": "light",
                "crossFilterDisabled": true,
                "drillthroughDisabled": true,
                "colorRules": [
                    {
                        "id": "0d9c7c7d-3fb5-4fa6-9308-286adf620062",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "cells",
                        "conditions": [
                            {
                                "operator": ">",
                                "column": "avg_Duration",
                                "values": [
                                    "1000"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "red",
                        "tag": "",
                        "icon": null,
                        "ruleName": ""
                    },
                    {
                        "id": "97b65dad-5ccd-4299-b090-d8943d7cc460",
                        "ruleType": "colorByCondition",
                        "ruleName": "",
                        "applyTo": "rows",
                        "visualType": "table",
                        "conditions": [
                            {
                                "operator": "==",
                                "column": "Isolation Level",
                                "values": [
                                    "UPDLOCK"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "colorStyle": "bold",
                        "applyToColumn": null,
                        "hideText": false,
                        "color": "blue",
                        "tag": "",
                        "icon": null
                    }
                ],
                "crossFilter": [
                    {
                        "interaction": "column",
                        "property": "extensionPublisher",
                        "parameterId": "9cc55dcf-17d4-4829-9340-37c385862cdf",
                        "disabled": false
                    }
                ],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let ObjectNameAndClientLRQCount= ( \ntraces\n| where timestamp between (_startTime .. _endTime)// adjust as needed\n| where customDimensions.eventId == 'RT0005' \n| where customDimensions.alObjectId > 0 \n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.clientType has_any (_ClientType)\n| extend alObjectName = trim('XYZ',tostring(customDimensions.alObjectName))\n| extend eventId = customDimensions.eventId \n, environmentName = customDimensions.environmentName\n, sqlStatement = tostring(customDimensions.sqlStatement)\n, companyName = tostring(customDimensions.companyName)\n, extensionId = customDimensions.extensionId\n, extensionInfo = strcat(customDimensions.extensionName, ' ', customDimensions.extensionVersion, \n    (iff(isnotempty(tostring(customDimensions.extensionPublisher)), strcat(' - ', tostring(customDimensions.extensionPublisher)), '')))\n, alObjectInfo = strcat(customDimensions.alObjectType, ' ', customDimensions.alObjectId, ' - ', customDimensions.alObjectName)\n, alStackTrace = tostring(customDimensions.alStackTrace)\n, clientType = tostring(customDimensions.clientType)\n, alObjectId = customDimensions.alObjectId\n, alObjectType = customDimensions.alObjectType\n, executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000  \n| extend operationType = case(\n    sqlStatement startswith \"UPDATE\", \"UPDATE\"\n    , sqlStatement startswith \"DELETE\", \"DELETE\"\n    , sqlStatement startswith \"BeginTransaction\", \"BEGIN_TRANS\"\n    , sqlStatement matches regex \"INSERT INTO\", \"INSERT\"\n    , sqlStatement startswith \"SELECT\", \"SELECT\"\n    , sqlStatement matches regex \"IF EXISTS \\\\(SELECT (.*)\\\\) SELECT\", \"SELECT'\"\n    , sqlStatement has \"SELECT NEXT VALUE FOR\", \"SELECT_SEQUENCE_VALUE\"\n    , sqlStatement has \"SELECT @@SPID\", \"SELECT_SPID\"\n    , sqlStatement matches regex \"(.*)WITH\", \"SELECT\"\n    , sqlStatement startswith \"CREATE TABLE\", \"CREATE_TABLE\"\n    , sqlStatement startswith \"ALTER TABLE\", \"ALTER_TABLE\"\n    , sqlStatement startswith \"exec sp_rename\", \"RENAME_TABLE\" \n    , sqlStatement matches regex \"(.*)DROP TABLE\", \"DROP_TABLE\"\n    , sqlStatement startswith \"SET LOCK_TIMEOUT\", \"SET_LOCK_TIMEOUT\"\n    , sqlStatement has \"sp_getapplock\", \"GET_APP_LOCK\"\n    , \"UNKNOWN\"\n)\n, withUPDLOCK = iff(customDimensions.sqlStatement has 'UPDLOCK','Yes', 'No')\n, numberOfJoins = countof(sqlStatement, \"JOIN\") \n, numberOfFlowFields = countof(sqlStatement, \"OUTER APPLY\") \n, extensionIdsFromJOIN = tostring( extract_all(\"JOIN \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY\\\\$.+?\\\\$(\\\\S+?)\\\"\", sqlStatement) )\n| parse kind=regex sqlStatement with selectPart:string \"FROM\" rest:string\n| extend numberOfColumnsSelected = case(\n    operationType == \"SELECT\", countof(selectPart,\",\") + 1\n    , operationType == \"SELECT'\", countof(selectPart,\",\") + 1\n    , 0\n)\n, isolationLevel = tostring(case(\n    sqlStatement has 'WITH(UPDLOCK)', 'UPDLOCK'\n  , sqlStatement has 'WITH(READUNCOMMITTED)', 'ReadUncommitted'\n  , sqlStatement has 'WITH(READCOMMITTED)', 'ReadCommitted' // available from 22.0\n  , sqlStatement has 'WITH(REPEATABLEREAD)', 'RepeatableRead' // not sure about this yet\n  , 'Default'\n))\n| sort by executionTimeInMS desc \n| project timestamp, \n    [\"Environment Name\"] = environmentName,\n    [\"Client Type\"] = tostring(clientType), \n    [\"AL Object ID\"] = tostring(alObjectId),\n    [\"AL Object Type\"] = tostring(alObjectType),\n    [\"AL Object Name\"] = tostring(alObjectName),\n    [\"Duration\"] = executionTimeInMS, \n    [\"Type\"] = operationType, \n    [\"FlowFields\"] = numberOfFlowFields, \n    [\"JOINs\"] = numberOfJoins, \n    [\"with UPDLOCK\"] = withUPDLOCK,\n    [\"Company Name\"] = companyName, \n    [\"AL Object Information\"] = alObjectInfo, \n    [\"AL Stack Trace\"] = alStackTrace,\n    [\"Extension Information\"] = extensionInfo,\n    [\"SQL Statement\"] = sqlStatement,\n    [\"Operation Type\"] = operationType,\n    [\"Isolation Level\"] = isolationLevel,\n    [\"User Telemetry ID\"] = user_Id,\n    [\"Session Id\"] = session_Id\n| summarize count(), round(avg(Duration),0) by ['AL Object ID'], ['AL Object Type'], ['AL Object Name'], ['Client Type'], ['Operation Type'], ['Isolation Level'], ['SQL Statement']\n| sort by count_ desc \n);\nObjectNameAndClientLRQCount\n| extend Percentage = round(count_ *100 / toscalar(ObjectNameAndClientLRQCount | summarize sum(count_)),2)\n| sort by count_ desc",
                "usedVariables": [
                    "_ClientType",
                    "_CompanyName",
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_publisher",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "6c7fe09d-8948-4d6a-b89f-dd20a39b8349",
            "title": "Today SQL Statistics",
            "visualType": "multistat",
            "pageId": "f5885bb6-1db1-42c3-888b-fa857a7b39fd",
            "layout": {
                "x": 10,
                "y": 0,
                "width": 14,
                "height": 4
            },
            "visualOptions": {
                "multiStat__textSize": "large",
                "multiStat__valueColumn": null,
                "colorRulesDisabled": true,
                "colorRules": [],
                "colorStyle": "light",
                "multiStat__displayOrientation": "horizontal",
                "multiStat__labelColumn": null,
                "multiStat__slot": {
                    "width": 3,
                    "height": 1
                }
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let utcOffsetHours = 2;\nlet _StartOfDay = datetime_add('hour',-utcOffsetHours,startofday(now()));\nlet _EndOfDay = datetime_add('hour',-utcOffsetHours,endofday(now()));\nlet data = traces\n| where timestamp between (_StartOfDay .. _EndOfDay)\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where isnotempty(customDimensions.aadTenantId) // filter away signal from Docker sandboxes\n| where customDimensions.alObjectId != '0' \n| where isnotempty(customDimensions.alObjectId)\n| extend Titolo = tostring(message);\ndata\n| where customDimensions.eventId in~ ('RT0028', 'RT0005', 'RT0012')\n| summarize count() by Titolo\n\n\n",
                "usedVariables": [
                    "_CompanyName",
                    "_EnvironmentType",
                    "_environmentName",
                    "_publisher"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "9eb001bc-9d0f-43f7-9ad7-c82e7b6a5b0a",
            "title": "SQL Deadlocks by Table",
            "visualType": "table",
            "pageId": "5464aca4-0e79-4cc9-acaf-5bfcba11b235",
            "layout": {
                "x": 16,
                "y": 0,
                "width": 8,
                "height": 8
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let TableDeadlocked = (\ntraces\n| where timestamp between (_startTime .. _endTime)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.eventId == 'RT0028'\n| where isnotempty(customDimensions.aadTenantId) // filter away signal from Docker sandboxes\n| where customDimensions.alObjectId != '0' \n| where isnotempty(customDimensions.alObjectId)\n| extend TenantId = strcat(customDimensions.aadTenantId)\n    , ExtensionId = tostring(customDimensions.extensionId)\n    , ExtensionName = tostring(customDimensions.extensionName)\n    , ExtensionVersion = tostring(customDimensions.extensionVersion)\n    , ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = tostring(customDimensions.alObjectName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , companyName = tostring(customDimensions.companyName)        \n    , numberOfJoins = countof(tostring(customDimensions.sqlStatement), \"JOIN\")\n    , EventId = tostring(customDimensions.eventId)\n    , StackTrace = tostring(customDimensions.alStackTrace)\n    , userId = user_Id\n| extend operationType = case(\n    sqlStatement startswith \"UPDATE\", \"UPDATE\"\n    , sqlStatement startswith \"DELETE\", \"DELETE\"\n    , sqlStatement startswith \"BeginTransaction\", \"BEGIN_TRANS\"\n    , sqlStatement matches regex \"INSERT INTO\", \"INSERT\"\n    , sqlStatement startswith \"SELECT\", \"SELECT\"\n    , sqlStatement matches regex \"IF EXISTS \\\\(SELECT (.*)\\\\) SELECT\", \"SELECT'\"\n    , sqlStatement has \"SELECT NEXT VALUE FOR\", \"SELECT_SEQUENCE_VALUE\"\n    , sqlStatement has \"SELECT @@SPID\", \"SELECT_SPID\"\n    , sqlStatement matches regex \"(.*)WITH\", \"SELECT\"\n    , sqlStatement startswith \"CREATE TABLE\", \"CREATE_TABLE\"\n    , sqlStatement startswith \"ALTER TABLE\", \"ALTER_TABLE\"\n    , sqlStatement startswith \"exec sp_rename\", \"RENAME_TABLE\" \n    , sqlStatement matches regex \"(.*)DROP TABLE\", \"DROP_TABLE\"\n    , sqlStatement startswith \"SET LOCK_TIMEOUT\", \"SET_LOCK_TIMEOUT\"\n    , sqlStatement has \"sp_getapplock\", \"GET_APP_LOCK\"\n    , \"UNKNOWN\"\n    ) \n| parse kind=regex sqlStatement with selectPart: string \"FROM \\\"SQLDATABASE\\\".dbo.\\\"CURRENTCOMPANY\\\\$\" tablenamewithjoins: string \"\\\\$\" space: string\n| parse kind=regex tablenamewithjoins with tablenaamenojoins: string \"\\\\$\" newspace : string \n| parse kind=regex tablenaamenojoins with space2: string \"\\\\$\" onlytablenamenojoins: string \n//| parse kind=regex tablenamewithjoins with stringtoeliminate: string \"\\\\$\" tablenamewithoutjoins: string\n| extend tablename = case(\n    tablenamewithjoins contains \"$\", onlytablenamenojoins\n    , tablenamewithjoins \n)\n| extend splitStacktrace = split(customDimensions.alStackTrace, \"\\n\")\n| extend lengthStacktrace = array_length(splitStacktrace)\n| extend\n    topOfStackline = tostring(splitStacktrace[0]),\n    bottomOfStackline = tostring(splitStacktrace[lengthStacktrace - 1])\n| extend topOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, topOfStackline)\n| extend topOfStackLineNumber = extract(' line (\\\\d+)', 1, topOfStackline)\n| extend topOfStackExtensionName = case (\n    isnotempty(topOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, topOfStackline),\n    extract(' - (.+) by', 1, topOfStackline)\n    )\n| extend topOfStackPublisher = extract('.+ by (.+)', 1, topOfStackline)\n| extend topOfStackWhatWasCalled = case(\n    isnotempty(topOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, topOfStackline),\n    isnotempty(topOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, topOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, topOfStackline)\n    )\n| extend bottomOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackLineNumber = extract(' line (\\\\d+)', 1, bottomOfStackline)\n| extend bottomOfStackExtensionName = case (\n    isnotempty(bottomOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, bottomOfStackline),\n    extract(' - (.+) by', 1, bottomOfStackline)\n    )\n| extend bottomOfStackPublisher = extract('.+ by (.+)', 1, bottomOfStackline)\n| extend bottomOfStackWhatWasCalled = case(\n    isnotempty(bottomOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, bottomOfStackline),\n    isnotempty(bottomOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, bottomOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, bottomOfStackline)\n    )\n| extend SourceProcess = strcat(bottomOfStackWhatWasCalled , \" - \", bottomOfStackObjectType, \" \", bottomOfStackObjectId, \" \", bottomOfStackObjectName, \" (\", bottomOfStackExtensionName, \")\")\n    , LockingObject = strcat(topOfStackObjectType, \" '\", topOfStackObjectName,\"'\")\n    , LockingObjectId = tostring(topOfStackObjectId)\n    , LockingObjectMethod = tostring(topOfStackWhatWasCalled)\n    , LockingObjectExtension = tostring(topOfStackExtensionName)\n| where tablename <> \"\"\n| summarize Count = count() by tablename\n);\nTableDeadlocked\n| extend Percentage = round(Count *100 / toscalar(TableDeadlocked | summarize sum(Count)),2)\n| sort by Count desc \n",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "b5ef2a52-4641-4f7f-8111-ecfad3ea65d1",
            "title": "Page performance per Day",
            "visualType": "column",
            "pageId": "94d9d8ce-b39a-4f2d-bf77-11c032f0fd9e",
            "layout": {
                "x": 0,
                "y": 46,
                "width": 24,
                "height": 12
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": false,
                "xColumnTitle": "",
                "xColumn": "timestamp",
                "yColumns": [
                    "count_"
                ],
                "seriesColumns": [
                    "perfBucket"
                ],
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "pageViews\n| where timestamp >= todatetime(_startTime_Ingestion)\n    and timestamp <= todatetime(_endTime_ingestion) + totimespan(24h) - totimespan(1ms) \n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentName has_any (_environmentName)\n| where toint(customDimensions.alObjectId) > 0\n| where customDimensions.pageType !contains \"eport\"\n//| where customDimensions.designerLevel == \"None\"\n| extend bucketIndex = case(\n    performanceBucket == \">=5min\", \"11\"\n    , performanceBucket == \"2min-5min\", \"10\"\n    , performanceBucket == \"1min-2min\", \"09\"\n    , performanceBucket == \"30sec-1min\", \"08\"\n    , performanceBucket == \"15sec-30sec\", \"07\"\n    , performanceBucket == \"7sec-15sec\", \"06\"\n    , performanceBucket == \"3sec-7sec\", \"05\"\n    , performanceBucket == \"1sec-3sec\", \"04\"\n    , performanceBucket == \"500ms-1sec\", \"03\"\n    , performanceBucket == \"250ms-500ms\", \"02\"\n    , performanceBucket == \"<250ms\", \"01\"\n    , \"00\")\n| extend perfBucket = strcat(bucketIndex, ': ', performanceBucket)\n| extend  hour = iif(_OnlyWorkingHours == true, hourofday(timestamp), 12)\n| where hour between (6 .. 17)\n| summarize count() by perfBucket, bin(timestamp,1d)\n| sort by perfBucket asc ",
                "usedVariables": [
                    "_CompanyName",
                    "_OnlyWorkingHours",
                    "_endTime_ingestion",
                    "_environmentName",
                    "_publisher",
                    "_startTime_Ingestion"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "65f3f1c6-55d9-4799-a87a-667780537c1b",
            "title": "Outgoing WS Errors",
            "visualType": "table",
            "pageId": "61a90ca3-7409-4c63-93a7-c415f15e4ea3",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 24,
                "height": 8
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": true,
                "drillthroughDisabled": true,
                "crossFilter": [
                    {
                        "interaction": "column",
                        "property": "count_",
                        "disabled": false
                    }
                ],
                "drillthrough": [
                    {
                        "pairs": [
                            {
                                "parameterId": "faae011a-19c6-437e-a04c-d7de238ed7ad",
                                "property": "timestamp"
                            }
                        ],
                        "destinationPages": [
                            "a1b9eab8-5e92-446b-bdd0-6df8160c9c54"
                        ],
                        "disabled": false
                    }
                ],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where timestamp between (_startTime .. _endTime)\n    and customDimensions.eventId == 'RT0019'\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| extend extensionId = tostring(customDimensions.extensionId)\n    , extensionName = trim('XYZ',tostring(customDimensions.extensionName))\n    , extensionPublisher = trim('XYZ',tostring(customDimensions.extensionPublisher))\n    , alObjectType = tostring(customDimensions.alObjectType)\n    , alObjectId = tostring(customDimensions.alObjectId)\n    , alObjectName = trim('XYZ',tostring(customDimensions.alObjectName))\n    , httpStatusCode = toint(customDimensions.httpStatusCode)\n    , clientType = tostring(customDimensions.clientType)\n    , method = tostring(customDimensions.httpMethod)\n    , endpoint = tostring(customDimensions.endpoint)\n| where httpStatusCode !between (200 .. 299)\n| summarize count() by httpStatusCode, clientType, method, endpoint, extensionPublisher, extensionName, extensionId, alObjectType, alObjectId, alObjectName\n| project httpStatusCode, count_, endpoint, clientType, method, alObjectId, alObjectName, alObjectType, extensionName, extensionId\n\n\n",
                "usedVariables": [
                    "_CompanyName",
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_publisher",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "9f1a080f-e85b-4a2a-b944-3ff24df8966b",
            "title": "LRAM by Process per hour",
            "visualType": "timechart",
            "pageId": "a1b9eab8-5e92-446b-bdd0-6df8160c9c54",
            "layout": {
                "x": 0,
                "y": 26,
                "width": 24,
                "height": 13
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": false,
                "xColumnTitle": "",
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "// Long running queries by Source Process - still needs some work\n// Last Long running AL methods\n// Calculate Time in UTC Time\nlet utcOffsetHours = 2;\nlet _StartOfDay = datetime_add('hour',-utcOffsetHours,startofday(_SelectedDateTime));\nlet _EndOfDay = datetime_add('hour',-utcOffsetHours,endofday(_SelectedDateTime));\ntraces\n| where timestamp between (_StartOfDay .. _EndOfDay)\n| where customDimensions has 'RT0018'\n| where customDimensions.eventId == 'RT0018'\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.companyName has_any (_CompanyName)\n| extend ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = replace_string(replace_string(replace_string(tostring(customDimensions.alObjectName),'XYZ',''),'xxxx','xxx'),'xxxxx','yyyyy')\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , numberOfJoins = countof(tostring(customDimensions.sqlStatement), \"JOIN\")\n    , EventId = tostring(customDimensions.eventId)\n    , StackTrace = replace_string(replace_string(replace_string(tostring(customDimensions.alStackTrace),'XYZ',''),'xxxx','xxx'),'xxxxx','yyyyy')\n    , exclusiveTime = customDimensions.exclusiveTime // This dimension was introduced in Business Central 2023 release wave 1, version 22.1. Backported to version 21.6\n    , exclusiveTimeInMS = toreal(totimespan(customDimensions.exclusiveTime))/10000 //the datatype for exclusiveTime is timespan \n    // exclusiveTime is the total time of the operation, including wait time due to client callback\n    , totalTime = customDimensions.executionTime\n    , totalTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000 //the datatype for executionTime is timespan \n| where ObjectId <> \"18122317\"\n| extend operationType = case(\n    sqlStatement startswith \"UPDATE\", \"UPDATE\"\n    , sqlStatement startswith \"DELETE\", \"DELETE\"\n    , sqlStatement startswith \"BeginTransaction\", \"BEGIN_TRANS\"\n    , sqlStatement matches regex \"INSERT INTO\", \"INSERT\"\n    , sqlStatement startswith \"SELECT\", \"SELECT\"\n    , sqlStatement matches regex \"IF EXISTS \\\\(SELECT (.*)\\\\) SELECT\", \"SELECT'\"\n    , sqlStatement has \"SELECT NEXT VALUE FOR\", \"SELECT_SEQUENCE_VALUE\"\n    , sqlStatement has \"SELECT @@SPID\", \"SELECT_SPID\"\n    , sqlStatement matches regex \"(.*)WITH\", \"SELECT\"\n    , sqlStatement startswith \"CREATE TABLE\", \"CREATE_TABLE\"\n    , sqlStatement startswith \"ALTER TABLE\", \"ALTER_TABLE\"\n    , sqlStatement startswith \"exec sp_rename\", \"RENAME_TABLE\" \n    , sqlStatement matches regex \"(.*)DROP TABLE\", \"DROP_TABLE\"\n    , sqlStatement startswith \"SET LOCK_TIMEOUT\", \"SET_LOCK_TIMEOUT\"\n    , sqlStatement has \"sp_getapplock\", \"GET_APP_LOCK\"\n    , \"UNKNOWN\"\n    ) \n| parse kind=regex sqlStatement with selectPart: string \"FROM \\\"SQLDATABASE\\\".dbo.\\\"CURRENTCOMPANY\\\\$\" tablename: string \"\\\\$\" space: string\n| extend splitStacktrace = split(customDimensions.alStackTrace, \"\\n\")\n| extend lengthStacktrace = array_length(splitStacktrace)\n| extend\n    topOfStackline = tostring(splitStacktrace[0]),\n    bottomOfStackline = tostring(splitStacktrace[lengthStacktrace - 1])\n| extend topOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, topOfStackline)\n| extend topOfStackLineNumber = extract(' line (\\\\d+)', 1, topOfStackline)\n| extend topOfStackExtensionName = case (\n    isnotempty(topOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, topOfStackline),\n    extract(' - (.+) by', 1, topOfStackline)\n    )\n| extend topOfStackPublisher = extract('.+ by (.+)', 1, topOfStackline)\n| extend topOfStackWhatWasCalled = case(\n    isnotempty(topOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, topOfStackline),\n    isnotempty(topOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, topOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, topOfStackline)\n    )\n| extend bottomOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackLineNumber = extract(' line (\\\\d+)', 1, bottomOfStackline)\n| extend bottomOfStackExtensionName = case (\n    isnotempty(bottomOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, bottomOfStackline),\n    extract(' - (.+) by', 1, bottomOfStackline)\n    )\n| extend bottomOfStackPublisher = extract('.+ by (.+)', 1, bottomOfStackline)\n| extend bottomOfStackWhatWasCalled = case(\n    isnotempty(bottomOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, bottomOfStackline),\n    isnotempty(bottomOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, bottomOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, bottomOfStackline)\n    )\n| extend SourceProcess = strcat(bottomOfStackWhatWasCalled , \" - \", bottomOfStackObjectType, \" \", bottomOfStackObjectId, \" \", bottomOfStackObjectName, \" (\", bottomOfStackExtensionName, \")\")\n    , LockingObject = strcat(topOfStackWhatWasCalled , \" - \", topOfStackObjectType, \" \", topOfStackObjectId, \" \", topOfStackObjectName, \" (\", topOfStackExtensionName, \")\")\n| project\n    timestamp,\n    ObjectType,\n    ObjectId,\n    ObjectName,\n    operationType,\n    numberOfJoins,\n    LockingObject,\n    SourceProcess,\n    StackTrace,\n    customDimensions,\n    totalTimeInMS\n| summarize count = count() by [\"Source Process\"] = replace_string(replace_string(replace_string(SourceProcess,'XYZ',''),'xxxx','xxx'),'xxxxx','yyyyy'), bin(timestamp,1h)\n| render timechart ",
                "usedVariables": [
                    "_CompanyName",
                    "_EnvironmentType",
                    "_SelectedDateTime",
                    "_environmentName"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "a692c101-13f5-4664-be6d-8202441261b7",
            "title": "LRQ By Process",
            "visualType": "table",
            "pageId": "a1b9eab8-5e92-446b-bdd0-6df8160c9c54",
            "layout": {
                "x": 0,
                "y": 39,
                "width": 24,
                "height": 13
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "// Long running queries by Source Process - still needs some work\n// Last Long running AL methods\n// Calculate Time in UTC Time\nlet utcOffsetHours = 2;\nlet _StartOfDay = datetime_add('hour',-utcOffsetHours,startofday(_SelectedDateTime));\nlet _EndOfDay = datetime_add('hour',-utcOffsetHours,endofday(_SelectedDateTime));\ntraces\n| where timestamp between (_StartOfDay .. _EndOfDay)\n| where customDimensions has 'RT0005'\n| where customDimensions.eventId == 'RT0005'\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.companyName has_any (_CompanyName)\n| extend ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = replace_string(replace_string(replace_string(tostring(customDimensions.alObjectName),'XYZ',''),'xxxx','xxx'),'xxxxx','yyyyy')\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , numberOfJoins = countof(tostring(customDimensions.sqlStatement), \"JOIN\")\n    , EventId = tostring(customDimensions.eventId)\n    , StackTrace = replace_string(replace_string(replace_string(tostring(customDimensions.alStackTrace),'XYZ',''),'xxxx','xxx'),'xxxxx','yyyyy')\n    , exclusiveTime = customDimensions.exclusiveTime // This dimension was introduced in Business Central 2023 release wave 1, version 22.1. Backported to version 21.6\n    , exclusiveTimeInMS = toreal(totimespan(customDimensions.exclusiveTime))/10000 //the datatype for exclusiveTime is timespan \n    // exclusiveTime is the total time of the operation, including wait time due to client callback\n    , totalTime = customDimensions.executionTime\n    , totalTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000 //the datatype for executionTime is timespan \n| where ObjectId <> \"18122317\"\n| extend operationType = case(\n    sqlStatement startswith \"UPDATE\", \"UPDATE\"\n    , sqlStatement startswith \"DELETE\", \"DELETE\"\n    , sqlStatement startswith \"BeginTransaction\", \"BEGIN_TRANS\"\n    , sqlStatement matches regex \"INSERT INTO\", \"INSERT\"\n    , sqlStatement startswith \"SELECT\", \"SELECT\"\n    , sqlStatement matches regex \"IF EXISTS \\\\(SELECT (.*)\\\\) SELECT\", \"SELECT'\"\n    , sqlStatement has \"SELECT NEXT VALUE FOR\", \"SELECT_SEQUENCE_VALUE\"\n    , sqlStatement has \"SELECT @@SPID\", \"SELECT_SPID\"\n    , sqlStatement matches regex \"(.*)WITH\", \"SELECT\"\n    , sqlStatement startswith \"CREATE TABLE\", \"CREATE_TABLE\"\n    , sqlStatement startswith \"ALTER TABLE\", \"ALTER_TABLE\"\n    , sqlStatement startswith \"exec sp_rename\", \"RENAME_TABLE\" \n    , sqlStatement matches regex \"(.*)DROP TABLE\", \"DROP_TABLE\"\n    , sqlStatement startswith \"SET LOCK_TIMEOUT\", \"SET_LOCK_TIMEOUT\"\n    , sqlStatement has \"sp_getapplock\", \"GET_APP_LOCK\"\n    , \"UNKNOWN\"\n    ) \n| parse kind=regex sqlStatement with selectPart: string \"FROM \\\"SQLDATABASE\\\".dbo.\\\"CURRENTCOMPANY\\\\$\" tablename: string \"\\\\$\" space: string\n| extend splitStacktrace = split(customDimensions.alStackTrace, \"\\n\")\n| extend lengthStacktrace = array_length(splitStacktrace)\n| extend\n    topOfStackline = tostring(splitStacktrace[0]),\n    bottomOfStackline = tostring(splitStacktrace[lengthStacktrace - 1])\n| extend topOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, topOfStackline)\n| extend topOfStackLineNumber = extract(' line (\\\\d+)', 1, topOfStackline)\n| extend topOfStackExtensionName = case (\n    isnotempty(topOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, topOfStackline),\n    extract(' - (.+) by', 1, topOfStackline)\n    )\n| extend topOfStackPublisher = extract('.+ by (.+)', 1, topOfStackline)\n| extend topOfStackWhatWasCalled = case(\n    isnotempty(topOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, topOfStackline),\n    isnotempty(topOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, topOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, topOfStackline)\n    )\n| extend bottomOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackLineNumber = extract(' line (\\\\d+)', 1, bottomOfStackline)\n| extend bottomOfStackExtensionName = case (\n    isnotempty(bottomOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, bottomOfStackline),\n    extract(' - (.+) by', 1, bottomOfStackline)\n    )\n| extend bottomOfStackPublisher = extract('.+ by (.+)', 1, bottomOfStackline)\n| extend bottomOfStackWhatWasCalled = case(\n    isnotempty(bottomOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, bottomOfStackline),\n    isnotempty(bottomOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, bottomOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, bottomOfStackline)\n    )\n| extend SourceProcess = strcat(bottomOfStackWhatWasCalled , \" - \", bottomOfStackObjectType, \" \", bottomOfStackObjectId, \" \", bottomOfStackObjectName, \" (\", bottomOfStackExtensionName, \")\")\n    , LockingObject = strcat(topOfStackWhatWasCalled , \" - \", topOfStackObjectType, \" \", topOfStackObjectId, \" \", topOfStackObjectName, \" (\", topOfStackExtensionName, \")\")\n| project\n    timestamp,\n    ObjectType,\n    ObjectId,\n    ObjectName,\n    operationType,\n    numberOfJoins,\n    LockingObject,\n    SourceProcess,\n    StackTrace,\n    customDimensions,\n    totalTimeInMS\n| summarize count = count(), avgTotalTimeInMS = toint(avg(totalTimeInMS)) by ObjectType, ObjectId, ObjectName, SourceMethod = replace_string(replace_string(replace_string(SourceProcess,'XYZ',''),'xxxx','xxx'),'xxxxx','yyyyy'), StackTrace\n| order by ['count'] desc \n\n\n\n\n",
                "usedVariables": [
                    "_CompanyName",
                    "_EnvironmentType",
                    "_SelectedDateTime",
                    "_environmentName"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "ada8ab7e-45d0-4c85-b21f-48550df5ad8a",
            "title": "LRQ by Process per hour",
            "visualType": "timechart",
            "pageId": "a1b9eab8-5e92-446b-bdd0-6df8160c9c54",
            "layout": {
                "x": 0,
                "y": 52,
                "width": 24,
                "height": 13
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": false,
                "xColumnTitle": "",
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": [
                    "ObjectType",
                    "ObjectId",
                    "ObjectName",
                    "Source Process"
                ],
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "// Long running queries by Source Process - still needs some work\n// Last Long running AL methods\n// Calculate Time in UTC Time\nlet utcOffsetHours = 2;\nlet _StartOfDay = datetime_add('hour',-utcOffsetHours,startofday(_SelectedDateTime));\nlet _EndOfDay = datetime_add('hour',-utcOffsetHours,endofday(_SelectedDateTime));\ntraces\n| where timestamp between (_StartOfDay .. _EndOfDay)\n| where customDimensions has 'RT0005'\n| where customDimensions.eventId == 'RT0005'\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.companyName has_any (_CompanyName)\n| extend ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = replace_string(replace_string(replace_string(tostring(customDimensions.alObjectName),'XYZ',''),'xxxx','xxx'),'xxxxx','yyyyy')\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , numberOfJoins = countof(tostring(customDimensions.sqlStatement), \"JOIN\")\n    , EventId = tostring(customDimensions.eventId)\n    , StackTrace = replace_string(replace_string(replace_string(tostring(customDimensions.alStackTrace),'XYZ',''),'xxxx','xxx'),'xxxxx','yyyyy')\n    , exclusiveTime = customDimensions.exclusiveTime // This dimension was introduced in Business Central 2023 release wave 1, version 22.1. Backported to version 21.6\n    , exclusiveTimeInMS = toreal(totimespan(customDimensions.exclusiveTime))/10000 //the datatype for exclusiveTime is timespan \n    // exclusiveTime is the total time of the operation, including wait time due to client callback\n    , totalTime = customDimensions.executionTime\n    , totalTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000 //the datatype for executionTime is timespan \n| where ObjectId <> \"18122317\"\n| extend operationType = case(\n    sqlStatement startswith \"UPDATE\", \"UPDATE\"\n    , sqlStatement startswith \"DELETE\", \"DELETE\"\n    , sqlStatement startswith \"BeginTransaction\", \"BEGIN_TRANS\"\n    , sqlStatement matches regex \"INSERT INTO\", \"INSERT\"\n    , sqlStatement startswith \"SELECT\", \"SELECT\"\n    , sqlStatement matches regex \"IF EXISTS \\\\(SELECT (.*)\\\\) SELECT\", \"SELECT'\"\n    , sqlStatement has \"SELECT NEXT VALUE FOR\", \"SELECT_SEQUENCE_VALUE\"\n    , sqlStatement has \"SELECT @@SPID\", \"SELECT_SPID\"\n    , sqlStatement matches regex \"(.*)WITH\", \"SELECT\"\n    , sqlStatement startswith \"CREATE TABLE\", \"CREATE_TABLE\"\n    , sqlStatement startswith \"ALTER TABLE\", \"ALTER_TABLE\"\n    , sqlStatement startswith \"exec sp_rename\", \"RENAME_TABLE\" \n    , sqlStatement matches regex \"(.*)DROP TABLE\", \"DROP_TABLE\"\n    , sqlStatement startswith \"SET LOCK_TIMEOUT\", \"SET_LOCK_TIMEOUT\"\n    , sqlStatement has \"sp_getapplock\", \"GET_APP_LOCK\"\n    , \"UNKNOWN\"\n    ) \n| parse kind=regex sqlStatement with selectPart: string \"FROM \\\"SQLDATABASE\\\".dbo.\\\"CURRENTCOMPANY\\\\$\" tablename: string \"\\\\$\" space: string\n| extend splitStacktrace = split(customDimensions.alStackTrace, \"\\n\")\n| extend lengthStacktrace = array_length(splitStacktrace)\n| extend\n    topOfStackline = tostring(splitStacktrace[0]),\n    bottomOfStackline = tostring(splitStacktrace[lengthStacktrace - 1])\n| extend topOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, topOfStackline)\n| extend topOfStackLineNumber = extract(' line (\\\\d+)', 1, topOfStackline)\n| extend topOfStackExtensionName = case (\n    isnotempty(topOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, topOfStackline),\n    extract(' - (.+) by', 1, topOfStackline)\n    )\n| extend topOfStackPublisher = extract('.+ by (.+)', 1, topOfStackline)\n| extend topOfStackWhatWasCalled = case(\n    isnotempty(topOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, topOfStackline),\n    isnotempty(topOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, topOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, topOfStackline)\n    )\n| extend bottomOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackLineNumber = extract(' line (\\\\d+)', 1, bottomOfStackline)\n| extend bottomOfStackExtensionName = case (\n    isnotempty(bottomOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, bottomOfStackline),\n    extract(' - (.+) by', 1, bottomOfStackline)\n    )\n| extend bottomOfStackPublisher = extract('.+ by (.+)', 1, bottomOfStackline)\n| extend bottomOfStackWhatWasCalled = case(\n    isnotempty(bottomOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, bottomOfStackline),\n    isnotempty(bottomOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, bottomOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, bottomOfStackline)\n    )\n| extend SourceProcess = strcat(bottomOfStackWhatWasCalled , \" - \", bottomOfStackObjectType, \" \", bottomOfStackObjectId, \" \", bottomOfStackObjectName, \" (\", bottomOfStackExtensionName, \")\")\n    , LockingObject = strcat(topOfStackWhatWasCalled , \" - \", topOfStackObjectType, \" \", topOfStackObjectId, \" \", topOfStackObjectName, \" (\", topOfStackExtensionName, \")\")\n| project\n    timestamp,\n    ObjectType,\n    ObjectId,\n    ObjectName,\n    operationType,\n    numberOfJoins,\n    LockingObject,\n    SourceProcess,\n    StackTrace,\n    customDimensions,\n    totalTimeInMS\n| where SourceProcess <> \" -    ()\"\n| summarize count = count() by ObjectType, ObjectId, ObjectName, [\"Source Process\"] = replace_string(replace_string(replace_string(SourceProcess,'XYZ',''),'xxxx','xxx'),'xxxxx','yyyyy'), bin(timestamp,1h)\n| render timechart ",
                "usedVariables": [
                    "_CompanyName",
                    "_EnvironmentType",
                    "_SelectedDateTime",
                    "_environmentName"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "9cf51777-ecbe-4d85-8722-20a4b79cbe1f",
            "title": "LRQ avg duration Summarized by Object per Hour",
            "visualType": "timechart",
            "pageId": "d1a3fbcf-a4a6-4912-ab95-fd07bfe32849",
            "layout": {
                "x": 0,
                "y": 10,
                "width": 24,
                "height": 10
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": false,
                "xColumnTitle": "",
                "xColumn": null,
                "yColumns": [
                    "avg_Duration"
                ],
                "seriesColumns": [
                    "AL Object ID",
                    "AL Object Name"
                ],
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": true,
                "drillthroughDisabled": true,
                "crossFilter": [
                    {
                        "interaction": "column",
                        "property": "extensionPublisher",
                        "parameterId": "9cc55dcf-17d4-4829-9340-37c385862cdf",
                        "disabled": false
                    }
                ],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where timestamp between (_startTime .. _endTime)// adjust as needed\n| where customDimensions.eventId == 'RT0005' \n| where customDimensions.alObjectId > 0 \n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.clientType has_any (_ClientType)\n| extend alObjectName = trim('XYZ',tostring(customDimensions.alObjectName))\n| extend eventId = customDimensions.eventId \n, environmentName = customDimensions.environmentName\n, sqlStatement = tostring(customDimensions.sqlStatement)\n, companyName = tostring(customDimensions.companyName)\n, extensionId = customDimensions.extensionId\n, extensionInfo = strcat(customDimensions.extensionName, ' ', customDimensions.extensionVersion, \n    (iff(isnotempty(tostring(customDimensions.extensionPublisher)), strcat(' - ', tostring(customDimensions.extensionPublisher)), '')))\n, alObjectInfo = strcat(customDimensions.alObjectType, ' ', customDimensions.alObjectId, ' - ', customDimensions.alObjectName)\n, alStackTrace = tostring(customDimensions.alStackTrace)\n, clientType = tostring(customDimensions.clientType)\n, alObjectId = customDimensions.alObjectId\n, alObjectType = customDimensions.alObjectType\n, executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000  \n| extend operationType = case(\n    sqlStatement startswith \"UPDATE\", \"UPDATE\"\n    , sqlStatement startswith \"DELETE\", \"DELETE\"\n    , sqlStatement startswith \"BeginTransaction\", \"BEGIN_TRANS\"\n    , sqlStatement matches regex \"INSERT INTO\", \"INSERT\"\n    , sqlStatement startswith \"SELECT\", \"SELECT\"\n    , sqlStatement matches regex \"IF EXISTS \\\\(SELECT (.*)\\\\) SELECT\", \"SELECT'\"\n    , sqlStatement has \"SELECT NEXT VALUE FOR\", \"SELECT_SEQUENCE_VALUE\"\n    , sqlStatement has \"SELECT @@SPID\", \"SELECT_SPID\"\n    , sqlStatement matches regex \"(.*)WITH\", \"SELECT\"\n    , sqlStatement startswith \"CREATE TABLE\", \"CREATE_TABLE\"\n    , sqlStatement startswith \"ALTER TABLE\", \"ALTER_TABLE\"\n    , sqlStatement startswith \"exec sp_rename\", \"RENAME_TABLE\" \n    , sqlStatement matches regex \"(.*)DROP TABLE\", \"DROP_TABLE\"\n    , sqlStatement startswith \"SET LOCK_TIMEOUT\", \"SET_LOCK_TIMEOUT\"\n    , sqlStatement has \"sp_getapplock\", \"GET_APP_LOCK\"\n    , \"UNKNOWN\"\n)\n, withUPDLOCK = iff(customDimensions.sqlStatement has 'UPDLOCK','Yes', 'No')\n, numberOfJoins = countof(sqlStatement, \"JOIN\") \n, numberOfFlowFields = countof(sqlStatement, \"OUTER APPLY\") \n, extensionIdsFromJOIN = tostring( extract_all(\"JOIN \\\"SQLDATABASE\\\"\\\\.dbo\\\\.\\\"CURRENTCOMPANY\\\\$.+?\\\\$(\\\\S+?)\\\"\", sqlStatement) )\n| parse kind=regex sqlStatement with selectPart:string \"FROM\" rest:string\n| extend numberOfColumnsSelected = case(\n    operationType == \"SELECT\", countof(selectPart,\",\") + 1\n    , operationType == \"SELECT'\", countof(selectPart,\",\") + 1\n    , 0\n)\n, isolationLevel = tostring(case(\n    sqlStatement has 'WITH(UPDLOCK)', 'UPDLOCK'\n  , sqlStatement has 'WITH(READUNCOMMITTED)', 'ReadUncommitted'\n  , sqlStatement has 'WITH(READCOMMITTED)', 'ReadCommitted' // available from 22.0\n  , sqlStatement has 'WITH(REPEATABLEREAD)', 'RepeatableRead' // not sure about this yet\n  , 'Default'\n))\n| sort by executionTimeInMS desc \n| project timestamp, \n    [\"Environment Name\"] = environmentName,\n    [\"Client Type\"] = tostring(clientType), \n    [\"AL Object ID\"] = tostring(alObjectId),\n    [\"AL Object Type\"] = tostring(alObjectType),\n    [\"AL Object Name\"] = tostring(alObjectName),\n    [\"Duration\"] = executionTimeInMS, \n    [\"Type\"] = operationType, \n    [\"FlowFields\"] = numberOfFlowFields, \n    [\"JOINs\"] = numberOfJoins, \n    [\"with UPDLOCK\"] = withUPDLOCK,\n    [\"Company Name\"] = companyName, \n    [\"AL Object Information\"] = alObjectInfo, \n    [\"AL Stack Trace\"] = alStackTrace,\n    [\"Extension Information\"] = extensionInfo,\n    [\"SQL Statement\"] = sqlStatement,\n    [\"Operation Type\"] = operationType,\n    [\"Isolation Level\"] = isolationLevel,\n    [\"User Telemetry ID\"] = user_Id,\n    [\"Session Id\"] = session_Id\n| summarize count(), round(avg(Duration),0) by ['AL Object ID'], ['AL Object Type'], ['AL Object Name'], ['Client Type'], ['Operation Type'], ['Isolation Level'], bin(timestamp,15min)\n| where avg_Duration > 2000\n| sort by timestamp asc \n",
                "usedVariables": [
                    "_ClientType",
                    "_CompanyName",
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_publisher",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "f984a491-0c12-4652-8cff-cb91a8c7a042",
            "title": "Web Service Errors",
            "visualType": "table",
            "pageId": "9bd8a199-ba41-40fa-87b8-f9833a040b03",
            "layout": {
                "x": 0,
                "y": 27,
                "width": 24,
                "height": 8
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRulesDisabled": false,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "colorRules": [
                    {
                        "id": "8ef4ce1b-e009-4ad7-939e-7cd290cfbf1d",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "cells",
                        "conditions": [
                            {
                                "operator": ">",
                                "column": "Avg. Time",
                                "values": [
                                    "5000"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "red",
                        "tag": "",
                        "icon": null,
                        "ruleName": "Avg. Time > 5000"
                    },
                    {
                        "id": "0b1b883a-6153-437d-bc75-e7fbbceb0f6b",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "cells",
                        "conditions": [
                            {
                                "operator": ">",
                                "column": "Avg. Time",
                                "values": [
                                    "750"
                                ]
                            },
                            {
                                "operator": "<=",
                                "column": "Avg. Time",
                                "values": [
                                    "5000"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "yellow",
                        "tag": "",
                        "icon": null,
                        "ruleName": "Avg. Time > 750"
                    }
                ],
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces \n| where timestamp between (_startTime .. _endTime)\n| where customDimensions.eventId == \"RT0008\"\n//| where toupper(customDimensions.category) == \"API\"\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| extend _endpoint = strcat(\"WS/\", customDimensions.alObjectType,'/', customDimensions.alObjectId, '(',tostring(customDimensions.endpoint),')')\n| extend _processingTimeMS = toreal(totimespan(customDimensions.serverExecutionTime))/10000\n| extend _httpStatusCode = toint(customDimensions.httpStatusCode)\n| where _httpStatusCode !between (200..299)\n| project [\"Endpoint\"] = _endpoint, \n        [\"Http Status Code\"] = _httpStatusCode,\n        [\"Object Type\"] = tostring(customDimensions.alObjectType), \n        [\"Object No.\"] = tostring(customDimensions.alObjectId), \n        _processingTimeMS, \n        [\"Environment Type\"] = tostring(customDimensions.environmentType)\n| summarize count(), [\"Avg. Time\"] = round(avg(_processingTimeMS),2), [\"Total Time\"] = round(sum(_processingTimeMS),2) by [\"Endpoint\"], ['Http Status Code'], [\"Object Type\"], [\"Object No.\"], [\"Environment Type\"]\n| sort by count_ desc\n",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "fcf4faf9-79b1-4918-935f-e1f298637b29",
            "title": "Sales Order AVG (15 mins bucket)",
            "visualType": "line",
            "pageId": "41c2b22e-69f3-4513-9227-26c3c42e9a08",
            "layout": {
                "x": 0,
                "y": 11,
                "width": 24,
                "height": 11
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": false,
                "xColumnTitle": "",
                "xColumn": "timestamp",
                "yColumns": [
                    "Min. Time",
                    "Avg. Time",
                    "Max. Time"
                ],
                "seriesColumns": [
                    "AL Object Name"
                ],
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "pageViews\n| where customDimensions.alObjectId > 0\n| where timestamp between (_startTime .. _endTime)\n| where customDimensions.environmentName has_any (_environmentName)\n| extend alObjectName = replace_string(tostring(customDimensions.alObjectName),'XYZ','')\n| extend alObjectId = tostring(customDimensions.alObjectId)\n    , clientType = tostring(customDimensions.clientType)\n    , eventId = tostring(customDimensions.eventID) // note that this is different from other signal\n    , pageMode = tostring(customDimensions.pageMode)\n    , pageType = tostring(customDimensions.pageType)\n    , environmentName = tostring(customDimensions.environmentName)\n| summarize \n    ExecutionCount = count(),\n    minTime = toint(min(duration)),\n    avgTime = toint(avg(duration)),\n    maxTime = toint(max(duration))\n    by\n    alObjectId,\n    alObjectName,\n    eventId,\n//    pageMode,\n    pageType,\n    environmentName,\n    bin(timestamp,15min)\n| project\n    timestamp,\n    [\"Environment Name\"] = environmentName,\n    [\"AL Object ID\"] = alObjectId,\n    [\"AL Object Name\"] = alObjectName,\n    [\"Page Type\"] = pageType,\n    [\"Execution Count\"] = ExecutionCount,\n    [\"Min. Time\"] = minTime,\n    [\"Avg. Time\"] = avgTime,\n    [\"Max. Time\"] = maxTime\n| where ['AL Object ID'] in (\"9305\",\"42\")\n| order by ['Execution Count'] desc ",
                "usedVariables": [
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "9a208ae6-3899-4899-9865-01f66829e543",
            "title": "Outgoing WS Errors Details",
            "visualType": "table",
            "pageId": "61a90ca3-7409-4c63-93a7-c415f15e4ea3",
            "layout": {
                "x": 0,
                "y": 8,
                "width": 24,
                "height": 8
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": true,
                "drillthroughDisabled": true,
                "crossFilter": [
                    {
                        "interaction": "column",
                        "property": "count_",
                        "disabled": false
                    }
                ],
                "drillthrough": [
                    {
                        "pairs": [
                            {
                                "parameterId": "faae011a-19c6-437e-a04c-d7de238ed7ad",
                                "property": "timestamp"
                            }
                        ],
                        "destinationPages": [
                            "a1b9eab8-5e92-446b-bdd0-6df8160c9c54"
                        ],
                        "disabled": false
                    }
                ],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where timestamp between (_startTime .. _endTime)\n    and customDimensions.eventId == 'RT0019'\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| extend extensionId = tostring(customDimensions.extensionId)\n    , extensionName = trim('XYZ',tostring(customDimensions.extensionName))\n    , extensionPublisher = trim('XYZ',tostring(customDimensions.extensionPublisher))\n    , alObjectType = tostring(customDimensions.alObjectType)\n    , alObjectId = tostring(customDimensions.alObjectId)\n    , alObjectName = trim('XYZ',tostring(customDimensions.alObjectName))\n    , httpStatusCode = toint(customDimensions.httpStatusCode)\n    , clientType = tostring(customDimensions.clientType)\n    , method = tostring(customDimensions.httpMethod)\n    , endpoint = tostring(customDimensions.endpoint)\n| where httpStatusCode !between (200 .. 299)\n| project timestamp, httpStatusCode, endpoint, clientType, method, alObjectId, alObjectName, alObjectType, extensionName, extensionId\n| sort by timestamp desc \n\n\n",
                "usedVariables": [
                    "_CompanyName",
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_publisher",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "f803ea14-c961-4270-88c9-e606c986af30",
            "title": "Page performance per Hour",
            "visualType": "column",
            "pageId": "41c2b22e-69f3-4513-9227-26c3c42e9a08",
            "layout": {
                "x": 0,
                "y": 41,
                "width": 24,
                "height": 12
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": false,
                "xColumnTitle": "",
                "xColumn": "timestamp",
                "yColumns": [
                    "count_"
                ],
                "seriesColumns": [
                    "perfBucket"
                ],
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "pageViews\n| where timestamp between (_startTime .. _endTime)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentName has_any (_environmentName)\n| where toint(customDimensions.alObjectId) > 0\n| where customDimensions.pageType !contains \"eport\"\n//| where customDimensions.designerLevel == \"None\"\n| extend bucketIndex = case(\n    performanceBucket == \">=5min\", \"11\"\n    , performanceBucket == \"2min-5min\", \"10\"\n    , performanceBucket == \"1min-2min\", \"09\"\n    , performanceBucket == \"30sec-1min\", \"08\"\n    , performanceBucket == \"15sec-30sec\", \"07\"\n    , performanceBucket == \"7sec-15sec\", \"06\"\n    , performanceBucket == \"3sec-7sec\", \"05\"\n    , performanceBucket == \"1sec-3sec\", \"04\"\n    , performanceBucket == \"500ms-1sec\", \"03\"\n    , performanceBucket == \"250ms-500ms\", \"02\"\n    , performanceBucket == \"<250ms\", \"01\"\n    , \"00\")\n| extend perfBucket = strcat(bucketIndex, ': ', performanceBucket)\n| summarize count() by perfBucket, bin(timestamp,1h)\n| sort by perfBucket asc ",
                "usedVariables": [
                    "_endTime",
                    "_environmentName",
                    "_publisher",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "f37d3811-e8d2-4893-852f-a7effcff96a2",
            "title": "Sales Order Count (15 mins bucket)",
            "visualType": "column",
            "pageId": "41c2b22e-69f3-4513-9227-26c3c42e9a08",
            "layout": {
                "x": 0,
                "y": 22,
                "width": 24,
                "height": 8
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": false,
                "xColumnTitle": "",
                "xColumn": "timestamp",
                "yColumns": [
                    "Execution Count"
                ],
                "seriesColumns": [
                    "AL Object Name"
                ],
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "pageViews\n| where customDimensions.alObjectId > 0\n| where timestamp between (_startTime .. _endTime)\n| where customDimensions.environmentName has_any (_environmentName)\n| extend alObjectName = replace_string(tostring(customDimensions.alObjectName),'XYZ','')\n| extend alObjectId = tostring(customDimensions.alObjectId)\n    , clientType = tostring(customDimensions.clientType)\n    , eventId = tostring(customDimensions.eventID) // note that this is different from other signal\n    , pageMode = tostring(customDimensions.pageMode)\n    , pageType = tostring(customDimensions.pageType)\n    , environmentName = tostring(customDimensions.environmentName)\n| summarize \n    ExecutionCount = count(),\n    minTime = toint(min(duration)),\n    avgTime = toint(avg(duration)),\n    maxTime = toint(max(duration))\n    by\n    alObjectId,\n    alObjectName,\n    eventId,\n//    pageMode,\n    pageType,\n    environmentName,\n    bin(timestamp,15min)\n| project\n    timestamp,\n    [\"Environment Name\"] = environmentName,\n    [\"AL Object ID\"] = alObjectId,\n    [\"AL Object Name\"] = alObjectName,\n    [\"Page Type\"] = pageType,\n    [\"Execution Count\"] = ExecutionCount,\n    [\"Min. Time\"] = minTime,\n    [\"Avg. Time\"] = avgTime,\n    [\"Max. Time\"] = maxTime\n| where ['AL Object ID'] in (\"9305\",\"42\")\n| order by ['Execution Count'] desc ",
                "usedVariables": [
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "6527c03a-e18a-4bbb-9888-ee3d562cd742",
            "title": "No. of Long Running SQL Queries (weekly)",
            "visualType": "column",
            "pageId": "94d9d8ce-b39a-4f2d-bf77-11c032f0fd9e",
            "layout": {
                "x": 0,
                "y": 58,
                "width": 12,
                "height": 14
            },
            "visualOptions": {
                "xColumn": null,
                "multipleYAxes": {
                    "additional": [],
                    "showMultiplePanels": false,
                    "base": {
                        "horizontalLines": [],
                        "yAxisScale": "linear",
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "columns": [],
                        "label": "",
                        "id": "-1"
                    }
                },
                "yColumns": null,
                "seriesColumns": null,
                "hideLegend": true,
                "xColumnTitle": "",
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where 1==1 \n    and timestamp >= todatetime(_startTime_Ingestion)\n    and timestamp <= todatetime(_endTime_ingestion) + totimespan(24h) - totimespan(1ms) \n    and customDimensions.eventId == 'RT0005'\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| extend  hour = iif(_OnlyWorkingHours == true, hourofday(timestamp), 12)\n| where hour between (6 .. 17)\n| summarize count() by bin(timestamp, 7d)",
                "usedVariables": [
                    "_CompanyName",
                    "_EnvironmentType",
                    "_OnlyWorkingHours",
                    "_endTime_ingestion",
                    "_environmentName",
                    "_publisher",
                    "_startTime_Ingestion"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "edeff75b-3f3e-402a-aa9e-6cf63da97c96",
            "title": "No. of Long Running AL Methods (weekly)",
            "visualType": "column",
            "pageId": "94d9d8ce-b39a-4f2d-bf77-11c032f0fd9e",
            "layout": {
                "x": 12,
                "y": 58,
                "width": 12,
                "height": 14
            },
            "visualOptions": {
                "xColumn": null,
                "multipleYAxes": {
                    "additional": [],
                    "showMultiplePanels": false,
                    "base": {
                        "horizontalLines": [],
                        "yAxisScale": "linear",
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "columns": [],
                        "label": "",
                        "id": "-1"
                    }
                },
                "yColumns": null,
                "seriesColumns": null,
                "hideLegend": true,
                "xColumnTitle": "",
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": true,
                "drillthroughDisabled": false,
                "crossFilter": [
                    {
                        "interaction": "column",
                        "property": "count_",
                        "disabled": false
                    }
                ],
                "drillthrough": [
                    {
                        "pairs": [
                            {
                                "parameterId": "faae011a-19c6-437e-a04c-d7de238ed7ad",
                                "property": "timestamp"
                            }
                        ],
                        "destinationPages": [
                            "a1b9eab8-5e92-446b-bdd0-6df8160c9c54"
                        ],
                        "disabled": false
                    }
                ]
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where 1==1 \n    and timestamp >= todatetime(_startTime_Ingestion)\n    and timestamp <= todatetime(_endTime_ingestion) + totimespan(24h) - totimespan(1ms)\n    and customDimensions.eventId == 'RT0018'\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| extend  hour = iif(_OnlyWorkingHours == true, hourofday(timestamp), 12)\n| where hour between (6 .. 17)\n| summarize count() by bin(timestamp, 7d)\n| render columnchart  title= 'Number of long running AL Methods'",
                "usedVariables": [
                    "_CompanyName",
                    "_EnvironmentType",
                    "_OnlyWorkingHours",
                    "_endTime_ingestion",
                    "_environmentName",
                    "_publisher",
                    "_startTime_Ingestion"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "84038a84-f704-4346-a981-79b8222635bb",
            "title": "No. of  SQL Deadlocks (weekly)",
            "visualType": "column",
            "pageId": "94d9d8ce-b39a-4f2d-bf77-11c032f0fd9e",
            "layout": {
                "x": 0,
                "y": 72,
                "width": 12,
                "height": 14
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": true,
                "xColumnTitle": "",
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where timestamp >= todatetime(_startTime_Ingestion)\n    and timestamp <= todatetime(_endTime_ingestion) + totimespan(24h) - totimespan(1ms) \n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.eventId == 'RT0028'\n| where isnotempty(customDimensions.aadTenantId) // filter away signal from Docker sandboxes\n| where customDimensions.alObjectId != '0' \n| where isnotempty(customDimensions.alObjectId)\n| extend  hour = iif(_OnlyWorkingHours == true, hourofday(timestamp), 12)\n| where hour between (6 .. 17)\n| summarize count() by bin(timestamp, 7d)\n| order by timestamp asc",
                "usedVariables": [
                    "_CompanyName",
                    "_EnvironmentType",
                    "_OnlyWorkingHours",
                    "_endTime_ingestion",
                    "_environmentName",
                    "_publisher",
                    "_startTime_Ingestion"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "9e12e864-db6c-4256-a647-fe18b87f7b3a",
            "title": "No. of SQL Lock Timeout (weekly)",
            "visualType": "column",
            "pageId": "94d9d8ce-b39a-4f2d-bf77-11c032f0fd9e",
            "layout": {
                "x": 12,
                "y": 72,
                "width": 12,
                "height": 14
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": true,
                "xColumnTitle": "",
                "xColumn": null,
                "yColumns": null,
                "seriesColumns": null,
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where timestamp >= todatetime(_startTime_Ingestion)\n    and timestamp <= todatetime(_endTime_ingestion) + totimespan(24h) - totimespan(1ms) \n| where customDimensions.eventId == 'RT0012'\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| project timestamp\n, componentVersion = customDimensions.componentVersion\n, environmentType = customDimensions.environmentType\n, environmentName = customDimensions.environmentName\n, aadTenantId = customDimensions.aadTenantId\n, alObjectId = customDimensions.alObjectId\n, companyName = customDimensions.companyName\n, clientType = customDimensions.clientType\n, alObjectType = customDimensions.alObjectType\n, alObjectName = customDimensions.alObjectName\n, extensionVersion = customDimensions.extensionVersion\n, extensionName = customDimensions.extensionName\n, extensionId = customDimensions.extensionId\n, alStackTrace = customDimensions.alStackTrace\n// use the KQL snippet parseStackTrace to get bottom of the stack trace details\n, sqlStatement = customDimensions.sqlStatement\n, sqlServerSessionId = customDimensions.sqlServerSessionId\n, snapshotId = customDimensions.snapshotId\n, sessionId = customDimensions.sessionId\n, usertelemetryId = case(\n  // user telemetry id was introduced in the platform in version 20.0\n  toint( substring(customDimensions.componentVersion,0,2)) >= 20, user_Id\n, 'N/A'\n)\n| extend  hour = iif(_OnlyWorkingHours == true, hourofday(timestamp), 12)\n| where hour between (6 .. 17)\n| summarize count() by bin(timestamp,7d)\n",
                "usedVariables": [
                    "_CompanyName",
                    "_EnvironmentType",
                    "_OnlyWorkingHours",
                    "_endTime_ingestion",
                    "_environmentName",
                    "_publisher",
                    "_startTime_Ingestion"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "be945e60-dbfa-440f-9014-613e5db668f2",
            "title": "Sales Order AVG per day",
            "visualType": "column",
            "pageId": "41c2b22e-69f3-4513-9227-26c3c42e9a08",
            "layout": {
                "x": 0,
                "y": 30,
                "width": 24,
                "height": 11
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": false,
                "xColumnTitle": "",
                "xColumn": "timestamp",
                "yColumns": [
                    "Avg. Time"
                ],
                "seriesColumns": [
                    "AL Object Name"
                ],
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "pageViews\n| where customDimensions.alObjectId > 0\n| where timestamp between (_startTime .. _endTime)\n//| where customDimensions.environmentName has_any (_environmentName)\n| extend alObjectName = replace_string(tostring(customDimensions.alObjectName),'XYZ','')\n| extend alObjectId = tostring(customDimensions.alObjectId)\n    , clientType = tostring(customDimensions.clientType)\n    , eventId = tostring(customDimensions.eventID) // note that this is different from other signal\n    , pageMode = tostring(customDimensions.pageMode)\n    , pageType = tostring(customDimensions.pageType)\n    , environmentName = tostring(customDimensions.environmentName)\n| summarize \n    ExecutionCount = count(),\n    avgTime = toint(avg(duration))\n    by\n    alObjectId,\n    alObjectName,\n//    environmentName,\n    bin(timestamp,1d)\n| project\n    timestamp,\n//    [\"Environment Name\"] = environmentName,\n    [\"AL Object ID\"] = alObjectId,\n    [\"AL Object Name\"] = alObjectName,\n    [\"Execution Count\"] = ExecutionCount,\n    [\"Avg. Time\"] = avgTime\n| where ['AL Object ID'] in (\"9305\",\"42\",\"143\",\"132\")\n| where ['AL Object Name'] != \"\"\n| order by ['Execution Count'] desc ",
                "usedVariables": [
                    "_endTime",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "bcdfa0c5-5ad1-47ea-9bde-2b53324b6a1e",
            "title": "Lock Timeouts",
            "visualType": "table",
            "pageId": "5464aca4-0e79-4cc9-acaf-5bfcba11b235",
            "layout": {
                "x": 0,
                "y": 26,
                "width": 24,
                "height": 9
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRulesDisabled": false,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "colorRules": [
                    {
                        "id": "7646f4b7-fe5e-4d80-8657-91fcef071258",
                        "ruleType": "colorByCondition",
                        "applyToColumn": "Snapshot ID",
                        "hideText": false,
                        "applyTo": "cells",
                        "conditions": [
                            {
                                "operator": ">",
                                "column": "Snapshot ID",
                                "values": [
                                    ""
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "light",
                        "color": "blue",
                        "tag": "",
                        "icon": null,
                        "ruleName": "Snapshot ID >"
                    }
                ],
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where timestamp between (_startTime .. _endTime)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.eventId == 'RT0012'\n| extend sqlStatement = replace_string(tostring(customDimensions.sqlStatement),'XYZ','')\n    , stackTrace = replace_string(tostring(customDimensions.alStackTrace),'XYZ','')\n    , alObjectName = replace_string(tostring(customDimensions.alObjectName),'XYZ','')\n    , extensionName = replace_string(tostring(customDimensions.extensionName),'XYZ','')\n| extend\n   alObjectId = customDimensions.alObjectId\n  , companyName = tostring(customDimensions.companyName)\n  , clientType = tostring(customDimensions.clientType)\n  , alObjectType = customDimensions.alObjectType\n  , extensionVersion = customDimensions.extensionVersion\n  , extensionInfo = strcat(extensionName, ' ', customDimensions.extensionVersion, \n    (iff(isnotempty(tostring(customDimensions.extensionPublisher)), strcat(' - ', tostring(customDimensions.extensionPublisher)), '')))\n  , extensionId = customDimensions.extensionId\n  , sqlServerSessionId = customDimensions.sqlServerSessionId\n  , snapshotId = tostring(customDimensions.snapshotId)\n| project timestamp, \n    [\"Session ID\"] = session_Id, \n    [\"Client Type\"] = clientType, \n    [\"AL Object Info\"] = strcat(alObjectType, ' ', alObjectId, ' - ', alObjectName), \n    [\"Extension Info\"] = extensionInfo, \n    [\"AL Stack Trace\"] =  stackTrace, \n    [\"SQL Statement\"] = sqlStatement,\n    [\"SQL Session Holding Lock\"] = sqlServerSessionId,\n    [\"Snapshot ID\"] =  snapshotId",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "565ee164-0a6f-40d7-95d4-fa8e7e097669",
            "title": "SQL Deadlocks (5 min buckets)",
            "visualType": "column",
            "pageId": "5464aca4-0e79-4cc9-acaf-5bfcba11b235",
            "layout": {
                "x": 0,
                "y": 8,
                "width": 24,
                "height": 9
            },
            "visualOptions": {
                "multipleYAxes": {
                    "base": {
                        "id": "-1",
                        "label": "",
                        "columns": [],
                        "yAxisMaximumValue": null,
                        "yAxisMinimumValue": null,
                        "yAxisScale": "linear",
                        "horizontalLines": []
                    },
                    "additional": [],
                    "showMultiplePanels": false
                },
                "hideLegend": false,
                "xColumnTitle": "",
                "xColumn": "timestamp",
                "yColumns": null,
                "seriesColumns": null,
                "xAxisScale": "linear",
                "verticalLine": "",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where timestamp between (_startTime .. _endTime)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.eventId == 'RT0028'\n| where isnotempty(customDimensions.aadTenantId) // filter away signal from Docker sandboxes\n| where customDimensions.alObjectId != '0' \n| where isnotempty(customDimensions.alObjectId)\n| extend TenantId = strcat(customDimensions.aadTenantId)\n    , ExtensionId = tostring(customDimensions.extensionId)\n    , ExtensionName = tostring(customDimensions.extensionName)\n    , ExtensionVersion = tostring(customDimensions.extensionVersion)\n    , ObjectType = tostring(customDimensions.alObjectType)\n    , ObjectId = tostring(customDimensions.alObjectId)\n    , ObjectName = tostring(customDimensions.alObjectName)\n    , sqlStatement = tostring(customDimensions.sqlStatement)\n    , companyName = tostring(customDimensions.companyName)        \n    , numberOfJoins = countof(tostring(customDimensions.sqlStatement), \"JOIN\")\n    , EventId = tostring(customDimensions.eventId)\n    , StackTrace = tostring(customDimensions.alStackTrace)\n    , userId = user_Id\n| extend operationType = case(\n    sqlStatement startswith \"UPDATE\", \"UPDATE\"\n    , sqlStatement startswith \"DELETE\", \"DELETE\"\n    , sqlStatement startswith \"BeginTransaction\", \"BEGIN_TRANS\"\n    , sqlStatement matches regex \"INSERT INTO\", \"INSERT\"\n    , sqlStatement startswith \"SELECT\", \"SELECT\"\n    , sqlStatement matches regex \"IF EXISTS \\\\(SELECT (.*)\\\\) SELECT\", \"SELECT'\"\n    , sqlStatement has \"SELECT NEXT VALUE FOR\", \"SELECT_SEQUENCE_VALUE\"\n    , sqlStatement has \"SELECT @@SPID\", \"SELECT_SPID\"\n    , sqlStatement matches regex \"(.*)WITH\", \"SELECT\"\n    , sqlStatement startswith \"CREATE TABLE\", \"CREATE_TABLE\"\n    , sqlStatement startswith \"ALTER TABLE\", \"ALTER_TABLE\"\n    , sqlStatement startswith \"exec sp_rename\", \"RENAME_TABLE\" \n    , sqlStatement matches regex \"(.*)DROP TABLE\", \"DROP_TABLE\"\n    , sqlStatement startswith \"SET LOCK_TIMEOUT\", \"SET_LOCK_TIMEOUT\"\n    , sqlStatement has \"sp_getapplock\", \"GET_APP_LOCK\"\n    , \"UNKNOWN\"\n    ) \n| parse kind=regex sqlStatement with selectPart: string \"FROM \\\"SQLDATABASE\\\".dbo.\\\"CURRENTCOMPANY\\\\$\" tablenamewithjoins: string \"\\\\$\" space: string\n| parse kind=regex tablenamewithjoins with stringtoeliminate: string \"\\\\$\" tablenamewithoutjoins: string\n| extend tablename = case(\n    tablenamewithjoins contains \"$\", tablenamewithoutjoins\n    , tablenamewithjoins \n)\n| extend splitStacktrace = split(customDimensions.alStackTrace, \"\\n\")\n| extend lengthStacktrace = array_length(splitStacktrace)\n| extend\n    topOfStackline = tostring(splitStacktrace[0]),\n    bottomOfStackline = tostring(splitStacktrace[lengthStacktrace - 1])\n| extend topOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, topOfStackline)\n| extend topOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, topOfStackline)\n| extend topOfStackLineNumber = extract(' line (\\\\d+)', 1, topOfStackline)\n| extend topOfStackExtensionName = case (\n    isnotempty(topOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, topOfStackline),\n    extract(' - (.+) by', 1, topOfStackline)\n    )\n| extend topOfStackPublisher = extract('.+ by (.+)', 1, topOfStackline)\n| extend topOfStackWhatWasCalled = case(\n    isnotempty(topOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, topOfStackline),\n    isnotempty(topOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, topOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, topOfStackline)\n    )\n| extend bottomOfStackObjectName = extract('\\\\\\\"?([^\\\\\\\"]+)\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectType = extract('\\\\(([a-zA-Z]+) \\\\d+\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackObjectId = extract('\\\\([a-zA-Z]+ (\\\\d+)\\\\)', 1, bottomOfStackline)\n| extend bottomOfStackLineNumber = extract(' line (\\\\d+)', 1, bottomOfStackline)\n| extend bottomOfStackExtensionName = case (\n    isnotempty(bottomOfStackLineNumber), extract('line \\\\d+ - (.+) by', 1, bottomOfStackline),\n    extract(' - (.+) by', 1, bottomOfStackline)\n    )\n| extend bottomOfStackPublisher = extract('.+ by (.+)', 1, bottomOfStackline)\n| extend bottomOfStackWhatWasCalled = case(\n    isnotempty(bottomOfStackLineNumber), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) line', 1, bottomOfStackline),\n    isnotempty(bottomOfStackExtensionName), extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+) -(.+) by (.+)', 1, bottomOfStackline),\n    extract('\\\\\\\"?[^\\\\\\\"]+\\\\\\\"?\\\\([a-zA-Z]+ \\\\d+\\\\).(.+)', 1, bottomOfStackline)\n    )\n| extend SourceProcess = strcat(bottomOfStackWhatWasCalled , \" - \", bottomOfStackObjectType, \" \", bottomOfStackObjectId, \" \", bottomOfStackObjectName, \" (\", bottomOfStackExtensionName, \")\")\n    , LockingObject = strcat(topOfStackObjectType, \" '\", topOfStackObjectName,\"'\")\n    , LockingObjectId = tostring(topOfStackObjectId)\n    , LockingObjectMethod = tostring(topOfStackWhatWasCalled)\n    , LockingObjectExtension = tostring(topOfStackExtensionName)\n| summarize count() by bin(timestamp,5min)\n| project timestamp, count_\n| render columnchart \n\n",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "be7aaeb8-48b5-4dc4-98af-5b53d4f67f34",
            "title": "Job Queue Errors",
            "visualType": "table",
            "pageId": "60f8536a-1e14-47a9-80d8-f2a08e0e9fc7",
            "layout": {
                "x": 0,
                "y": 27,
                "width": 24,
                "height": 9
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _appInsightsTraces = materialize (\n    traces\n    | where timestamp  between (_startTime .. _endTime)\n    | where customDimensions.environmentType has_any (_EnvironmentType)\n    | where customDimensions.environmentName has_any (_environmentName)\n);\nlet _failedToBeEnqueuedJQ = materialize (\n    _appInsightsTraces\n    | where customDimensions.eventId == \"AL0000FNY\"\n);\nlet _failedCanBeRetriedJQ = materialize (\n    _appInsightsTraces\n    | where customDimensions.eventId == \"AL0000HE7\"\n);\nlet _RescheduledOnLoginJQ = materialize (\n    _appInsightsTraces\n    | where customDimensions.eventId == \"AL0000I49\"\n);\nlet _RunOnceByUserJQ = materialize (\n    _appInsightsTraces\n    | where customDimensions.eventId == \"AL0000FMG\"\n);\nlet _FailedAndStoppedJQ = materialize (\n    _appInsightsTraces\n    | where customDimensions.eventId == \"AL0000JRG\"\n);\n_failedToBeEnqueuedJQ\n| union (_failedToBeEnqueuedJQ) \n| union (_failedCanBeRetriedJQ) \n| union (_RescheduledOnLoginJQ)\n| union (_RunOnceByUserJQ) \n| union (_FailedAndStoppedJQ) \n| sort by timestamp asc",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "5ab24045-9239-450a-bdda-8b2c60f88688",
            "title": "LRAM Count and Average per Day buckets",
            "visualType": "table",
            "pageId": "e6b3a051-ba9e-4db5-912d-c63987fd1fb8",
            "layout": {
                "x": 0,
                "y": 46,
                "width": 24,
                "height": 10
            },
            "visualOptions": {
                "hideLegend": false,
                "table__enableRenderLinks": false,
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": true,
                "drillthroughDisabled": true,
                "colorRules": [],
                "crossFilter": [
                    {
                        "interaction": "column",
                        "property": "extensionPublisher",
                        "parameterId": "9cc55dcf-17d4-4829-9340-37c385862cdf",
                        "disabled": false
                    }
                ],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let TableCount = (\ntraces\n| where timestamp between (_startTime .. _endTime)// adjust as needed\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.clientType has_any (_ClientType)\n| where customDimensions.eventId == 'RT0018' // starting from version 16.1, the eventId is used to identity signal types\n| where customDimensions.alObjectId > 0 // filter out internal server calls\n| project \ntimestamp\n, extensionId = tostring(customDimensions.extensionId)\n, extensionPublisher = tostring(customDimensions.extensionPublisher)\n, extensionName = trim('XYZ',tostring(customDimensions.extensionName))\n, alObjectId = tostring(customDimensions.alObjectId)\n, alObjectType = tostring(customDimensions.alObjectType)\n, alObjectName = trim('XYZ',tostring(customDimensions.alObjectName))\n, alObjectMethod = tostring(customDimensions.alMethod)\n, executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000 //the datatype for executionTime is timespan \n, dayBin = bin(timestamp,1d)\n| extend day = strcat(strcat(format_datetime(dayBin, \"yyyy-MM-dd\")),\" (Count)\") \n| project-away timestamp, dayBin, executionTimeInMS\n| sort by day asc \n| evaluate pivot(day, count())\n);\nTableCount\n| join\n(traces\n| where timestamp between (_startTime .. _endTime)// adjust as needed\n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.clientType has_any (_ClientType)\n| where customDimensions.eventId == 'RT0018' // starting from version 16.1, the eventId is used to identity signal types\n| where customDimensions.alObjectId > 0 // filter out internal server calls\n| project \ntimestamp\n, extensionId = tostring(customDimensions.extensionId)\n, extensionPublisher = tostring(customDimensions.extensionPublisher)\n, extensionName = trim('XYZ',tostring(customDimensions.extensionName))\n, alObjectId = tostring(customDimensions.alObjectId)\n, alObjectType = tostring(customDimensions.alObjectType)\n, alObjectName = trim('XYZ',tostring(customDimensions.alObjectName))\n, alObjectMethod = tostring(customDimensions.alMethod)\n, executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000 //the datatype for executionTime is timespan \n// this part of the query derives various insights from the SQL statement\n, dayBin = bin(timestamp,1d)\n| extend day = strcat(strcat(format_datetime(dayBin, \"yyyy-MM-dd\")), \" (avg)\")\n| project-away timestamp, dayBin\n| summarize Average = round(avg(executionTimeInMS),0) by extensionId, extensionPublisher, extensionName, alObjectType, alObjectId, alObjectName, alObjectMethod, day\n| sort by day asc \n| evaluate pivot(day,sum(Average))\n)\non\n$left.extensionId == $right.extensionId,\n$left.extensionPublisher == $right.extensionPublisher,\n$left.extensionName == $right.extensionName,\n$left.alObjectType == $right.alObjectType,\n$left.alObjectId == $right.alObjectId,\n$left.alObjectName == $right.alObjectName,\n$left.alObjectMethod == $right.alObjectMethod\n| project-away extensionId, extensionId1, extensionPublisher1, extensionName1, alObjectType1, alObjectId1, alObjectName1, alObjectMethod1 ",
                "usedVariables": [
                    "_ClientType",
                    "_CompanyName",
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_publisher",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "b4421319-3848-4a9b-ae3c-3e2bad33b740",
            "title": "Data Upgrade Performance",
            "visualType": "table",
            "pageId": "2951304b-62f3-4b7b-98c0-8c31c6d7ecd4",
            "layout": {
                "x": 0,
                "y": 16,
                "width": 24,
                "height": 8
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "colorRules": [],
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "//Monitor long running data upgrades\nunion traces\n| where timestamp between (_startTime .. _endTime)\n| where customDimensions.environmentName == _environmentName\n| where customDimensions.eventId == 'AL0000EJA'\n| extend upgradeEnvironmentName = tostring(customDimensions.environmentName)\n  , upgradeTag = tostring(customDimensions.eventId)\n  , upgradeEventType = tostring( customDimensions.alUpgradeTag )\n  , upgradeCompanyName = tostring(customDimensions.alCompanyName)\n| project timestamp, message, upgradeTag, customDimensions, session_Id, upgradeEnvironmentName, upgradeEventType, upgradeCompanyName\n| join kind=inner\n(\nunion traces\n| where timestamp between (_startTime .. _endTime)\n| where customDimensions.environmentName == _environmentName\n| where customDimensions.eventId == 'AL0000EJ9'\n| extend upgradeEnvironmentName = tostring(customDimensions.environmentName)\n  , upgradeTag = tostring(customDimensions.eventId)\n  , upgradeEventType = tostring( customDimensions.alUpgradeTag )\n  , upgradeCompanyName = tostring(customDimensions.alCompanyName)\n| project timestamp, message, upgradeTag, customDimensions, session_Id, upgradeEnvironmentName, upgradeEventType, upgradeCompanyName\n) on upgradeEnvironmentName, session_Id, upgradeCompanyName, upgradeEventType\n| extend upgradeTagDuration = timestamp - timestamp1\n| extend upgradeTagDurationInSec = round(upgradeTagDuration / 1s)\n| extend upgradeCompanyNoPII = \"\"\n//| project session_Id, timestamp, upgradeTagDuration, upgradeTagDurationInSec, upgradeCompanyName, upgradeEventType\n| project session_Id, timestamp, upgradeTagDuration, upgradeTagDurationInSec, upgradeCompanyNoPII, upgradeEventType\n| order by session_Id desc, timestamp desc //data upgrade tag timeline execution\n\n//| order by session_Id desc, upgradeTagDuration desc //data upgrade tag longest execution\n\n",
                "usedVariables": [
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "9aff8892-39e8-4e24-b94b-ab881639421d",
            "title": "Platform Update",
            "visualType": "table",
            "pageId": "2951304b-62f3-4b7b-98c0-8c31c6d7ecd4",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 24,
                "height": 8
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRules": [],
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where timestamp between (_startTime .. _endTime) // adjust as needed\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| extend environmentName = tostring( customDimensions.environmentName )\n    , environmentType = tostring(customDimensions.environmentType)\n    , componentVersion = tostring(customDimensions.componentVersion)\n| where componentVersion <> \"\"\n| summarize max(bin(timestamp,1min)) by environmentName, componentVersion\n| sort by max_timestamp desc \n\n\n",
                "usedVariables": [
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "71a9cada-11c2-4ca0-8990-f9094e23a481",
            "title": "Page Views",
            "visualType": "table",
            "pageId": "bc9ae068-c7b3-417e-8f99-82f1740e0427",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 24,
                "height": 8
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRulesDisabled": false,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "colorRules": [
                    {
                        "id": "2a89aee3-7e06-4e12-b956-c3464a42e9d7",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "rows",
                        "conditions": [
                            {
                                "operator": "==",
                                "column": "isNew",
                                "values": [
                                    "Yes"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "blue",
                        "tag": "",
                        "icon": null,
                        "ruleName": ""
                    },
                    {
                        "id": "3add60e5-1a3e-432b-b0e1-87782f46e46c",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "rows",
                        "conditions": [
                            {
                                "operator": "<",
                                "column": "delta",
                                "values": [
                                    "0"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "red",
                        "tag": "",
                        "icon": null,
                        "ruleName": ""
                    }
                ],
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _now = now();\nlet PageViewCount = (\npageViews\n| where timestamp between (_previousUpdateStartTime .. _now)\n| where customDimensions.aadTenantId has_any (_aadTenantId)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.alObjectId > 0\n| project timestamp\n    , alObjectId = tostring(customDimensions.alObjectId)\n    , alObjectName = replace_string(tostring(customDimensions.alObjectName),'XYZ','')\n    , eventId = tostring(customDimensions.eventID) \n    , pageType = tostring(customDimensions.pageType)\n    , durationInMs = toint(duration)\n    , signalsBin = iff(timestamp < _updateStartTime,'Previous Update', 'New Update')\n| extend signals = strcat(signalsBin,\" (Count)\") \n| project-away timestamp, signalsBin, durationInMs\n| sort by signals asc \n| evaluate pivot(signals, count())\n);\nPageViewCount\n| join\n(pageViews\n| where timestamp between (_previousUpdateStartTime .. _now)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.alObjectId > 0\n| project timestamp\n    , alObjectId = tostring(customDimensions.alObjectId)\n    , alObjectName = replace_string(tostring(customDimensions.alObjectName),'XYZ','')\n    , eventId = tostring(customDimensions.eventID) \n    , pageType = tostring(customDimensions.pageType)\n    , durationInMs = toint(duration)\n    , signalsBin = iff(timestamp < _updateStartTime,'Previous Update', 'New Update')\n| extend signals = strcat(signalsBin,\" (Avg)\") \n| project-away timestamp, signalsBin\n| summarize Average = round(avg(durationInMs),0) by alObjectId, alObjectName, pageType, signals\n| sort by signals asc \n| evaluate pivot(signals,sum(Average))\n)\non\n$left.alObjectId == $right.alObjectId,\n$left.alObjectName == $right.alObjectName,\n$left.pageType == $right.pageType\n| project-away alObjectId1, alObjectName1, pageType1\n| where [\"New Update (Count)\"] > _countLimit\n| extend isNew = tostring(iif([\"Previous Update (Count)\"] < 1, \"Yes\",\"\"))\n| extend delta = iif(isNew == \"Yes\", 0.0, [\"Previous Update (Avg)\"] - [\"New Update (Avg)\"]) \n    , deltaPerc = iif(isNew == \"Yes\", 0.0, round(([\"Previous Update (Avg)\"] - [\"New Update (Avg)\"]) * 100 / [\"Previous Update (Avg)\"],0))\n| sort by [\"New Update (Count)\"] desc \n",
                "usedVariables": [
                    "_aadTenantId",
                    "_countLimit",
                    "_environmentName",
                    "_previousUpdateStartTime",
                    "_updateStartTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "56570211-6dd7-499e-b76d-cc61c2537855",
            "title": "Long Running AL Methods - LRAM",
            "visualType": "table",
            "pageId": "bc9ae068-c7b3-417e-8f99-82f1740e0427",
            "layout": {
                "x": 0,
                "y": 8,
                "width": 24,
                "height": 8
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRulesDisabled": false,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "colorRules": [
                    {
                        "id": "2a89aee3-7e06-4e12-b956-c3464a42e9d7",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "rows",
                        "conditions": [
                            {
                                "operator": "==",
                                "column": "isNew",
                                "values": [
                                    "Yes"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "blue",
                        "tag": "",
                        "icon": null,
                        "ruleName": ""
                    },
                    {
                        "id": "3add60e5-1a3e-432b-b0e1-87782f46e46c",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "rows",
                        "conditions": [
                            {
                                "operator": "<",
                                "column": "delta",
                                "values": [
                                    "0"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "red",
                        "tag": "",
                        "icon": null,
                        "ruleName": ""
                    }
                ],
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _now = now();\nlet TableCount = (\ntraces\n| where timestamp between (_previousUpdateStartTime .. _now)\n| where customDimensions.aadTenantId has_any (_aadTenantId)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.eventId == 'RT0018' \n| where customDimensions.alObjectId > 0 \n| project timestamp\n, clientType = tostring(customDimensions.clientType)\n, stackTrace = tostring(customDimensions.alStackTrace)\n, extensionId = tostring(customDimensions.extensionId)\n, extensionPublisher = tostring(customDimensions.extensionPublisher)\n, extensionName = trim('XYZ',tostring(customDimensions.extensionName))\n, alObjectId = tostring(customDimensions.alObjectId)\n, alObjectName = trim('XYZ',tostring(customDimensions.alObjectName))\n, alObjectType = tostring(customDimensions.alObjectType)\n, alMethod = tostring(customDimensions.alMethod)\n, executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000 //the datatype for executionTime is timespan \n, signalsBin = iff(timestamp < _updateStartTime,'Previous Update', 'New Update')\n| extend signals = strcat(signalsBin,\" (Count)\") \n| project-away timestamp, signalsBin, executionTimeInMS\n| sort by signals asc \n| evaluate pivot(signals, count())\n);\nTableCount\n| join\n(traces\n| where timestamp between (_previousUpdateStartTime .. _now)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.eventId == 'RT0018' \n| where customDimensions.alObjectId > 0 \n| project timestamp\n, clientType = tostring(customDimensions.clientType)\n, stackTrace = tostring(customDimensions.alStackTrace)\n, extensionId = tostring(customDimensions.extensionId)\n, extensionPublisher = tostring(customDimensions.extensionPublisher)\n, extensionName = trim('XYZ',tostring(customDimensions.extensionName))\n, alObjectId = tostring(customDimensions.alObjectId)\n, alObjectName = trim('XYZ',tostring(customDimensions.alObjectName))\n, alObjectType = tostring(customDimensions.alObjectType)\n, alMethod = tostring(customDimensions.alMethod)\n, executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000 //the datatype for executionTime is timespan \n// this part of the query derives various insights from the SQL statement\n, signalsBin = iff(timestamp < _updateStartTime,'Previous Update', 'New Update')\n| extend signals = strcat(signalsBin,\" (Avg)\") \n| project-away timestamp, signalsBin\n| summarize Average = round(avg(executionTimeInMS),0) by extensionId, extensionPublisher, extensionName, alObjectType, alObjectId, alObjectName, alMethod, stackTrace, clientType, signals\n| sort by signals asc \n| evaluate pivot(signals,sum(Average))\n)\non\n$left.extensionId == $right.extensionId,\n$left.extensionPublisher == $right.extensionPublisher,\n$left.extensionName == $right.extensionName,\n$left.alObjectType == $right.alObjectType,\n$left.alObjectId == $right.alObjectId,\n$left.alObjectName == $right.alObjectName,\n$left.clientType == $right.clientType,\n$left.stackTrace == $right.stackTrace,\n$left.alMethod == $right.alMethod\n| project-away extensionId, extensionId1, extensionPublisher1, extensionName1, alObjectType1, alObjectId1, alObjectName1, stackTrace1, clientType1, alMethod1\n| where [\"New Update (Count)\"] > _countLimit\n| extend isNew = tostring(iif([\"Previous Update (Count)\"] < 1, \"Yes\",\"\"))\n| extend delta = iif(isNew == \"Yes\", 0.0, [\"Previous Update (Avg)\"] - [\"New Update (Avg)\"]) \n    , deltaPerc = iif(isNew == \"Yes\", 0.0, round(([\"Previous Update (Avg)\"] - [\"New Update (Avg)\"]) * 100 / [\"Previous Update (Avg)\"],0))\n| sort by [\"New Update (Count)\"] desc \n",
                "usedVariables": [
                    "_EnvironmentType",
                    "_aadTenantId",
                    "_countLimit",
                    "_environmentName",
                    "_previousUpdateStartTime",
                    "_updateStartTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "76a79858-7510-456b-b308-0a9cd6be5c7d",
            "title": "Long Running SQL Queries  - LRQ",
            "visualType": "table",
            "pageId": "bc9ae068-c7b3-417e-8f99-82f1740e0427",
            "layout": {
                "x": 0,
                "y": 16,
                "width": 24,
                "height": 11
            },
            "visualOptions": {
                "table__enableRenderLinks": true,
                "colorRulesDisabled": false,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "colorRules": [
                    {
                        "id": "2a89aee3-7e06-4e12-b956-c3464a42e9d7",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "rows",
                        "conditions": [
                            {
                                "operator": "==",
                                "column": "isNew",
                                "values": [
                                    "Yes"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "blue",
                        "tag": "",
                        "icon": null,
                        "ruleName": ""
                    },
                    {
                        "id": "3add60e5-1a3e-432b-b0e1-87782f46e46c",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "rows",
                        "conditions": [
                            {
                                "operator": "<",
                                "column": "delta",
                                "values": [
                                    "0"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "red",
                        "tag": "",
                        "icon": null,
                        "ruleName": ""
                    }
                ],
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let _now = now();\nlet TableCount = (\ntraces\n| where timestamp between (_previousUpdateStartTime .. _now)\n| where customDimensions.aadTenantId has_any (_aadTenantId)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.eventId == 'RT0005' \n| where customDimensions.alObjectId > 0 \n| project timestamp\n, clientType = tostring(customDimensions.clientType)\n, sqlStatement = tostring(customDimensions.sqlStatement)\n, stackTrace = tostring(customDimensions.alStackTrace)\n, extensionId = tostring(customDimensions.extensionId)\n, extensionPublisher = tostring(customDimensions.extensionPublisher)\n, extensionName = trim('XYZ',tostring(customDimensions.extensionName))\n, alObjectId = tostring(customDimensions.alObjectId)\n, alObjectName = trim('XYZ',tostring(customDimensions.alObjectName))\n, alObjectType = tostring(customDimensions.alObjectType)\n, executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000 //the datatype for executionTime is timespan \n| extend operationType = case(\n  sqlStatement startswith \"UPDATE\", \"UPDATE\"\n, sqlStatement startswith \"DELETE\", \"DELETE\"\n, sqlStatement startswith \"BeginTransaction\", \"BEGIN_TRANS\"\n, sqlStatement matches regex \"INSERT INTO\", \"INSERT\"\n, sqlStatement startswith \"SELECT\", \"SELECT\"\n, sqlStatement matches regex \"IF EXISTS \\\\(SELECT (.*)\\\\) SELECT\", \"SELECT'\"\n, sqlStatement has \"SELECT NEXT VALUE FOR\", \"SELECT_SEQUENCE_VALUE\"\n, sqlStatement has \"SELECT @@SPID\", \"SELECT_SPID\"\n, sqlStatement matches regex \"(.*)WITH\", \"SELECT\"\n, sqlStatement startswith \"CREATE TABLE\", \"CREATE_TABLE\"\n, sqlStatement startswith \"ALTER TABLE\", \"ALTER_TABLE\"\n, sqlStatement startswith \"exec sp_rename\", \"RENAME_TABLE\" \n, sqlStatement matches regex \"(.*)DROP TABLE\", \"DROP_TABLE\"\n, sqlStatement startswith \"SET LOCK_TIMEOUT\", \"SET_LOCK_TIMEOUT\"\n, sqlStatement has \"sp_getapplock\", \"GET_APP_LOCK\"\n, \"UNKNOWN\"\n)\n, signalsBin = iff(timestamp < _updateStartTime,'Previous Update', 'New Update')\n| extend signals = strcat(signalsBin,\" (Count)\") \n| project-away timestamp, signalsBin, executionTimeInMS\n| sort by signals asc \n| evaluate pivot(signals, count())\n);\nTableCount\n| join\n(traces\n| where timestamp between (_previousUpdateStartTime .. _now)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.eventId == 'RT0005' \n| where customDimensions.alObjectId > 0 \n| project timestamp\n, clientType = tostring(customDimensions.clientType)\n, sqlStatement = tostring(customDimensions.sqlStatement)\n, stackTrace = tostring(customDimensions.alStackTrace)\n, extensionId = tostring(customDimensions.extensionId)\n, extensionPublisher = tostring(customDimensions.extensionPublisher)\n, extensionName = trim('XYZ',tostring(customDimensions.extensionName))\n, alObjectId = tostring(customDimensions.alObjectId)\n, alObjectName = trim('XYZ',tostring(customDimensions.alObjectName))\n, alObjectType = tostring(customDimensions.alObjectType)\n, executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000 //the datatype for executionTime is timespan \n// this part of the query derives various insights from the SQL statement\n| extend operationType = case(\n  sqlStatement startswith \"UPDATE\", \"UPDATE\"\n, sqlStatement startswith \"DELETE\", \"DELETE\"\n, sqlStatement startswith \"BeginTransaction\", \"BEGIN_TRANS\"\n, sqlStatement matches regex \"INSERT INTO\", \"INSERT\"\n, sqlStatement startswith \"SELECT\", \"SELECT\"\n, sqlStatement matches regex \"IF EXISTS \\\\(SELECT (.*)\\\\) SELECT\", \"SELECT'\"\n, sqlStatement has \"SELECT NEXT VALUE FOR\", \"SELECT_SEQUENCE_VALUE\"\n, sqlStatement has \"SELECT @@SPID\", \"SELECT_SPID\"\n, sqlStatement matches regex \"(.*)WITH\", \"SELECT\"\n, sqlStatement startswith \"CREATE TABLE\", \"CREATE_TABLE\"\n, sqlStatement startswith \"ALTER TABLE\", \"ALTER_TABLE\"\n, sqlStatement startswith \"exec sp_rename\", \"RENAME_TABLE\" \n, sqlStatement matches regex \"(.*)DROP TABLE\", \"DROP_TABLE\"\n, sqlStatement startswith \"SET LOCK_TIMEOUT\", \"SET_LOCK_TIMEOUT\"\n, sqlStatement has \"sp_getapplock\", \"GET_APP_LOCK\"\n, \"UNKNOWN\"\n)\n, signalsBin = iff(timestamp < _updateStartTime,'Previous Update', 'New Update')\n| extend signals = strcat(signalsBin,\" (Avg)\") \n| project-away timestamp, signalsBin\n| summarize Average = round(avg(executionTimeInMS),0) by extensionId, extensionPublisher, extensionName, alObjectType, alObjectId, alObjectName, operationType, sqlStatement, stackTrace, clientType, signals\n| sort by signals asc \n| evaluate pivot(signals,sum(Average))\n)\non\n$left.extensionId == $right.extensionId,\n$left.extensionPublisher == $right.extensionPublisher,\n$left.extensionName == $right.extensionName,\n$left.alObjectType == $right.alObjectType,\n$left.alObjectId == $right.alObjectId,\n$left.alObjectName == $right.alObjectName,\n$left.clientType == $right.clientType,\n$left.operationType == $right.operationType,\n$left.sqlStatement == $right.sqlStatement,\n$left.stackTrace == $right.stackTrace\n| project-away extensionId, extensionId1, extensionPublisher1, extensionName1, alObjectType1, alObjectId1, alObjectName1, operationType1, sqlStatement1, stackTrace1, clientType1\n| where [\"New Update (Count)\"] > _countLimit\n| extend isNew = tostring(iif([\"Previous Update (Count)\"] < 1, \"Yes\",\"\"))\n| extend delta = iif(isNew == \"Yes\", 0.0, [\"Previous Update (Avg)\"] - [\"New Update (Avg)\"]) \n    , deltaPerc = iif(isNew == \"Yes\", 0.0, round(([\"Previous Update (Avg)\"] - [\"New Update (Avg)\"]) * 100 / [\"Previous Update (Avg)\"],0))\n| sort by [\"New Update (Count)\"] desc \n",
                "usedVariables": [
                    "_EnvironmentType",
                    "_aadTenantId",
                    "_countLimit",
                    "_environmentName",
                    "_previousUpdateStartTime",
                    "_updateStartTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "a5ff93d8-2345-4920-8e50-9f7d6856d12c",
            "title": "Tarot",
            "visualType": "multistat",
            "pageId": "f5885bb6-1db1-42c3-888b-fa857a7b39fd",
            "layout": {
                "x": 0,
                "y": 13,
                "width": 24,
                "height": 6
            },
            "description": "Fortune tarot",
            "visualOptions": {
                "multiStat__textSize": "small",
                "multiStat__valueColumn": "Value",
                "colorRulesDisabled": false,
                "colorRules": [
                    {
                        "id": "87781e7e-79b4-4602-95e8-2babde9ace98",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "cells",
                        "conditions": [
                            {
                                "operator": "==",
                                "column": "Label",
                                "values": [
                                    "Name"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "stat",
                        "colorStyle": "bold",
                        "color": "red",
                        "tag": "",
                        "icon": null,
                        "ruleName": ""
                    }
                ],
                "colorStyle": "light",
                "multiStat__displayOrientation": "horizontal",
                "multiStat__labelColumn": "Label",
                "multiStat__slot": {
                    "width": 3,
                    "height": 2
                }
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let signalDefinitionTable = (externaldata(tarot_interpretations : string)[h@'https://raw.githubusercontent.com/duiliotacconi/DT.Telemetry/main/JSON/Tarot.json']with(format='multijson')\n| extend tarots = parse_json(tarot_interpretations)\n| mv-apply tarots on (\n    project Name = tostring(tarots.name),\n            Rank = tostring(tarots.rank),\n            Suite = tostring(tarots.suit),\n            FortuneTellings = tostring(tarots.fortune_telling),\n            Keywords = tostring(tarots.keywords),\n            Meanings = tostring(tarots.meanings)\n)\n//FortuneTellings\n| extend FortuneTelling = parse_json(FortuneTellings)\n| mv-expand FortuneTelling\n//Keywords\n| extend Keyword = parse_json(Keywords)\n| mv-expand Keyword\n//Meanings\n| extend Meaning = parse_json(Meanings)\n| mv-apply Meaning on (\n    project Lights = tostring(Meaning.light),\n            Shadows = tostring(Meaning.shadow)\n)\n//Meaning.lights\n| extend LightNull = parse_json(Lights)\n| mv-expand LightNull\n//Meaning.shadows\n| extend ShadowNull = parse_json(Shadows)\n| mv-expand ShadowNull\n| sample (1)\n);\nsignalDefinitionTable\n| project Name, Suite, FortuneTelling, Keyword, \n    Light = iff(LightNull == \"##(null)\",\"\",LightNull), Shadow = iff(ShadowNull ==  \"##(null)\",\"\",ShadowNull)\n| evaluate narrow()\n| project Label = Column, Value = Value\n\n",
                "usedVariables": [],
                "kind": "inline"
            }
        },
        {
            "id": "d7333fa2-9b57-406e-85d9-626d7d751849",
            "title": "Long Running AL methods (ms)",
            "visualType": "table",
            "pageId": "e6b3a051-ba9e-4db5-912d-c63987fd1fb8",
            "layout": {
                "x": 0,
                "y": 11,
                "width": 24,
                "height": 10
            },
            "visualOptions": {
                "hideLegend": false,
                "table__enableRenderLinks": true,
                "colorRulesDisabled": false,
                "colorStyle": "light",
                "crossFilterDisabled": true,
                "drillthroughDisabled": true,
                "colorRules": [
                    {
                        "id": "0d9c7c7d-3fb5-4fa6-9308-286adf620062",
                        "ruleType": "colorByCondition",
                        "applyToColumn": null,
                        "hideText": false,
                        "applyTo": "rows",
                        "conditions": [
                            {
                                "operator": ">",
                                "column": "Duration",
                                "values": [
                                    "30000"
                                ]
                            }
                        ],
                        "chainingOperator": "and",
                        "visualType": "table",
                        "colorStyle": "bold",
                        "color": "blue",
                        "tag": "",
                        "icon": null,
                        "ruleName": ""
                    }
                ],
                "crossFilter": [
                    {
                        "interaction": "column",
                        "property": "extensionPublisher",
                        "parameterId": "9cc55dcf-17d4-4829-9340-37c385862cdf",
                        "disabled": false
                    }
                ],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "traces\n| where timestamp between (_startTime .. _endTime)// adjust as needed\n| where customDimensions.eventId == 'RT0018' \n| where customDimensions.alObjectId > 0 \n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.clientType has_any (_ClientType)\n| extend alObjectName = trim(@'XYZ',tostring(customDimensions.alObjectName))\n| extend extensionName = trim(@'XYZ',tostring(customDimensions.extensionName))\n| extend eventId = customDimensions.eventId \n, extensionId = customDimensions.extensionId\n, extensionInfo = strcat(extensionName, ' ', customDimensions.extensionVersion, \n    (iff(isnotempty(tostring(customDimensions.extensionPublisher)), strcat(' - ', tostring(customDimensions.extensionPublisher)), '')))\n, alObjectInfo = strcat(customDimensions.alObjectType, ' ', customDimensions.alObjectId, ' - ', alObjectName)\n, alStackTrace = tostring(customDimensions.alStackTrace)\n, clientType = tostring(customDimensions.clientType)\n, alObjectId = customDimensions.alObjectId\n, alObjectType = customDimensions.alObjectType\n, executionTimeInMS = round(toreal(totimespan(customDimensions.executionTime))/10000,0)  \n, alMethod = tostring(customDimensions.alMethod)\n| where executionTimeInMS > 1000 //greater than 1 sec\n| sort by timestamp desc \n| project timestamp, \n    [\"Client Type\"] = clientType, \n    [\"Extension Information\"] = extensionInfo,\n    [\"AL Object ID\"] = alObjectId,\n    [\"AL Object Type\"] = alObjectType,\n    [\"AL Object Name\"] = alObjectName,\n    [\"AL Object Method\"] = alMethod,\n    [\"Duration\"] = executionTimeInMS, \n    [\"AL Object Information\"] = alObjectInfo, \n    [\"User Telemetry ID\"] = user_Id,\n    [\"Session Id\"] = session_Id,\n    [\"AL Stack Trace\"] = alStackTrace",
                "usedVariables": [
                    "_ClientType",
                    "_CompanyName",
                    "_EnvironmentType",
                    "_endTime",
                    "_environmentName",
                    "_publisher",
                    "_startTime"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "bf9767c9-a20b-4ee0-8f61-54df71af13dd",
            "title": "What was running : LRAM",
            "visualType": "table",
            "pageId": "4610c3a4-114b-48f5-a151-f3504d693951",
            "layout": {
                "x": 0,
                "y": 0,
                "width": 24,
                "height": 8
            },
            "visualOptions": {
                "hideLegend": false,
                "table__enableRenderLinks": true,
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "colorRules": [],
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let correctedEndTime = datetime_add('hour',12,_ToPeriodTime);\ntraces\n| where timestamp between (_FromPeriodTime .. correctedEndTime)// adjust as needed\n| where customDimensions.eventId == 'RT0018' \n| where customDimensions.alObjectId > 0 \n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.clientType has_any (_ClientType)\n| extend alObjectName = trim(@'XYZ',tostring(customDimensions.alObjectName))\n| extend extensionName = trim(@'XYZ',tostring(customDimensions.extensionName))\n| extend eventId = customDimensions.eventId \n, extensionId = customDimensions.extensionId\n, extensionInfo = strcat(extensionName, ' ', customDimensions.extensionVersion, \n    (iff(isnotempty(tostring(customDimensions.extensionPublisher)), strcat(' - ', tostring(customDimensions.extensionPublisher)), '')))\n, alObjectInfo = strcat(customDimensions.alObjectType, ' ', customDimensions.alObjectId, ' - ', alObjectName)\n, alStackTrace = tostring(customDimensions.alStackTrace)\n, clientType = tostring(customDimensions.clientType)\n, alObjectId = customDimensions.alObjectId\n, alObjectType = customDimensions.alObjectType\n, executionTimeInMS = toint(round(toreal(totimespan(customDimensions.executionTime))/10000,0)) \n, negativeExecutionTimeInMS = toint((round(toreal(totimespan(customDimensions.executionTime))/10000,0)) * -1) \n, alMethod = tostring(customDimensions.alMethod)\n| extend correctedStartTime = datetime_add('millisecond',negativeExecutionTimeInMS, timestamp)\n| where correctedStartTime <= _ToPeriodTime\n| extend runningDuration = iff(timestamp between (_FromPeriodTime .. _ToPeriodTime)\n    ,toint(round(toreal(totimespan(timestamp - correctedStartTime))/10000,0))\n    ,toint(round(toreal(totimespan(_ToPeriodTime - correctedStartTime))/10000,0)))\n| sort by correctedStartTime asc \n| project [\"Start Time\"] = correctedStartTime,\n    [\"End Time\"] = timestamp, \n    [\"Total Event Duration\"] = executionTimeInMS, \n    [\"Running Duration\"] = runningDuration, //Since when it was running, when the event happened\n    [\"Client Type\"] = clientType, \n    [\"AL Object ID\"] = alObjectId,\n    [\"AL Object Type\"] = alObjectType,\n    [\"AL Object Name\"] = alObjectName,\n    [\"AL Object Method\"] = alMethod,\n    [\"Extension Information\"] = extensionInfo,\n    [\"User Telemetry ID\"] = user_Id,\n    [\"Session Id\"] = session_Id,\n    [\"AL Stack Trace\"] = alStackTrace",
                "usedVariables": [
                    "_ClientType",
                    "_CompanyName",
                    "_EnvironmentType",
                    "_FromPeriodTime",
                    "_ToPeriodTime",
                    "_environmentName",
                    "_publisher"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "11dbbfae-61e7-4aa9-b14e-7f4f9f7e6aea",
            "title": "What was running : LRQ",
            "visualType": "table",
            "pageId": "4610c3a4-114b-48f5-a151-f3504d693951",
            "layout": {
                "x": 0,
                "y": 8,
                "width": 24,
                "height": 8
            },
            "visualOptions": {
                "hideLegend": false,
                "table__enableRenderLinks": true,
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "colorRules": [],
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let correctedEndTime = datetime_add('hour',12,_ToPeriodTime);\ntraces\n| where timestamp between (_FromPeriodTime .. correctedEndTime)// adjust as needed\n| where customDimensions.eventId == 'RT0005' \n| where customDimensions.alObjectId > 0 \n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.clientType has_any (_ClientType)\n| extend alObjectName = trim(@'XYZ',tostring(customDimensions.alObjectName))\n| extend extensionName = trim(@'XYZ',tostring(customDimensions.extensionName))\n| extend eventId = customDimensions.eventId \n, extensionId = customDimensions.extensionId\n, extensionInfo = strcat(extensionName, ' ', customDimensions.extensionVersion, \n    (iff(isnotempty(tostring(customDimensions.extensionPublisher)), strcat(' - ', tostring(customDimensions.extensionPublisher)), '')))\n, alObjectInfo = strcat(customDimensions.alObjectType, ' ', customDimensions.alObjectId, ' - ', alObjectName)\n, alStackTrace = tostring(customDimensions.alStackTrace)\n, sqlStatement = tostring(customDimensions.sqlStatement)\n, clientType = tostring(customDimensions.clientType)\n, alObjectId = customDimensions.alObjectId\n, alObjectType = customDimensions.alObjectType\n, executionTimeInMS = toint(round(toreal(totimespan(customDimensions.executionTime))/10000,0)) \n, negativeExecutionTimeInMS = toint((round(toreal(totimespan(customDimensions.executionTime))/10000,0)) * -1) \n| extend correctedStartTime = datetime_add('millisecond',negativeExecutionTimeInMS, timestamp)\n| where correctedStartTime <= _ToPeriodTime\n| extend runningDuration = iff(timestamp between (_FromPeriodTime .. _ToPeriodTime)\n    ,toint(round(toreal(totimespan(timestamp - correctedStartTime))/10000,0))\n    ,toint(round(toreal(totimespan(_ToPeriodTime - correctedStartTime))/10000,0)))\n| sort by correctedStartTime asc \n| project [\"Start Time\"] = correctedStartTime,\n    [\"End Time\"] = timestamp, \n    [\"Total Event Duration\"] = executionTimeInMS, \n    [\"Running Duration\"] = runningDuration, //Since when it was running, when the event happened\n    [\"Client Type\"] = clientType, \n    [\"AL Object ID\"] = alObjectId,\n    [\"AL Object Type\"] = alObjectType,\n    [\"AL Object Name\"] = alObjectName,\n    [\"Extension Information\"] = extensionInfo,\n    [\"User Telemetry ID\"] = user_Id,\n    [\"Session Id\"] = session_Id,\n    [\"AL Stack Trace\"] = alStackTrace,\n    [\"SQL Statement\"] = sqlStatement",
                "usedVariables": [
                    "_ClientType",
                    "_CompanyName",
                    "_EnvironmentType",
                    "_FromPeriodTime",
                    "_ToPeriodTime",
                    "_environmentName",
                    "_publisher"
                ],
                "kind": "inline"
            }
        },
        {
            "id": "6c92ae4b-d79b-489b-a5a0-857103bd8f50",
            "title": "What was running : Report",
            "visualType": "table",
            "pageId": "4610c3a4-114b-48f5-a151-f3504d693951",
            "layout": {
                "x": 0,
                "y": 16,
                "width": 24,
                "height": 7
            },
            "visualOptions": {
                "hideLegend": false,
                "table__enableRenderLinks": true,
                "colorRulesDisabled": true,
                "colorStyle": "light",
                "crossFilterDisabled": false,
                "drillthroughDisabled": false,
                "colorRules": [],
                "crossFilter": [],
                "drillthrough": [],
                "table__renderLinks": []
            },
            "query": {
                "dataSource": {
                    "kind": "inline",
                    "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                },
                "text": "let correctedEndTime = datetime_add('hour',12,_ToPeriodTime);\ntraces\n| where timestamp between (_FromPeriodTime .. correctedEndTime)// adjust as needed\n| where customDimensions.eventId == 'RT0006' \n| where customDimensions.alObjectId > 0 \n| where customDimensions.companyName has_any (_CompanyName)\n| where customDimensions.extensionPublisher has_any (_publisher)\n| where customDimensions.environmentType has_any (_EnvironmentType)\n| where customDimensions.environmentName has_any (_environmentName)\n| where customDimensions.clientType has_any (_ClientType)\n| extend alObjectName = trim(@'XYZ',tostring(customDimensions.alObjectName))\n| extend extensionName = trim(@'XYZ',tostring(customDimensions.extensionName))\n| extend eventId = customDimensions.eventId \n, extensionId = customDimensions.extensionId\n, extensionInfo = strcat(extensionName, ' ', customDimensions.extensionVersion, \n    (iff(isnotempty(tostring(customDimensions.extensionPublisher)), strcat(' - ', tostring(customDimensions.extensionPublisher)), '')))\n, alObjectInfo = strcat(customDimensions.alObjectType, ' ', customDimensions.alObjectId, ' - ', alObjectName)\n, alStackTrace = tostring(customDimensions.alStackTrace)\n, sqlStatement = tostring(customDimensions.sqlStatement)\n, clientType = tostring(customDimensions.clientType)\n, alObjectId = customDimensions.alObjectId\n, alObjectType = customDimensions.alObjectType\n, executionTimeInMS = toint(round(toreal(totimespan(customDimensions.totalTime))/10000,0)) \n, negativeExecutionTimeInMS = toint((round(toreal(totimespan(customDimensions.totalTime))/10000,0)) * -1) \n| extend correctedStartTime = datetime_add('millisecond',negativeExecutionTimeInMS, timestamp)\n| where correctedStartTime <= _ToPeriodTime\n| extend runningDuration = iff(timestamp between (_FromPeriodTime .. _ToPeriodTime)\n    ,toint(round(toreal(totimespan(timestamp - correctedStartTime))/10000,0))\n    ,toint(round(toreal(totimespan(_ToPeriodTime - correctedStartTime))/10000,0)))\n| sort by timestamp desc \n| project [\"Start Time\"] = correctedStartTime,\n    [\"End Time\"] = timestamp, \n    [\"Total Event Duration\"] = executionTimeInMS, \n    [\"Running Duration\"] = runningDuration, //Since when it was running, when the event happened\n    [\"Client Type\"] = clientType, \n    [\"AL Object ID\"] = alObjectId,\n    [\"AL Object Type\"] = alObjectType,\n    [\"AL Object Name\"] = alObjectName,\n    [\"Extension Information\"] = extensionInfo,\n    [\"User Telemetry ID\"] = user_Id,\n    [\"Session Id\"] = session_Id\n",
                "usedVariables": [
                    "_ClientType",
                    "_CompanyName",
                    "_EnvironmentType",
                    "_FromPeriodTime",
                    "_ToPeriodTime",
                    "_environmentName",
                    "_publisher"
                ],
                "kind": "inline"
            }
        }
    ],
    "dataSources": [
        {
            "id": "99a3b70c-8819-4cce-844b-3c83734afb29",
            "name": "bcinsight",
            "clusterUri": "https://ade.applicationinsights.io/subscriptions/abc1234a-12ab-123a-12f1-1eaaf11c123e",
            "database": "bcinsight",
            "kind": "manual-kusto",
            "scopeId": "kusto"
        }
    ],
    "schema_version": "49",
    "autoRefresh": {
        "enabled": true,
        "defaultInterval": "30m",
        "minInterval": "1m"
    },
    "baseQueries": [],
    "parameters": [
        {
            "kind": "duration",
            "id": "14f4fdfe-2079-4e7d-b5fd-a649cdba5516",
            "displayName": "Intervallo di tempo",
            "description": "",
            "beginVariableName": "_startTime",
            "endVariableName": "_endTime",
            "defaultValue": {
                "kind": "dynamic",
                "count": 1,
                "unit": "hours"
            },
            "showOnPages": {
                "kind": "selection",
                "pageIds": [
                    "f5885bb6-1db1-42c3-888b-fa857a7b39fd",
                    "d1a3fbcf-a4a6-4912-ab95-fd07bfe32849",
                    "e6b3a051-ba9e-4db5-912d-c63987fd1fb8",
                    "5df16e18-eb32-4daf-9612-82775e9f54b9",
                    "fd2a227c-d2e0-49f4-a2ad-b21b9a1dd382",
                    "9bd8a199-ba41-40fa-87b8-f9833a040b03",
                    "60f8536a-1e14-47a9-80d8-f2a08e0e9fc7",
                    "5464aca4-0e79-4cc9-acaf-5bfcba11b235",
                    "f8d3fce9-30ff-4167-a56b-bb7ab51b1b88",
                    "a766ad41-9070-40d7-8dd7-70676512faaa",
                    "2951304b-62f3-4b7b-98c0-8c31c6d7ecd4",
                    "be2920cc-d647-444d-b5c3-0d5ecd424aa5",
                    "61a90ca3-7409-4c63-93a7-c415f15e4ea3",
                    "41c2b22e-69f3-4513-9227-26c3c42e9a08",
                    "bc9ae068-c7b3-417e-8f99-82f1740e0427"
                ]
            }
        },
        {
            "kind": "duration",
            "id": "14ccfca8-6d0a-4268-8ed4-af2c163d0b74",
            "displayName": "Intervallo di tempo-Ingestion",
            "description": "",
            "beginVariableName": "_startTime_Ingestion",
            "endVariableName": "_endTime_ingestion",
            "defaultValue": {
                "kind": "dynamic",
                "count": 7,
                "unit": "days"
            },
            "showOnPages": {
                "kind": "selection",
                "pageIds": [
                    "1a9f99e5-2026-4f32-a914-3ee9e64ce31e",
                    "94d9d8ce-b39a-4f2d-bf77-11c032f0fd9e"
                ]
            }
        },
        {
            "kind": "string",
            "id": "b70bde5b-1300-48e1-95c9-1f8f1519fc67",
            "displayName": "Client Type",
            "description": "",
            "variableName": "_ClientType",
            "selectionType": "array",
            "includeAllOption": true,
            "defaultValue": {
                "kind": "all"
            },
            "dataSource": {
                "kind": "query",
                "columns": {
                    "value": "Client Type"
                },
                "query": {
                    "dataSource": {
                        "kind": "inline",
                        "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                    },
                    "text": "traces\n| where timestamp  between (_startTime .. _endTime)\n| sort by timestamp desc\n| summarize arg_max(timestamp,*) by tostring(customDimensions.clientType)\n| where isnotempty( customDimensions.clientType)\n| project [\"Client Type\"] = tostring(customDimensions.clientType)\n| sort by ['Client Type'] asc ",
                    "usedVariables": [
                        "_endTime",
                        "_startTime"
                    ],
                    "kind": "inline"
                }
            },
            "showOnPages": {
                "kind": "selection",
                "pageIds": [
                    "d1a3fbcf-a4a6-4912-ab95-fd07bfe32849"
                ]
            }
        },
        {
            "kind": "string",
            "id": "9afff05d-ae00-4050-8ade-5fede3b5648e",
            "displayName": "CompanyName",
            "description": "",
            "variableName": "_CompanyName",
            "selectionType": "array",
            "includeAllOption": true,
            "defaultValue": {
                "kind": "all"
            },
            "dataSource": {
                "kind": "query",
                "columns": {
                    "value": "CompanyName"
                },
                "query": {
                    "dataSource": {
                        "kind": "inline",
                        "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                    },
                    "text": "traces\n| where customDimensions.companyName <> ''\n| project CompanyName = tostring(customDimensions.companyName)\n| distinct CompanyName\n\n\n\n",
                    "usedVariables": [],
                    "kind": "inline"
                }
            },
            "showOnPages": {
                "kind": "selection",
                "pageIds": [
                    "d1a3fbcf-a4a6-4912-ab95-fd07bfe32849",
                    "e6b3a051-ba9e-4db5-912d-c63987fd1fb8"
                ]
            }
        },
        {
            "kind": "string",
            "id": "9cc55dcf-17d4-4829-9340-37c385862cdf",
            "displayName": "Publisher",
            "description": "",
            "variableName": "_publisher",
            "selectionType": "array",
            "includeAllOption": true,
            "defaultValue": {
                "kind": "all"
            },
            "dataSource": {
                "kind": "query",
                "columns": {
                    "value": "_publisher"
                },
                "query": {
                    "dataSource": {
                        "kind": "inline",
                        "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                    },
                    "text": "traces\n| where customDimensions.extensionPublisher <> ''\n| project _publisher = tostring(customDimensions.extensionPublisher)\n| distinct _publisher",
                    "usedVariables": [],
                    "kind": "inline"
                }
            },
            "showOnPages": {
                "kind": "all"
            }
        },
        {
            "kind": "int",
            "selectionType": "freetext",
            "id": "79f54d5e-e6ca-454c-a1de-1b53601ae873",
            "displayName": "No. of JOINS",
            "variableName": "_joins",
            "description": "",
            "defaultValue": {
                "kind": "value",
                "value": 0
            },
            "showOnPages": {
                "kind": "selection",
                "pageIds": [
                    "d1a3fbcf-a4a6-4912-ab95-fd07bfe32849"
                ]
            }
        },
        {
            "kind": "string",
            "id": "4c124c10-b4d3-4eb7-b0f6-327aace8932b",
            "displayName": "Environment Type",
            "description": "",
            "variableName": "_EnvironmentType",
            "selectionType": "array",
            "includeAllOption": true,
            "defaultValue": {
                "kind": "all"
            },
            "dataSource": {
                "kind": "query",
                "columns": {
                    "value": "Environment Type"
                },
                "query": {
                    "dataSource": {
                        "kind": "inline",
                        "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                    },
                    "text": "traces\n| summarize arg_max(timestamp,*) by tostring(customDimensions.environmentType)\n| where isnotempty( customDimensions.environmentType)\n| project [\"Environment Type\"] = tostring(customDimensions.environmentType)\n| sort by [\"Environment Type\"] asc ",
                    "usedVariables": [],
                    "kind": "inline"
                }
            },
            "showOnPages": {
                "kind": "all"
            }
        },
        {
            "kind": "string",
            "id": "e90e4713-5c88-446c-b71a-216cbf050b2b",
            "displayName": "Environment Name",
            "description": "",
            "variableName": "_environmentName",
            "selectionType": "scalar",
            "includeAllOption": true,
            "defaultValue": {
                "kind": "all"
            },
            "dataSource": {
                "kind": "query",
                "columns": {
                    "value": "Environment Name"
                },
                "query": {
                    "dataSource": {
                        "kind": "inline",
                        "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                    },
                    "text": "traces\n| summarize arg_max(timestamp,*) by tostring(customDimensions.environmentType), \n                                    tostring(customDimensions.environmentName)\n| where isnotempty( customDimensions.environmentName)\n| project [\"Environment Name\"] = tostring(customDimensions.environmentName)\n| sort by ['Environment Name'] asc ",
                    "usedVariables": [],
                    "kind": "inline"
                }
            },
            "showOnPages": {
                "kind": "all"
            }
        },
        {
            "kind": "real",
            "id": "373dbe29-1441-456c-9db1-78429b4a74fe",
            "displayName": "Object ID",
            "description": "",
            "variableName": "_objectID",
            "selectionType": "array",
            "includeAllOption": true,
            "defaultValue": {
                "kind": "all"
            },
            "dataSource": {
                "kind": "query",
                "columns": {
                    "value": "AL Object ID",
                    "label": "AL Object ID"
                },
                "query": {
                    "dataSource": {
                        "kind": "inline",
                        "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                    },
                    "text": "traces\n| where customDimensions.eventId == 'RT0018' \n| where customDimensions.alObjectId > 50000\n| project [\"AL Object ID\"] = toreal(customDimensions.alObjectId)\n| distinct [\"AL Object ID\"]\n| order by [\"AL Object ID\"] asc",
                    "usedVariables": [],
                    "kind": "inline"
                }
            },
            "showOnPages": {
                "kind": "selection",
                "pageIds": [
                    "a766ad41-9070-40d7-8dd7-70676512faaa"
                ]
            }
        },
        {
            "kind": "string",
            "id": "b11d8163-c8dd-4f83-bbd3-705da109bdee",
            "displayName": "Session Id",
            "description": "",
            "variableName": "_sessionId",
            "selectionType": "scalar",
            "includeAllOption": true,
            "defaultValue": {
                "kind": "all"
            },
            "dataSource": {
                "kind": "query",
                "columns": {
                    "value": "Session ID"
                },
                "query": {
                    "dataSource": {
                        "kind": "inline",
                        "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                    },
                    "text": "traces\n| where customDimensions.eventId == 'RT0018' \n| project [\"Session ID\"] = session_Id\n| distinct [\"Session ID\"]\n\n",
                    "usedVariables": [],
                    "kind": "inline"
                }
            },
            "showOnPages": {
                "kind": "selection",
                "pageIds": [
                    "d1a3fbcf-a4a6-4912-ab95-fd07bfe32849",
                    "e6b3a051-ba9e-4db5-912d-c63987fd1fb8",
                    "5464aca4-0e79-4cc9-acaf-5bfcba11b235"
                ]
            }
        },
        {
            "kind": "datetime",
            "id": "faae011a-19c6-437e-a04c-d7de238ed7ad",
            "displayName": "Specific Date Time",
            "description": "",
            "variableName": "_SelectedDateTime",
            "selectionType": "scalar",
            "includeAllOption": true,
            "defaultValue": {
                "kind": "value",
                "value": 1672527600000
            },
            "dataSource": {
                "kind": "static",
                "values": [
                    {
                        "value": 1672527600000
                    }
                ]
            },
            "showOnPages": {
                "kind": "selection",
                "pageIds": [
                    "8ebc7a2e-d0e0-42ba-814e-d6fab6ad7332"
                ]
            }
        },
        {
            "kind": "string",
            "id": "5432a3f9-4fbe-462d-a8c6-8bad6ce82998",
            "displayName": "Tenant Id",
            "description": "",
            "variableName": "_aadTenantId",
            "selectionType": "array",
            "includeAllOption": true,
            "defaultValue": {
                "kind": "all"
            },
            "dataSource": {
                "kind": "query",
                "columns": {
                    "value": "Tenant Id"
                },
                "query": {
                    "dataSource": {
                        "kind": "inline",
                        "dataSourceId": "99a3b70c-8819-4cce-844b-3c83734afb29"
                    },
                    "text": "traces\n| summarize arg_max(timestamp,*) by tostring(customDimensions.aadTenantId)\n| where isnotempty(customDimensions.aadTenantId)\n| project [\"Tenant Id\"] = tostring(customDimensions.aadTenantId)\n| sort by ['Tenant Id'] asc ",
                    "usedVariables": [],
                    "kind": "inline"
                }
            },
            "showOnPages": {
                "kind": "all"
            }
        },
        {
            "kind": "duration",
            "id": "c3e493c6-e79f-4a84-baae-8d6315b0f163",
            "displayName": "Update Time Range",
            "description": "",
            "beginVariableName": "_previousUpdateStartTime",
            "endVariableName": "_updateStartTime",
            "defaultValue": {
                "kind": "dynamic",
                "count": 1,
                "unit": "hours"
            },
            "showOnPages": {
                "kind": "selection",
                "pageIds": [
                    "bc9ae068-c7b3-417e-8f99-82f1740e0427"
                ]
            }
        },
        {
            "kind": "int",
            "id": "5c9bad28-0f56-48cc-9058-64bebf45fb34",
            "displayName": "Count Limit",
            "description": "Integer value to limit the number of Counts",
            "variableName": "_countLimit",
            "selectionType": "scalar",
            "includeAllOption": false,
            "defaultValue": {
                "kind": "value",
                "value": 100
            },
            "dataSource": {
                "kind": "static",
                "values": [
                    {
                        "value": 10
                    },
                    {
                        "value": 50
                    },
                    {
                        "value": 100
                    },
                    {
                        "value": 200
                    },
                    {
                        "value": 500
                    },
                    {
                        "value": 1000
                    }
                ]
            },
            "showOnPages": {
                "kind": "selection",
                "pageIds": [
                    "bc9ae068-c7b3-417e-8f99-82f1740e0427"
                ]
            }
        },
        {
            "kind": "duration",
            "id": "2deeecdc-7250-4a38-bcc2-ef1e1d678950",
            "displayName": "Time Range",
            "description": "",
            "beginVariableName": "_FromPeriodTime",
            "endVariableName": "_ToPeriodTime",
            "defaultValue": {
                "kind": "dynamic",
                "count": 1,
                "unit": "hours"
            },
            "showOnPages": {
                "kind": "selection",
                "pageIds": [
                    "4610c3a4-114b-48f5-a151-f3504d693951"
                ]
            }
        },
        {
            "kind": "bool",
            "id": "789c306d-566b-46e4-bd4d-a60680bf83ad",
            "displayName": "Working Hours",
            "description": "",
            "variableName": "_OnlyWorkingHours",
            "selectionType": "scalar",
            "includeAllOption": false,
            "defaultValue": {
                "kind": "value",
                "value": false
            },
            "dataSource": {
                "kind": "static",
                "values": [
                    {
                        "value": true
                    },
                    {
                        "value": false
                    }
                ]
            },
            "showOnPages": {
                "kind": "all"
            }
        }
    ],
    "pages": [
        {
            "name": "Overview",
            "id": "f5885bb6-1db1-42c3-888b-fa857a7b39fd"
        },
        {
            "name": "Statistics",
            "id": "94d9d8ce-b39a-4f2d-bf77-11c032f0fd9e"
        },
        {
            "name": "SQL Query Usage",
            "id": "d1a3fbcf-a4a6-4912-ab95-fd07bfe32849"
        },
        {
            "name": "AL Usage",
            "id": "e6b3a051-ba9e-4db5-912d-c63987fd1fb8"
        },
        {
            "name": "Deadlocks / Locks",
            "id": "5464aca4-0e79-4cc9-acaf-5bfcba11b235"
        },
        {
            "name": "Page Performance",
            "id": "41c2b22e-69f3-4513-9227-26c3c42e9a08"
        },
        {
            "name": "OData Usage",
            "id": "fd2a227c-d2e0-49f4-a2ad-b21b9a1dd382"
        },
        {
            "name": "Incoming WS",
            "id": "9bd8a199-ba41-40fa-87b8-f9833a040b03"
        },
        {
            "name": "Outgoing WS",
            "id": "61a90ca3-7409-4c63-93a7-c415f15e4ea3"
        },
        {
            "name": "Job Queue",
            "id": "60f8536a-1e14-47a9-80d8-f2a08e0e9fc7"
        },
        {
            "name": "Miscellaneous",
            "id": "a766ad41-9070-40d7-8dd7-70676512faaa"
        },
        {
            "name": "Environment",
            "id": "2951304b-62f3-4b7b-98c0-8c31c6d7ecd4"
        },
        {
            "name": "Data Ingestion",
            "id": "1a9f99e5-2026-4f32-a914-3ee9e64ce31e"
        },
        {
            "name": "Details",
            "id": "a1b9eab8-5e92-446b-bdd0-6df8160c9c54"
        },
        {
            "id": "bc9ae068-c7b3-417e-8f99-82f1740e0427",
            "name": "Post Update"
        },
        {
            "name": "What Was Running",
            "id": "4610c3a4-114b-48f5-a151-f3504d693951"
        }
    ]
}